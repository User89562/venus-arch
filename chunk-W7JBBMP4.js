import{$ as ae,$a as vt,A as Qe,Ab as Te,B as Ke,Ba as mt,Bb as M,C as Ze,Ca as pt,Cb as yt,D as g,Da as ht,Db as Pt,E as x,Eb as Q,F as Me,Fa as X,G as oe,H as P,Ha as ue,I as B,Ia as me,J as c,K as l,Ka as pe,L as C,M as qe,N as Je,O as S,P as A,Pa as U,Q as h,Qa as he,R as D,S as m,Sa as Et,T as y,Ta as dt,U as N,Ua as It,V as et,Va as gt,W as F,Wa as Ee,X as q,Xa as At,Y as xe,Ya as ft,Z as tt,Za as Ct,_ as re,_a as Tt,a as Ve,aa as le,ab as z,b as ye,ba as H,bb as Rt,c as ee,ca as it,cb as de,d as Pe,da as se,db as Nt,e as Se,ea as Y,eb as Ot,f as Be,fa as W,fb as Ie,g as He,ga as j,h as Fe,ha as b,i as te,ia as nt,ib as $,j as Ye,ja as ot,jb as Lt,k as We,ka as rt,kb as St,l as R,la as ce,lb as Ft,m as je,ma as at,mb as Mt,n as ie,na as lt,nb as xt,o as Xe,oa as O,ob as Dt,p as ze,pb as bt,q as T,qb as wt,r as v,ra as _e,rb as Ut,s as Z,sb as w,t as _,ta as st,tb as ge,u as I,ub as kt,v as ne,va as ct,vb as Gt,w as V,wa as _t,wb as Vt,x as $e,xb as Ae,yb as fe,z as u,za as ut,zb as Ce}from"./chunk-BBTIVTCS.js";var K=(()=>{let n=class n{constructor(){this.processingSource=new V,this.overlaySource=new ee,this.fullscreenOverlaySource=new ee,this.databaseUpdateSource=new ee,this.processingFound$=this.processingSource.asObservable(),this.overlaySourceFound$=this.overlaySource.asObservable(),this.fullscreenOverlaySourceFound$=this.fullscreenOverlaySource.asObservable(),this.databaseUpdateSource$=this.databaseUpdateSource.asObservable()}announceDatabaseUpdate(t){this.databaseUpdateSource.next(t)}announceFullscreenOverlay(t){this.fullscreenOverlaySource.next(t)}closeOverlay(t){this.overlaySource.next(t)}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function ni(e,n){if(e&1&&(c(0,"a",5,6),m(2),l()),e&2){let a=n.$implicit;u("routerLink",a.path),_(2),N(" ",a.label," ")}}function oi(e,n){if(e&1&&(c(0,"div",7)(1,"div",8)(2,"mat-icon"),m(3,"lock_clock"),l(),m(4),re(5,"date"),l(),c(6,"div",9)(7,"mat-icon"),m(8,"mail"),l(),m(9),l(),c(10,"div",10)(11,"mat-icon"),m(12,"archive"),l(),m(13),l()()),e&2){let a=h();_(4),N(" ",ae(5,3,a.lastUpdated,"short")," "),_(5),N(" ",a.dbStats.boned_stats.num_inbox," "),_(4),N(" ",a.dbStats.boned_stats.num_archive," ")}}var Ht=(()=>{let n=class n{constructor(t,i){this.apiService=t,this.injectorService=i,this.navLinks=[{path:"search",label:"Search"},{path:"archive-delete-filter",label:"Archive/Delete"}],this.lastUpdated=new Date}ngOnInit(){this.apiService.howBoned().subscribe({next:t=>{this.dbStats=t}}),this.injectorService.databaseUpdateSource$.subscribe(t=>{this.dbStats.boned_stats.num_archive+=t.archiveNum,this.dbStats.boned_stats.num_inbox-=t.totalFileChanges})}};n.\u0275fac=function(i){return new(i||n)(I(Q),I(K))},n.\u0275cmp=R({type:n,selectors:[["app-home-page"]],standalone:!0,features:[F],decls:6,vars:2,consts:[[1,"toolbar-container"],[1,"toolbar-links"],["mat-list-item","","routerLinkActive","","class","nav-links",3,"routerLink",4,"ngFor","ngForOf"],[1,"toolbar-spacer"],["class","stats-container",4,"ngIf"],["mat-list-item","","routerLinkActive","",1,"nav-links",3,"routerLink"],["rla","routerLinkActive"],[1,"stats-container"],["matTooltip","Last Updated"],["matTooltip","Inbox"],["matTooltip","Archive"]],template:function(i,r){i&1&&(c(0,"mat-toolbar",0)(1,"div",1),g(2,ni,3,2,"a",2),l(),C(3,"span",3),g(4,oi,14,6,"div",4),l(),C(5,"router-outlet")),i&2&&(_(2),u("ngForOf",r.navLinks),_(2),u("ngIf",r.dbStats))},dependencies:[O,j,b,lt,st,M,Ot,Gt,w,ge,ut,ct,_t],styles:[".nav-links[_ngcontent-%COMP%]{font-size:31px;text-decoration:none}.nav-links[_ngcontent-%COMP%], .toolbar-icons[_ngcontent-%COMP%], .span-text[_ngcontent-%COMP%]{color:#f5f5f5}.toolbar-links[_ngcontent-%COMP%]{display:flex;gap:25%}.toolbar-container[_ngcontent-%COMP%]{background-color:#1565c0;padding-right:20px;padding-left:20px;border-bottom:whitesmoke 1px solid}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.stats-container[_ngcontent-%COMP%]{display:flex;gap:5px}.user-avatar[_ngcontent-%COMP%]{border-radius:50%}"]});let e=n;return e})();function ri(e,n){e&1&&(c(0,"mat-icon"),m(1,"videocam"),l())}function ai(e,n){e&1&&(c(0,"mat-icon"),m(1,"volume_up"),l())}function li(e,n){e&1&&(c(0,"mat-icon"),m(1," mail"),l())}function si(e,n){e&1&&(c(0,"mat-icon"),m(1," archive"),l())}function ci(e,n){e&1&&(c(0,"mat-icon"),m(1," delete"),l())}function _i(e,n){if(e&1&&m(0),e&2){let a=h(2);N(" ",a.hydrusFile.ext," ")}}var ui=(e,n,a)=>({background:e,"height.px":n,"width.px":a,"background-size":"contain"});function mi(e,n){if(e&1&&C(0,"div",5),e&2){let a=h(2);u("ngStyle",tt(1,ui,"url("+a.hydrusFile.thumbnail_url+") no-repeat center center",a.heightNum,a.widthNum?a.widthNum:a.heightNum))}}var pi=(e,n)=>({"height.px":e,"width.px":n});function hi(e,n){if(e&1&&C(0,"img",6),e&2){let a=h(2);u("src",a.hydrusFile.file_url,Z)("ngStyle",xe(2,pi,a.heightNum,a.widthNum?a.widthNum:a.heightNum))}}var Ei=(e,n)=>({"height.px":e,"width.px":n,"background-size":"contain"}),di=e=>({"width.px":e});function Ii(e,n){if(e&1&&(c(0,"div",1)(1,"mat-card",2)(2,"h3",3),m(3),l(),c(4,"div"),g(5,ri,2,0,"mat-icon",4)(6,ai,2,0,"mat-icon",4)(7,li,2,0,"mat-icon",4)(8,si,2,0,"mat-icon",4)(9,ci,2,0,"mat-icon",4),l(),g(10,_i,1,1)(11,mi,1,5,"div",5)(12,hi,1,5),l()()),e&2){let a=h();_(),u("ngStyle",xe(11,Ei,a.heightNum+70,a.widthNum+50)),_(),u("ngStyle",q(14,di,a.widthNum?a.widthNum:a.heightNum))("matTooltip",a.determineFileTitle()),_(),N(" ",a.determineFileTitle()," "),_(2),u("ngIf",a.hydrusFile.has_audio),_(),u("ngIf",a.hydrusFile.has_audio),_(),u("ngIf",a.hydrusFile.is_inbox),_(),u("ngIf",!a.hydrusFile.is_inbox),_(),u("ngIf",a.hydrusFile.is_trashed),_(),x(10,a.fileType==="other"?10:-1),_(),x(11,a.thumbnail||a.fileType==="video"||a.fileType==="gif"?11:12)}}var Re=(()=>{let n=class n{constructor(){this.fileType="",this.heightNum=0,this.widthNum=0}ngOnInit(){this.hydrusFile.mime.includes("video")?this.fileType="video":this.hydrusFile.mime.includes("gif")?this.fileType="gif":this.hydrusFile.mime.includes("image")?this.fileType="image":this.fileType="other"}determineFileTitle(){let t="";return this.hydrusFile.tags["616c6c206b6e6f776e2074616773"].display_tags[0]?(this.hydrusFile.tags["616c6c206b6e6f776e2074616773"].display_tags[0].forEach(i=>{i.includes("series")&&(t+=i.substring(i.indexOf(":")+1)+", ")}),t.trimEnd().slice(0,-1)):""}isPlayable(t){return!!(t.mime.includes("video")||t.mime.includes("gif"))}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=R({type:n,selectors:[["app-image-display"]],inputs:{hydrusFile:"hydrusFile",heightNum:"heightNum",widthNum:"widthNum",thumbnail:"thumbnail"},standalone:!0,features:[F],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],["id","image-container",3,"ngStyle"],[1,"file-title",3,"ngStyle","matTooltip"],[4,"ngIf"],["fxLayoutAlign","center center",3,"ngStyle"],[1,"image-thumbnail",3,"src","ngStyle"]],template:function(i,r){i&1&&g(0,Ii,13,16,"div",0),i&2&&u("ngIf",r.hydrusFile)},dependencies:[O,b,ce,M,Nt,w,ge],styles:[".image-thumbnail[_ngcontent-%COMP%]{object-fit:contain;width:95%;height:95%;animation:fadeIn ease .5s}.file-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-align:center;font-variant:small-caps;font-weight:700;font-size:20px;margin:0;width:85%}#image-container[_ngcontent-%COMP%]{padding:0;box-shadow:unset!important;border-radius:unset!important}.video[_ngcontent-%COMP%]{object-fit:fill}.video-play-button[_ngcontent-%COMP%]{opacity:.75}"],changeDetection:0});let e=n;return e})();var Ne=(()=>{let n=class n{constructor(t){this.apiService=t}getFileWithMetadataFromSearch(t,i,r){return this.apiService.getFilesSearch(t,i,r).pipe(He(s=>this.getThumbnailAndMetadata(s.file_ids)))}getThumbnailAndMetadata(t){return t.length===0?Pe([]):this.apiService.getFileMetadata(t).pipe(Se(i=>i.metadata.map(r=>ye(Ve({},r),{thumbnail_url:this.apiService.getThumbnailURLFromHash(r.hash),file_url:this.apiService.getFileURLFromHash(r.hash)}))))}downloadFile(t){return this.apiService.getFileAsBlob(t.hash).pipe(Se(i=>new File([i],t.hash+t.ext)))}};n.\u0275fac=function(i){return new(i||n)(We(Q))},n.\u0275prov=te({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function fi(e,n){if(e&1){let a=S();c(0,"mat-chip-row",7),A("removed",function(){let r=T(a).$implicit,s=h();return v(s.removeTag(r))}),m(1),c(2,"button",8)(3,"mat-icon"),m(4,"cancel"),l()()()}if(e&2){let a=n.$implicit;_(),N(" ",a," ")}}function Ci(e,n){if(e&1&&(c(0,"div"),C(1,"app-image-display",9),l()),e&2){let a=n.$implicit;_(),u("hydrusFile",a)("widthNum",365)("heightNum",330)("thumbnail",!0)}}var Xt=(()=>{let n=class n{constructor(t,i){this.fileService=t,this.searchFormControl=new ue,this.tags=["system:limit = 5","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,i.setTitle("Search | Venus' Arch")}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:r=>{this.hydrusFiles=r,this.loading=!1}}))}};n.\u0275fac=function(i){return new(i||n)(I(Ne),I(_e))},n.\u0275cmp=R({type:n,selectors:[["app-search"]],standalone:!0,features:[F],decls:15,vars:4,consts:[[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],[1,"image-container"],[4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","","aria-label","'remove ' + tag"],[3,"hydrusFile","widthNum","heightNum","thumbnail"]],template:function(i,r){if(i&1&&(c(0,"div")(1,"mat-form-field",0)(2,"mat-label"),m(3,"Search"),l(),c(4,"mat-chip-grid",1,2),P(6,fi,5,1,"mat-chip-row",null,oe),l(),c(8,"input",3),A("matChipInputTokenEnd",function(f){return r.addTag(f)}),l()()(),c(9,"div")(10,"button",4),A("click",function(){return r.changeSearchStatus()}),c(11,"mat-icon"),m(12),l()()(),c(13,"div",5),g(14,Ci,2,4,"div",6),l()),i&2){let s=D(5);_(4),u("formControl",r.searchFormControl),_(2),B(r.tags),_(2),u("matChipInputFor",s),_(4),y(r.startSearch?"play_arrow":"pause"),_(2),u("ngForOf",r.hydrusFiles)}},dependencies:[O,j,M,z,$,Ie,w,Ce,Te,Ae,fe,U,X,he,pe,Re],styles:[".tag-form-field[_ngcontent-%COMP%]{width:100%}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:35px}.image-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;gap:25px}"]});let e=n;return e})();var d=function(e){return e[e.TAG_REPOSITORY=0]="TAG_REPOSITORY",e[e.FILE_REPOSITORY=1]="FILE_REPOSITORY",e[e.LOCAL_FILE_DOMAIN=2]="LOCAL_FILE_DOMAIN",e[e.MESSAGE_DEPOT=3]="MESSAGE_DEPOT",e[e.LOCAL_TAG=5]="LOCAL_TAG",e[e.LOCAL_RATING_NUMERICAL=6]="LOCAL_RATING_NUMERICAL",e[e.LOCAL_RATING_LIKE=7]="LOCAL_RATING_LIKE",e[e.RATING_NUMERICAL_REPOSITORY=8]="RATING_NUMERICAL_REPOSITORY",e[e.RATING_LIKE_REPOSITORY=9]="RATING_LIKE_REPOSITORY",e[e.COMBINED_TAG=10]="COMBINED_TAG",e[e.COMBINED_FILE=11]="COMBINED_FILE",e[e.LOCAL_BOORU=12]="LOCAL_BOORU",e[e.IPFS=13]="IPFS",e[e.LOCAL_FILE_TRASH_DOMAIN=14]="LOCAL_FILE_TRASH_DOMAIN",e[e.COMBINED_LOCAL_FILE=15]="COMBINED_LOCAL_FILE",e[e.TEST_SERVICE=16]="TEST_SERVICE",e[e.LOCAL_NOTES=17]="LOCAL_NOTES",e[e.CLIENT_API_SERVICE=18]="CLIENT_API_SERVICE",e[e.COMBINED_DELETED_FILE=19]="COMBINED_DELETED_FILE",e[e.LOCAL_FILE_UPDATE_DOMAIN=20]="LOCAL_FILE_UPDATE_DOMAIN",e[e.COMBINED_LOCAL_MEDIA=21]="COMBINED_LOCAL_MEDIA",e[e.LOCAL_RATING_INCDEC=22]="LOCAL_RATING_INCDEC",e[e.SERVER_ADMIN=99]="SERVER_ADMIN",e[e.NULL_SERVICE=100]="NULL_SERVICE",e}(d||{}),Mn={[d.TAG_REPOSITORY]:"hydrus tag repository",[d.FILE_REPOSITORY]:"hydrus file repository",[d.LOCAL_FILE_DOMAIN]:"local file domain",[d.LOCAL_FILE_TRASH_DOMAIN]:"local trash file domain",[d.LOCAL_FILE_UPDATE_DOMAIN]:"local update file domain",[d.COMBINED_LOCAL_FILE]:"virtual combined local file service",[d.COMBINED_LOCAL_MEDIA]:"virtual combined local media service",[d.MESSAGE_DEPOT]:"hydrus message depot",[d.LOCAL_TAG]:"local tag service",[d.LOCAL_RATING_NUMERICAL]:"local numerical rating service",[d.LOCAL_RATING_LIKE]:"local like/dislike rating service",[d.LOCAL_RATING_INCDEC]:"local inc/dec rating service",[d.RATING_NUMERICAL_REPOSITORY]:"hydrus numerical rating repository",[d.RATING_LIKE_REPOSITORY]:"hydrus like/dislike rating repository",[d.COMBINED_TAG]:"virtual combined tag service",[d.COMBINED_FILE]:"virtual combined file service",[d.LOCAL_BOORU]:"client local booru",[d.CLIENT_API_SERVICE]:"client api",[d.IPFS]:"ipfs daemon",[d.TEST_SERVICE]:"test service",[d.LOCAL_NOTES]:"local file notes service",[d.SERVER_ADMIN]:"hydrus server administration service",[d.COMBINED_DELETED_FILE]:"virtual deleted file service",[d.NULL_SERVICE]:"null service"};var o=function(e){return e[e.EVERYTHING=1]="EVERYTHING",e[e.INBOX=2]="INBOX",e[e.ARCHIVE=3]="ARCHIVE",e[e.HAS_DURATION=4]="HAS_DURATION",e[e.NO_DURATION=5]="NO_DURATION",e[e.BEST_QUALITY_OF_GROUP=6]="BEST_QUALITY_OF_GROUP",e[e.NOT_BEST_QUALITY_OF_GROUP=7]="NOT_BEST_QUALITY_OF_GROUP",e[e.HAS_AUDIO=8]="HAS_AUDIO",e[e.NO_AUDIO=9]="NO_AUDIO",e[e.HAS_TRANSPARENCY=10]="HAS_TRANSPARENCY",e[e.NO_TRANSPARENCY=11]="NO_TRANSPARENCY",e[e.HAS_EXIF=12]="HAS_EXIF",e[e.NO_EXIF=13]="NO_EXIF",e[e.HAS_HUMAN_READABLE_EMBEDDED_METADATA=14]="HAS_HUMAN_READABLE_EMBEDDED_METADATA",e[e.NO_HUMAN_READABLE_EMBEDDED_METADATA=15]="NO_HUMAN_READABLE_EMBEDDED_METADATA",e[e.HAS_ICC_PROFILE=16]="HAS_ICC_PROFILE",e[e.NO_ICC_PROFILE=17]="NO_ICC_PROFILE",e[e.HAS_FORCED_FILETYPE=18]="HAS_FORCED_FILETYPE",e[e.NO_FORCED_FILETYPE=19]="NO_FORCED_FILETYPE",e[e.HAS_TAGS=20]="HAS_TAGS",e[e.UNTAGGED=21]="UNTAGGED",e[e.NUM_OF_TAGS=22]="NUM_OF_TAGS",e[e.NUM_OF_TAGS_WITH_NAMESPACE=23]="NUM_OF_TAGS_WITH_NAMESPACE",e[e.NUM_OF_WORDS=24]="NUM_OF_WORDS",e[e.HEIGHT=25]="HEIGHT",e[e.WIDTH=26]="WIDTH",e[e.FILESIZE=27]="FILESIZE",e[e.SIMILAR_TO=28]="SIMILAR_TO",e[e.LIMIT=29]="LIMIT",e[e.FILETYPE=30]="FILETYPE",e[e.HASH=31]="HASH",e[e.MOD_DATE=32]="MOD_DATE",e[e.ARCHIVED_DATE=33]="ARCHIVED_DATE",e[e.LAST_VIEWED_TIME=34]="LAST_VIEWED_TIME",e[e.TIME_IMPORTED=35]="TIME_IMPORTED",e[e.DURATION=36]="DURATION",e[e.FILE_SERVICE=37]="FILE_SERVICE",e[e.NUM_FILE_RELS=38]="NUM_FILE_RELS",e[e.RATIO=39]="RATIO",e[e.NUM_PIXELS=40]="NUM_PIXELS",e[e.MEDIA_VIEWS=41]="MEDIA_VIEWS",e[e.PREVIEW_VIEWS=42]="PREVIEW_VIEWS",e[e.ALL_VIEWS=43]="ALL_VIEWS",e[e.MEDIA_VIEWTIME=44]="MEDIA_VIEWTIME",e[e.PREVIEW_VIEWTIME=45]="PREVIEW_VIEWTIME",e[e.ALL_VIEWTIME=46]="ALL_VIEWTIME",e[e.URL_REGEX=47]="URL_REGEX",e[e.NO_URL_REGEX=48]="NO_URL_REGEX",e[e.URL=49]="URL",e[e.NO_URL=50]="NO_URL",e[e.DOMAIN=51]="DOMAIN",e[e.NO_DOMAIN=52]="NO_DOMAIN",e[e.URL_CLASS=53]="URL_CLASS",e[e.NO_URL_CLASS=54]="NO_URL_CLASS",e[e.TAG_AS_NUMBER=55]="TAG_AS_NUMBER",e[e.HAS_NOTES=56]="HAS_NOTES",e[e.NO_NOTES=57]="NO_NOTES",e[e.NUM_NOTES=58]="NUM_NOTES",e[e.HAS_NOTE_NAME=59]="HAS_NOTE_NAME",e[e.NO_NOTE_NAME=60]="NO_NOTE_NAME",e[e.RATING_SPECIFIC_NUMERICAL=61]="RATING_SPECIFIC_NUMERICAL",e[e.RATING_SPECIFIC_LIKE_DISLIKE=62]="RATING_SPECIFIC_LIKE_DISLIKE",e[e.RATING_SPECIFIC_INCDEC=63]="RATING_SPECIFIC_INCDEC",e[e.HAS_RATING=64]="HAS_RATING",e[e.NO_RATING=65]="NO_RATING",e[e.RATING_GENERAL=66]="RATING_GENERAL",e}(o||{}),p=function(e){return e[e.RELATIONAL=1]="RELATIONAL",e[e.RELATIONAL_EXACT=2]="RELATIONAL_EXACT",e[e.RELATIONAL_TIME=3]="RELATIONAL_TIME",e[e.RELATIONAL_FOR_RATING_SERVICE=4]="RELATIONAL_FOR_RATING_SERVICE",e[e.EQUAL=5]="EQUAL",e[e.FILESERVICE_STATUS=6]="FILESERVICE_STATUS",e[e.TAG_RELATIONAL=7]="TAG_RELATIONAL",e[e.ONLY_EQUAL=8]="ONLY_EQUAL",e[e.RATIO_OPERATORS=9]="RATIO_OPERATORS",e}(p||{}),E=function(e){return e[e.NATURAL=1]="NATURAL",e[e.HASHLIST_WITH_DISTANCE=2]="HASHLIST_WITH_DISTANCE",e[e.HASHLIST_WITH_ALGORITHM=3]="HASHLIST_WITH_ALGORITHM",e[e.FILETYPE_LIST=4]="FILETYPE_LIST",e[e.DATE_OR_TIME_INTERVAL=5]="DATE_OR_TIME_INTERVAL",e[e.TIME_SEC_MSEC=6]="TIME_SEC_MSEC",e[e.ANY_STRING=7]="ANY_STRING",e[e.TIME_INTERVAL=8]="TIME_INTERVAL",e[e.INTEGER=9]="INTEGER",e[e.RATIO=10]="RATIO",e[e.RATIO_SPECIAL=11]="RATIO_SPECIAL",e[e.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE=12]="RATING_SERVICE_NAME_AND_NUMERICAL_VALUE",e[e.RATING_SERVICE_NAME_AND_LIKE_DISLIKE=13]="RATING_SERVICE_NAME_AND_LIKE_DISLIKE",e[e.RATING_SERVICE_NAME_AND_INCDEC=14]="RATING_SERVICE_NAME_AND_INCDEC",e[e.RATING_SERVICE_GENERIC=15]="RATING_SERVICE_GENERIC",e[e.SERVICE_NAME=16]="SERVICE_NAME",e[e.NAMESPACE_AND_NUM_TAGS=17]="NAMESPACE_AND_NUM_TAGS",e}(E||{}),L=function(e){return e[e.FILESIZE=1]="FILESIZE",e[e.FILE_RELATIONSHIP_TYPE=2]="FILE_RELATIONSHIP_TYPE",e[e.PIXELS_OR_NONE=3]="PIXELS_OR_NONE",e[e.PIXELS=4]="PIXELS",e}(L||{}),Dn={[o.EVERYTHING]:{name:"everything",operator:null,value:null,units:null},[o.INBOX]:{name:"inbox",operator:null,value:null,units:null},[o.ARCHIVE]:{name:"archive",operator:null,value:null,units:null},[o.HAS_DURATION]:{name:"has duration",operator:null,value:null,units:null},[o.NO_DURATION]:{name:"no duration",operator:null,value:null,units:null},[o.BEST_QUALITY_OF_GROUP]:{name:"is the best quality file of its duplicate group",operator:null,value:null,units:null},[o.NOT_BEST_QUALITY_OF_GROUP]:{name:"is not the best quality file of its duplicate group",operator:null,value:null,units:null},[o.HAS_AUDIO]:{name:"has audio",operator:null,value:null,units:null},[o.NO_AUDIO]:{name:"no audio",operator:null,value:null,units:null},[o.HAS_TRANSPARENCY]:{name:"has transparency",operator:null,value:null,units:null},[o.NO_TRANSPARENCY]:{name:"no transparency",operator:null,value:null,units:null},[o.HAS_EXIF]:{name:"has exif",operator:null,value:null,units:null},[o.NO_EXIF]:{name:"no exif",operator:null,value:null,units:null},[o.HAS_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"has embedded metadata",operator:null,value:null,units:null},[o.NO_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"no embedded metadata",operator:null,value:null,units:null},[o.HAS_ICC_PROFILE]:{name:"has icc profile",operator:null,value:null,units:null},[o.NO_ICC_PROFILE]:{name:"no icc profile",operator:null,value:null,units:null},[o.HAS_FORCED_FILETYPE]:{name:"has forced filetype",operator:null,value:null,units:null},[o.NO_FORCED_FILETYPE]:{name:"no forced filetype",operator:null,value:null,units:null},[o.HAS_TAGS]:{name:"has tags",operator:null,value:null,units:null},[o.UNTAGGED]:{name:"untagged",operator:null,value:null,units:null},[o.NUM_OF_TAGS]:{name:"number of tags",operator:p.RELATIONAL,value:E.NATURAL,units:null},[o.NUM_OF_TAGS_WITH_NAMESPACE]:{name:"number of tags with namespace",operator:null,value:E.NAMESPACE_AND_NUM_TAGS,units:null},[o.NUM_OF_WORDS]:{name:"number of words",operator:p.RELATIONAL,value:E.NATURAL,units:null},[o.HEIGHT]:{name:"height",operator:p.RELATIONAL,value:E.NATURAL,units:L.PIXELS_OR_NONE},[o.WIDTH]:{name:"width",operator:p.RELATIONAL,value:E.NATURAL,units:L.PIXELS_OR_NONE},[o.FILESIZE]:{name:"filesize",operator:p.RELATIONAL,value:E.NATURAL,units:L.FILESIZE},[o.SIMILAR_TO]:{name:"similar to",operator:null,value:E.HASHLIST_WITH_DISTANCE,units:null},[o.LIMIT]:{name:"limit",operator:p.ONLY_EQUAL,value:E.NATURAL,units:null},[o.FILETYPE]:{name:"filetype",operator:p.ONLY_EQUAL,value:E.FILETYPE_LIST,units:null},[o.HASH]:{name:"hash",operator:p.EQUAL,value:E.HASHLIST_WITH_ALGORITHM,units:null},[o.ARCHIVED_DATE]:{name:"archived time",operator:p.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.MOD_DATE]:{name:"modified date",operator:p.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.LAST_VIEWED_TIME]:{name:"last viewed time",operator:p.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.TIME_IMPORTED]:{name:"import time",operator:p.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.DURATION]:{name:"duration",operator:p.RELATIONAL,value:E.TIME_SEC_MSEC,units:null},[o.FILE_SERVICE]:{name:"file service",operator:p.FILESERVICE_STATUS,value:E.SERVICE_NAME,units:null},[o.NUM_FILE_RELS]:{name:"number of file relationships",operator:p.RELATIONAL,value:E.NATURAL,units:L.FILE_RELATIONSHIP_TYPE},[o.RATIO]:{name:"ratio",operator:p.RATIO_OPERATORS,value:E.RATIO,units:null},[o.NUM_PIXELS]:{name:"num pixels",operator:p.RELATIONAL,value:E.NATURAL,units:L.PIXELS},[o.MEDIA_VIEWS]:{name:"media views",operator:p.RELATIONAL,value:E.NATURAL,units:null},[o.PREVIEW_VIEWS]:{name:"preview views",operator:p.RELATIONAL,value:E.NATURAL,units:null},[o.ALL_VIEWS]:{name:"all views",operator:p.RELATIONAL,value:E.NATURAL,units:null},[o.MEDIA_VIEWTIME]:{name:"media viewtime",operator:p.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.PREVIEW_VIEWTIME]:{name:"preview viewtime",operator:p.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.ALL_VIEWTIME]:{name:"all viewtime",operator:p.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.URL_REGEX]:{name:"has a url matching regex",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL_REGEX]:{name:"does not have a url matching regex",operator:null,value:E.ANY_STRING,units:null},[o.URL]:{name:"has url",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL]:{name:"does not have url",operator:null,value:E.ANY_STRING,units:null},[o.DOMAIN]:{name:"has a url with domain",operator:null,value:E.ANY_STRING,units:null},[o.NO_DOMAIN]:{name:"does not have a url with domain",operator:null,value:E.ANY_STRING,units:null},[o.URL_CLASS]:{name:"has a url with url class",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL_CLASS]:{name:"does not have a url with url class",operator:null,value:E.ANY_STRING,units:null},[o.TAG_AS_NUMBER]:{name:"tag as number",operator:p.TAG_RELATIONAL,value:E.INTEGER,units:null},[o.HAS_NOTES]:{name:"has notes",operator:null,value:null,units:null},[o.NO_NOTES]:{name:"no notes",operator:null,value:null,units:null},[o.NUM_NOTES]:{name:"number of notes",operator:p.RELATIONAL_EXACT,value:E.NATURAL,units:null},[o.HAS_NOTE_NAME]:{name:"note with name",operator:null,value:E.ANY_STRING,units:null},[o.NO_NOTE_NAME]:{name:"does not have note with name",operator:null,value:E.ANY_STRING,units:null},[o.HAS_RATING]:{name:"has rating for",operator:null,value:E.SERVICE_NAME,units:null},[o.NO_RATING]:{name:"no rating for",operator:null,value:E.SERVICE_NAME,units:null},[o.RATING_SPECIFIC_NUMERICAL]:{name:"rating for",operator:p.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE,units:null},[o.RATING_SPECIFIC_LIKE_DISLIKE]:{name:"rating for",operator:p.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_LIKE_DISLIKE,units:null},[o.RATING_SPECIFIC_INCDEC]:{name:"rating for",operator:p.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_INCDEC,units:null},[o.RATING_GENERAL]:{name:"rating",operator:p.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_GENERIC,units:null}},bn={[p.RELATIONAL]:["<","\u2248","=","\u2260",">"],[p.RELATIONAL_EXACT]:["<","=",">"],[p.RELATIONAL_TIME]:["before","\u2248","=","\u2260","since"],[p.RELATIONAL_FOR_RATING_SERVICE]:["<","\u2248","=",">"],[p.EQUAL]:["is","is not"],[p.FILESERVICE_STATUS]:["is currently in","is not currently in","is pending to","is not pending to"],[p.TAG_RELATIONAL]:["<","\u2248","=","\u2260",">"],[p.ONLY_EQUAL]:["is"],[p.RATIO_OPERATORS]:["=","wider than","taller than","\u2248","\u2260"]},wn={[p.RELATIONAL]:"=",[p.RELATIONAL_EXACT]:"=",[p.RELATIONAL_TIME]:"=",[p.RELATIONAL_FOR_RATING_SERVICE]:"",[p.EQUAL]:"is",[p.FILESERVICE_STATUS]:"is currently in",[p.TAG_RELATIONAL]:"=",[p.ONLY_EQUAL]:"is",[p.RATIO_OPERATORS]:"="},Un={[L.FILESIZE]:["B","KB","MB","GB"],[L.FILE_RELATIONSHIP_TYPE]:["duplicates","alternates","not related","potential duplicates"],[L.PIXELS_OR_NONE]:["pixels"],[L.PIXELS]:["pixels","kilopixels","megapixels"]},kn={[L.FILESIZE]:"KB",[L.FILE_RELATIONSHIP_TYPE]:"duplicates",[L.PIXELS_OR_NONE]:"pixels",[L.PIXELS]:"megapixels"};var Gn={[o.FILE_SERVICE]:"File service",[o.URL_REGEX]:"URL Regex",[o.NO_URL_REGEX]:"URL Regex",[o.URL]:"URL",[o.NO_URL]:"URL",[o.DOMAIN]:"Domain",[o.NO_DOMAIN]:"Domain",[o.URL_CLASS]:"URL Class",[o.NO_URL_CLASS]:"Url Class",[o.HAS_NOTE_NAME]:"Note Name",[o.NO_NOTE_NAME]:"Note Name"},Vn=[{predicate:o.EVERYTHING},{predicate:o.INBOX},{predicate:o.ARCHIVE},{name:"dimensions",predicates:[o.HEIGHT,o.WIDTH,o.RATIO,o.NUM_PIXELS]},{name:"duration",predicates:[o.HAS_DURATION,o.NO_DURATION,o.DURATION]},{name:"file properties",predicates:[o.HAS_AUDIO,o.NO_AUDIO,o.HAS_TRANSPARENCY,o.NO_TRANSPARENCY,o.HAS_EXIF,o.NO_EXIF,o.HAS_HUMAN_READABLE_EMBEDDED_METADATA,o.NO_HUMAN_READABLE_EMBEDDED_METADATA,o.HAS_ICC_PROFILE,o.NO_ICC_PROFILE,o.HAS_FORCED_FILETYPE,o.NO_FORCED_FILETYPE]},{name:"file relationships",predicates:[o.NOT_BEST_QUALITY_OF_GROUP,o.BEST_QUALITY_OF_GROUP,o.NUM_FILE_RELS]},{predicate:o.FILE_SERVICE},{name:"file viewing statistics",predicates:[o.ALL_VIEWS,o.MEDIA_VIEWS,o.PREVIEW_VIEWS,o.ALL_VIEWTIME,o.MEDIA_VIEWTIME,o.PREVIEW_VIEWTIME]},{predicate:o.FILESIZE},{predicate:o.FILETYPE},{predicate:o.HASH},{name:"known url",predicates:[o.URL,o.NO_URL,o.DOMAIN,o.NO_DOMAIN,o.URL_REGEX,o.NO_URL_REGEX,o.URL_CLASS,o.NO_URL_CLASS]},{predicate:o.LIMIT},{name:"notes",predicates:[o.HAS_NOTES,o.NO_NOTES,o.NUM_NOTES,o.HAS_NOTE_NAME,o.NO_NOTE_NAME]},{name:"number of tags",predicates:[o.HAS_TAGS,o.UNTAGGED,o.NUM_OF_TAGS]},{predicate:o.NUM_OF_WORDS},{predicate:o.SIMILAR_TO},{predicate:o.TAG_AS_NUMBER},{name:"time",predicates:[o.TIME_IMPORTED,o.MOD_DATE,o.LAST_VIEWED_TIME,o.ARCHIVED_DATE]},{name:"rating",predicates:[o.HAS_RATING,o.NO_RATING,o.RATING_GENERAL]}],yn={[o.RATING_SPECIFIC_NUMERICAL]:["more than","less than","is","is about"],[o.RATING_SPECIFIC_LIKE_DISLIKE]:["is"],[o.RATING_SPECIFIC_INCDEC]:["more than","less than","is","is about"]};function we(e){return e.type===d.LOCAL_RATING_NUMERICAL||e.type===d.RATING_NUMERICAL_REPOSITORY}function Ue(e){return e.type===d.LOCAL_RATING_LIKE||e.type===d.RATING_LIKE_REPOSITORY}function ke(e){return e.type===d.LOCAL_RATING_INCDEC}function zt(e){return ke(e)||Ue(e)||we(e)}function Ti(e,n){}function vi(e,n){if(e&1&&g(0,Ti,0,0,"ng-template",10),e&2){let a=h(2),t=D(5);u("ngTemplateOutlet",(a.customFractionRating==null?null:a.customFractionRating.template)||t)}}function Ri(e,n){}function Ni(e,n){if(e&1&&g(0,Ri,0,0,"ng-template",10),e&2){let a=h(2),t=D(9);u("ngTemplateOutlet",(a.customInActiveRating==null?null:a.customInActiveRating.template)||t)}}function Oi(e,n){}function Li(e,n){if(e&1&&g(0,Oi,0,0,"ng-template",10),e&2){let a=h(2),t=D(7);u("ngTemplateOutlet",(a.customActiveRating==null?null:a.customActiveRating.template)||t)}}function Si(e,n){if(e&1){let a=S();c(0,"div",6),A("click",function(i){let s=T(a).$implicit;return v(s.click(i))})("mouseenter",function(){let r=T(a).$implicit;return v(r.enter())}),qe(1,7),g(2,vi,1,1,null,8)(3,Ni,1,1,null,8)(4,Li,1,1,null,9),Je(),l()}if(e&2){let a=n.$implicit,t=h();_(),u("ngSwitch",a.state),_(),u("ngSwitchCase",t.unitState.fraction),_(),u("ngSwitchCase",t.unitState.inactive)}}function Fi(e,n){if(e&1&&(c(0,"div",11),m(1),re(2,"rateTitle"),l()),e&2){let a=h();_(),y(ae(2,1,a.nextRate+1,a.titles))}}function Mi(e,n){e&1&&C(0,"div",12)}function xi(e,n){e&1&&C(0,"div",13)}function Di(e,n){e&1&&C(0,"div",14)}var bi=(()=>{let n=class n{constructor(t){this.template=t}};n.\u0275fac=function(i){return new(i||n)(I(le))},n.\u0275dir=ie({type:n,selectors:[["","ratingActive",""]]});let e=n;return e})(),wi=(()=>{let n=class n{constructor(t){this.template=t}};n.\u0275fac=function(i){return new(i||n)(I(le))},n.\u0275dir=ie({type:n,selectors:[["","ratingInactive",""]]});let e=n;return e})(),Ui=(()=>{let n=class n{constructor(t){this.template=t}};n.\u0275fac=function(i){return new(i||n)(I(le))},n.\u0275dir=ie({type:n,selectors:[["","ratingFraction",""]]});let e=n;return e})(),ki=(()=>{let n=class n{transform(t=0,i){return i[t]||t}};n.\u0275fac=function(i){return new(i||n)},n.\u0275pipe=Xe({name:"rateTitle",type:n,pure:!0});let e=n;return e})(),Gi={provide:mt,useExisting:Fe(()=>Oe),multi:!0},Vi={provide:ht,useExisting:Fe(()=>Oe),multi:!0},G=function(e){return e.active="active",e.inactive="inactive",e.selected="selected",e.fraction="fraction",e}(G||{}),Oe=(()=>{let n=class n{constructor(t){this.changeDetectorRef=t,this.unitState=G,this.contexts=[],this.max=5,this.readOnly=!1,this.theme="default",this.showText=!1,this.titles=[],this.required=!1,this.hover=new V,this.leave=new V,this.rateChange=new V(!0),this.barClick=new V}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,i)=>({state:G.inactive,click:()=>this.handleClick(i+1),enter:()=>this.handleEnter(i+1)})),this.updateState(this.rate)}update(t,i=!0){!this.readOnly&&!this.disabled&&this.rate!==t&&(this.rate=t,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this.updateState(this.rate)}reset(){this.leave.emit(this.nextRate),this.updateState(this.rate)}updateState(t){this.nextRate=t-1,this.contexts=Array.from({length:this.max},(i,r)=>({state:r+1<=t?G.selected:(r+1===Math.round(t)&&t%1)>=.5?G.fraction:G.inactive,click:()=>this.handleClick(r),enter:()=>this.handleEnter(r)}))}handleClick(t){this.update(t+1)}handleEnter(t){!this.disabled&&!this.readOnly&&(this.contexts.map((i,r)=>{i.state=r<=t?G.active:G.inactive}),this.nextRate=t,this.hover.emit(t))}writeValue(t){this.update(t,!1),this.changeDetectorRef.markForCheck()}validate(t){return this.required&&!t.value?{required:!0}:null}onChange(t){}onTouched(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}};n.\u0275fac=function(i){return new(i||n)(I(ne))},n.\u0275cmp=R({type:n,selectors:[["bar-rating"]],contentQueries:function(i,r,s){if(i&1&&(se(s,bi,5),se(s,wi,5),se(s,Ui,5)),i&2){let f;H(f=Y())&&(r.customActiveRating=f.first),H(f=Y())&&(r.customInActiveRating=f.first),H(f=Y())&&(r.customFractionRating=f.first)}},inputs:{rate:"rate",max:"max",readOnly:"readOnly",theme:"theme",showText:"showText",titles:"titles",required:"required"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange",barClick:"barClick"},features:[et([Gi,Vi]),ze],decls:10,vars:9,consts:[[1,"br-units",3,"mouseleave"],["class","br-unit",3,"click","mouseenter",4,"ngFor","ngForOf"],["class","br-text",4,"ngIf"],["fractionTemplate",""],["activeTemplate",""],["inactiveTemplate",""],[1,"br-unit",3,"click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],[1,"br-text"],[1,"br-unit-inner","br-fraction"],[1,"br-unit-inner","br-active"],[1,"br-unit-inner","br-inactive"]],template:function(i,r){i&1&&(c(0,"div")(1,"div",0),A("mouseleave",function(){return r.reset()}),g(2,Si,5,3,"div",1),l(),g(3,Fi,3,4,"div",2),l(),g(4,Mi,1,0,"ng-template",null,3,W)(6,xi,1,0,"ng-template",null,4,W)(8,Di,1,0,"ng-template",null,5,W)),i&2&&(Ke("br br-",r.customInActiveRating?"":r.theme,""),Qe("br-readonly",r.readOnly)("br-disabled",r.disabled),_(2),u("ngForOf",r.contexts),_(),u("ngIf",r.showText))},dependencies:[j,b,at,nt,ot,rt,ki],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br[_ngcontent-%COMP%]{position:relative}.br-units[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit[_ngcontent-%COMP%]{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner[_ngcontent-%COMP%]{position:relative}.br-readonly[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%], .br-disabled[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%]{cursor:default}"],changeDetection:0});let e=n;return e})(),$t=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=je({type:n}),n.\u0275inj=Ye({imports:[O,U]});let e=n;return e})();var Qt=(()=>{let n=class n{constructor(t,i){this.dialogRef=t,this.data=i}onNoClick(){this.dialogRef.close()}};n.\u0275fac=function(i){return new(i||n)(I(St),I(Ft))},n.\u0275cmp=R({type:n,selectors:[["app-dialog-form"]],standalone:!0,features:[F],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(i,r){i&1&&(c(0,"h1",0),m(1,"Search Term Edit"),l(),c(2,"div",1)(3,"p"),m(4,"Search Term"),l(),c(5,"mat-form-field")(6,"input",2),A("ngModelChange",function(f){return r.data.searchTerm=f}),l()()(),c(7,"div",3)(8,"button",4),A("click",function(){return r.onNoClick()}),m(9,"Cancel"),l(),c(10,"button",5),m(11,"Confirm"),l()()),i&2&&(_(6),u("ngModel",r.data.searchTerm),_(4),u("mat-dialog-close",r.data.searchTerm))},dependencies:[O,U,pt,X,me,M,z,$,Lt,xt,Dt,wt,bt],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=n;return e})();function Bi(e,n){e&1&&C(0,"mat-spinner")}function Hi(e,n){if(e&1&&(c(0,"div",5),C(1,"img",6),l()),e&2){let a=h();_(),u("src",a.hydrusFile.file_url,Z)}}function Yi(e,n){if(e&1){let a=S();c(0,"video",7,8),A("loadeddata",function(){T(a);let i=h();return v(i.onLoad())}),C(2,"source",9),m(3," Your browser does not support the video tag. "),l()}if(e&2){let a=h();u("muted",!0)("hidden",a.loading),_(2),u("src",a.hydrusFile.file_url,Z)("type",a.hydrusFile.mime)}}var Kt=(()=>{let n=class n{constructor(t){this.injectorService=t,this.loading=!0,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loading=!0,this.subscriptions.push(this.injectorService.fullscreenOverlaySourceFound$.subscribe(t=>{this.hydrusFile=t,this.loading=!1}))}closeFullscreen(){this.injectorService.closeOverlay("msg")}imageType(t){return!t?.includes("video")}onLoad(){this.loading=!1}};n.\u0275fac=function(i){return new(i||n)(I(K))},n.\u0275cmp=R({type:n,selectors:[["app-overlay"]],standalone:!0,features:[F],decls:9,vars:3,consts:[["mat-icon-button","",1,"close-fullscreen-button",3,"click"],["fxLayoutAlign","center center",1,"custom-swiper-container"],[4,"ngIf"],["class","image-container",4,"ngIf","ngIfElse"],["video",""],[1,"image-container"],["draggable","false",1,"current-image",3,"src"],["controls","",1,"current-video",3,"muted","hidden","loadeddata"],["videoPlayer",""],[3,"src","type"]],template:function(i,r){if(i&1&&(c(0,"div")(1,"button",0),A("click",function(){return r.closeFullscreen()}),c(2,"mat-icon"),m(3,"close"),l()()(),c(4,"div",1),g(5,Bi,1,0,"mat-spinner",2)(6,Hi,2,1,"div",3)(7,Yi,4,4,"ng-template",null,4,W),l()),i&2){let s=D(8);_(5),u("ngIf",r.loading),_(),u("ngIf",r.imageType(r.hydrusFile.mime))("ngIfElse",s)}},dependencies:[O,b,M,de,Ut,w],styles:[".custom-swiper-container[_ngcontent-%COMP%]{height:87vh;width:90vw;padding:5px}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.current-image[_ngcontent-%COMP%]{height:85vh;max-width:80vw;object-position:center;object-fit:contain}.current-video[_ngcontent-%COMP%]{width:87vw;height:85vh;object-position:center;object-fit:contain}.close-fullscreen-button[_ngcontent-%COMP%]{color:#ff4500;position:absolute;right:30px}.close-fullscreen-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:35px;height:35px;width:35px;line-height:27px;margin-left:-6px}"],changeDetection:0});let e=n;return e})();var Le=class{constructor(n,a){this.viewContainerRef=n,this.overlay=a}createFullscreenOverlay(){let n=new Tt;n.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),n.backdropClass="backdrop-class",n.scrollStrategy=this.overlay.scrollStrategies.block(),n.hasBackdrop=!0,this.overlayRef=this.overlay.create(n);let a=new dt(Kt,this.viewContainerRef);this.overlayRef.attach(a)}closeOverlay(){this.overlayRef.dispose()}};function Wi(e,n){if(e&1){let a=S();c(0,"mat-chip-row",10),A("removed",function(){let r=T(a).$implicit,s=h();return v(s.removeTag(r))})("click",function(i){T(a);let r=h();return v(r.openEditDialog(i))}),m(1),c(2,"button",11)(3,"mat-icon"),m(4,"cancel"),l()()()}if(e&2){let a=n.$implicit;_(),N(" ",a," ")}}function ji(e,n){if(e&1){let a=S();c(0,"button",22),A("click",function(){T(a);let i=h().$implicit,r=h(3);return v(r.removeFromArchive(i))}),c(1,"mat-icon"),m(2,"unarchive"),l()()}}function Xi(e,n){if(e&1){let a=S();c(0,"bar-rating",26),A("rateChange",function(i){T(a);let r=h().$implicit,s=h().$implicit,f=h(3);return v(f.setRating(i,r,s))}),l()}if(e&2){let a=h().$implicit,t=h().$implicit,i=h(3),r;u("rate",i.returnNumRating(t,a))("max",((r=i.ratingServices.get(a))==null?null:r.max_stars)||0)}}function zi(e,n){e&1&&(c(0,"mat-icon"),m(1,"thumb_up_off_alt"),l())}function $i(e,n){e&1&&(c(0,"mat-icon"),m(1,"thumb_up"),l())}function Qi(e,n){e&1&&(c(0,"mat-icon"),m(1,"thumb_down"),l())}function Ki(e,n){if(e&1){let a=S();c(0,"button",27),A("click",function(){T(a);let i=h().$implicit,r=h().$implicit,s=h(3);return v(s.setRating(!s.returnLikeDislikeRating(r,i),i,r))}),g(1,zi,2,0,"mat-icon",28)(2,$i,2,0,"mat-icon",28)(3,Qi,2,0,"mat-icon",28),l()}if(e&2){let a=h().$implicit,t=h().$implicit,i=h(3);u("color",i.returnLikeDislikeRating(t,a)?"primary":""),_(),u("ngIf",i.returnLikeDislikeRating(t,a)===null),_(),u("ngIf",i.returnLikeDislikeRating(t,a)===!0),_(),u("ngIf",i.returnLikeDislikeRating(t,a)===!1)}}function Zi(e,n){if(e&1&&(c(0,"div",23)(1,"h3",24),m(2),l(),g(3,Xi,1,2,"bar-rating",25)(4,Ki,4,4),l()),e&2){let a=n.$implicit,t=h(4),i;_(2),y((i=t.ratingServices.get(a))==null?null:i.name),_(),x(3,t.isNumericalRatingService(t.returnService(t.ratingServices.get(a)))?3:t.isLikeRatingService(t.returnService(t.ratingServices.get(a)))?4:-1)}}var qi=e=>({border:e});function Ji(e,n){if(e&1){let a=S();c(0,"div",15)(1,"div",16)(2,"app-image-display",17),A("click",function(){let r=T(a).$implicit,s=h(3);return v(s.openFullscreenView(r))}),l(),c(3,"div",18)(4,"button",19),A("click",function(){let r=T(a).$implicit,s=h(3);return v(s.downloadFile(r))}),c(5,"mat-icon"),m(6,"download"),l()(),C(7,"div",20),g(8,ji,3,0,"button",21),l()(),c(9,"div"),P(10,Zi,5,2,"div",29,Me),l()()}if(e&2){let a=n.$implicit,t=h(3);_(),u("ngStyle",q(6,qi,t.isFileSelected(a))),_(),u("hydrusFile",a)("widthNum",t.itemWidth)("heightNum",t.itemHeight)("thumbnail",!1),_(6),x(8,t.isFilePendingArchive(a)?8:-1),_(2),B(t.ratingServices.keys())}}function en(e,n){if(e&1&&(c(0,"div",14),P(1,Ji,12,8,"div",30,Me),l()),e&2){let a=n.$implicit;_(),B(a)}}var tn=e=>({"height.px":e});function nn(e,n){if(e&1&&(c(0,"cdk-virtual-scroll-viewport",12),g(1,en,3,0,"div",13),l()),e&2){let a=h();u("itemSize",a.itemHeight)("minBufferPx",a.itemHeight*3)("maxBufferPx",a.itemHeight*5)("ngStyle",q(6,tn,a.h)),_(),u("cdkVirtualForOf",a.itemSet)("cdkVirtualForTemplateCacheSize",0)}}function on(e,n){e&1&&(c(0,"p",35),m(1," Processing Filter... "),l())}function rn(e,n){if(e&1&&g(0,on,2,0,"p",34),e&2){let a=h(2);u("ngIf",a.processing)}}function an(e,n){if(e&1&&(c(0,"div",31),C(1,"mat-progress-bar",32),g(2,rn,1,1,"p",33),l()),e&2){let a=h();_(2),x(2,a.processing?2:-1)}}function ln(e,n){if(e&1){let a=S();c(0,"div",36)(1,"div",37)(2,"p"),m(3),l(),c(4,"p"),m(5),l()(),c(6,"div",38)(7,"button",39),A("click",function(){T(a);let i=h();return v(i.submitFiles())}),m(8," Submit "),l(),c(9,"mat-checkbox",40),A("ngModelChange",function(i){T(a);let r=h();return v(r.continueFilter=i)}),m(10,"Continue Filtering"),l()()()}if(e&2){let a=h();_(3),N("Archiving: ",a.userFileChanges.archive.length,""),_(2),N("Trashing: ",a.hydrusFiles.length-a.userFileChanges.archive.length,""),_(4),u("ngModel",a.continueFilter)}}function sn(e,n){e&1&&(c(0,"h2"),m(1,"No Items Found"),l())}var Ge=(()=>{let n=class n{constructor(t,i,r,s,f,Zt,qt,Jt,ei,ti){this.fileService=t,this.apiService=i,this.viewportRuler=r,this.ngZone=s,this.changeDetectorRef=f,this.dialog=Zt,this.injectorService=ti,this.searchFormControl=new ue,this.itemSet=[],this.itemHeight=430,this.itemWidth=495,this.h=0,this.ratingValue=0,this.processing=!1,this.isNumericalRatingService=we,this.isLikeRatingService=Ue,this.isIncDecRatingService=ke,this.tags=["system:limit = 8","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!0,this.subscriptions=[],this.ratingFileChanges=[],this.noItemsInSearch=!1,this.chunkSize=1,this.userFileChanges=new yt,this.ratingServices=new Map,this.overlayUtil=new Le(Jt,ei),qt.setTitle("Archive/Delete Filter | Venus' Arch")}ngOnInit(){this.calcChunkSize(),this.viewportChangeSub=this.viewportRuler.change(200).subscribe(()=>this.ngZone.run(()=>this.generateDataChunk(this.hydrusFiles))),this.apiService.getServices().subscribe({next:t=>{this.allServices=t;for(let i in this.allServices.services){let r=this.allServices.services[i];zt(r)&&this.ratingServices.set(i,r)}}})}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.viewportChangeSub.unsubscribe()}returnService(t){return t}isFileSelected(t){return this.userFileChanges.archive.includes(t)?"8px solid #00e676":this.userFileChanges.skipped.includes(t)?"8px solid  #007ac1":"8px solid #424242"}isFilePendingArchive(t){return this.userFileChanges.archive.includes(t)}removeFromArchive(t){this.userFileChanges.archive.includes(t)&&(this.userFileChanges.archive.splice(this.userFileChanges.archive.indexOf(t),1),this.ratingValue=0,this.ratingFileChanges=this.ratingFileChanges.filter(i=>i.hash!=t.hash))}generateDataChunk(t){this.calcChunkSize();let i,r=[];for(i=0;i<t.length;i+=this.chunkSize)r.push(t.slice(i,i+this.chunkSize));this.itemSet=r}calcChunkSize(){let t=window.innerWidth;this.chunkSize=Math.floor(t/(this.itemWidth+100)),this.h=Math.ceil(this.hydrusFiles.length/this.chunkSize)*(this.itemHeight+155+145)}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}openEditDialog(t){let i=t.target.innerText;this.dialog.open(Qt,{data:{searchTerm:i}}).afterClosed().subscribe(s=>{this.removeTag(i),this.tags.push(s)})}returnNumRating(t,i){let r=this.ratingFileChanges.findIndex(s=>s.hash===t.hash&&s.rating_service_key===i);return r!=-1?this.ratingFileChanges[r].rating:0}returnLikeDislikeRating(t,i){let r=this.ratingFileChanges.findIndex(s=>s.hash===t.hash&&s.rating_service_key===i);return r!=-1?this.ratingFileChanges[r].rating:null}setRating(t,i,r){let s=this.ratingFileChanges.findIndex(f=>f.hash===r.hash&&f.rating_service_key===i);s!=-1?this.ratingFileChanges[s].rating=t:this.ratingFileChanges.push(new Pt(r.hash,i,t)),this.userFileChanges.archive.includes(r)||this.userFileChanges.archive.push(r)}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.processing=!1,this.hydrusFiles=[],this.userFileChanges.archive=[],this.userFileChanges.delete=[],this.userFileChanges.skipped=[],this.ratingFileChanges=[],this.changeDetectorRef.detectChanges(),this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:r=>{this.hydrusFiles=r,this.generateDataChunk(this.hydrusFiles),this.loading=!1,this.hydrusFiles.length==0?this.noItemsInSearch=!0:this.noItemsInSearch=!1}}))}openFullscreenView(t){this.overlayUtil.createFullscreenOverlay(),setTimeout(()=>this.injectorService.announceFullscreenOverlay(t),300),this.injectorService.overlaySourceFound$.subscribe({next:i=>{this.overlayUtil.closeOverlay()}})}downloadFile(t){this.fileService.downloadFile(t).subscribe({next:i=>{let r=document.createElement("a");document.body.appendChild(r);let s=window.URL.createObjectURL(i);r.href=s;let f=t.hash;r.download=`${f}.${t.ext}`,r.click(),window.URL.revokeObjectURL(s),r.remove(),window.open(s)}})}submitFiles(){let t=this.hydrusFiles;this.userFileChanges.delete=[],this.userFileChanges.archive.length>0&&this.userFileChanges.skipped.length>0?(this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(r=>r.file_id).includes(i.file_id)),this.userFileChanges.delete=this.userFileChanges.delete.filter(i=>!this.userFileChanges.skipped.map(r=>r.file_id).includes(i.file_id))):this.userFileChanges.archive.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(r=>r.file_id).includes(i.file_id)):this.userFileChanges.skipped.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.skipped.map(r=>r.file_id).includes(i.file_id)):this.userFileChanges.delete=t,this.updateFileStatuses(this.userFileChanges),this.injectorService.announceDatabaseUpdate({archiveNum:this.userFileChanges.archive.length,totalFileChanges:this.hydrusFiles.length})}updateFileStatuses(t){this.processing=!0,this.loading=!0;let i=t.archive.map(s=>s.file_id),r=t.delete.map(s=>s.file_id);this.scrollToTop(),this.ratingFileChanges.length>0&&this.ratingFileChanges.forEach(s=>{this.apiService.editFileRating(s).subscribe({error:f=>{console.log(f)}})}),i.length>0&&r.length>0?this.subscriptions.push(Be([this.apiService.archiveMultipleFilesById(i),this.apiService.deleteMultipleFilesById(r)]).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}})):r.length>0?this.apiService.deleteMultipleFilesById(r).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}}):i.length>0&&this.apiService.archiveMultipleFilesById(i).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}})}scrollToTop(){this.virtualScroll.scrollToIndex(0)}};n.\u0275fac=function(i){return new(i||n)(I(Ne),I(Q),I(gt),I($e),I(ne),I(Mt),I(_e),I(Ze),I(vt),I(K))},n.\u0275cmp=R({type:n,selectors:[["app-archive-delete-filter"]],viewQuery:function(i,r){if(i&1&&it(Ee,5),i&2){let s;H(s=Y())&&(r.virtualScroll=s.first)}},standalone:!0,features:[F],decls:19,vars:6,consts:[["cdkVirtualScrollingElement","",1,"main-container"],[1,"search-container"],[1,"tag-form-container"],[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],["class","virtual-container","appendOnly","",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","footer"],[3,"removed","click"],["matChipRemove","","aria-label","'remove ' + tag"],["appendOnly","",1,"virtual-container",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","files-container",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[1,"files-container"],[1,""],[3,"ngStyle"],[3,"hydrusFile","widthNum","heightNum","thumbnail","click"],[1,"image-action-container"],["mat-icon-button","",1,"download-button",3,"click"],[1,"spacer"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","warn",3,"click"],[1,"ratings-container"],[1,"rating-name"],["class","bar-rating-container",3,"rate","max"],[1,"bar-rating-container",3,"rate","max","rateChange"],["mat-mini-fab","",1,"like-dislike-button",3,"color","click"],[4,"ngIf"],["class","ratings-container"],["class",""],[1,"loading-container"],["mode","indeterminate"],["matLine","","class","processing-text"],["matLine","","class","processing-text",4,"ngIf"],["matLine","",1,"processing-text"],[1,"footer"],[1,"current-stats-container"],[1,"form-submission-container"],["mat-flat-button","","color","primary",1,"submit-button",3,"click"],[1,"continue-checkbox",3,"ngModel","ngModelChange"]],template:function(i,r){if(i&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),m(5,"Search"),l(),c(6,"mat-chip-grid",4,5),P(8,Wi,5,1,"mat-chip-row",null,oe),l(),c(10,"input",6),A("matChipInputTokenEnd",function(f){return r.addTag(f)}),l()()(),c(11,"div")(12,"button",7),A("click",function(){return r.changeSearchStatus()}),c(13,"mat-icon"),m(14),l()()()(),g(15,nn,2,8,"cdk-virtual-scroll-viewport",8)(16,an,3,1)(17,ln,11,3,"div",9)(18,sn,2,0,"h2"),l()),i&2){let s=D(7);_(6),u("formControl",r.searchFormControl),_(2),B(r.tags),_(2),u("matChipInputFor",s),_(4),y(r.startSearch?"play_arrow":"pause"),_(),x(15,r.loading?16:15),_(2),x(17,r.hydrusFiles.length>0&&!(r.processing||r.loading)?17:-1),_(),x(18,r.noItemsInSearch?18:-1)}},dependencies:[O,b,ce,M,z,de,Rt,$,Ie,kt,w,Et,Vt,Ce,Te,Ae,fe,It,At,Ee,ft,Re,U,X,me,he,pe,$t,Oe,Ct],styles:[".main-container[_ngcontent-%COMP%]{height:92vh}.tag-form-field[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{display:flex}.tag-form-container[_ngcontent-%COMP%]{flex:1;margin-right:5px}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px;margin-right:15px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:45px}.files-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;margin-bottom:25px}.image-container[_ngcontent-%COMP%]{display:block}.footer[_ngcontent-%COMP%]{margin-top:10px;min-height:55px}.current-stats-container[_ngcontent-%COMP%]{margin:10px}.image-action-container[_ngcontent-%COMP%]{background-color:#424242;display:flex;min-height:30px;margin:2px}.ratings-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:3px}.rating-name[_ngcontent-%COMP%]{font-size:18px;margin-top:3px;font-variant:small-caps;font-weight:500}.bar-rating-container[_ngcontent-%COMP%]{margin-top:5px}.virtual-container[_ngcontent-%COMP%]{margin-top:15px;width:100%;height:100%;flex-grow:1}.download-button[_ngcontent-%COMP%]{color:#2979ff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.processing-text[_ngcontent-%COMP%]{text-align:center;margin-top:25px;font-size:25px}"]});let e=n;return e})();var ko=[{path:"",component:Ht,children:[{path:"",component:Ge},{path:"search",component:Xt},{path:"archive-delete-filter",component:Ge}]}];export{ko as HOME_ROUTES};
