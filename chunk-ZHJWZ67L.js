import{$ as oe,A as ze,Ab as Ae,B as Qe,Bb as M,C as $e,Ca as _t,Cb as Vt,D as I,Da as ut,Db as yt,E as w,Ea as mt,Eb as $,F as Se,Fa as pt,G as ie,Ga as ce,H as P,Ha as ht,I as B,Ia as Et,J as c,Ja as dt,K as l,Ka as It,L as C,La as gt,M as Ke,Ma as X,N as Ze,Na as At,O as L,Oa as _e,P as A,Pa as ft,Q as h,Qa as Ct,R as x,Ra as Tt,S as p,Sa as vt,T as y,U as S,Ua as z,V as qe,W as F,Wa as ue,X as Fe,Xa as me,Y as Me,Z as Je,Za as pe,_ as ne,a as ke,aa as re,b as Ge,ba as H,c as q,ca as et,cb as U,d as Ve,da as ae,db as he,e as Oe,ea as Y,eb as Rt,f as ye,fa as W,fb as Ee,g as Pe,ga as j,h as Le,ha as D,i as J,ia as tt,ib as Q,j as Be,ja as it,jb as Nt,k as He,ka as nt,kb as Ot,l as R,la as le,lb as Lt,m as Ye,ma as ot,mb as St,n as ee,na as rt,nb as Ft,o as We,oa as N,ob as Mt,p as je,pb as xt,q as T,qb as Dt,r as v,ra as se,rb as bt,s as K,sb as b,t as _,ta as at,tb as wt,u as g,ub as Ut,v as te,va as lt,vb as kt,w as V,wa as st,wb as Gt,x as Xe,xb as de,yb as Ie,z as u,za as ct,zb as ge}from"./chunk-RPGEHT5G.js";function ii(e,i){if(e&1&&(c(0,"a",5,6),p(2),l()),e&2){let a=i.$implicit;u("routerLink",a.path),_(2),S(" ",a.label," ")}}function ni(e,i){if(e&1&&(c(0,"div",7)(1,"div",8)(2,"mat-icon"),p(3,"lock_clock"),l(),p(4),ne(5,"date"),l(),c(6,"div",9)(7,"mat-icon"),p(8,"mail"),l(),p(9),l(),c(10,"div",10)(11,"mat-icon"),p(12,"archive"),l(),p(13),l()()),e&2){let a=h();_(4),S(" ",oe(5,3,a.lastUpdated,"short")," "),_(5),S(" ",a.dbStats.boned_stats.num_inbox," "),_(4),S(" ",a.dbStats.boned_stats.num_archive," ")}}var Bt=(()=>{let i=class i{constructor(t){this.apiService=t,this.navLinks=[{path:"search",label:"Search"},{path:"archive-delete-filter",label:"Archive/Delete"}],this.lastUpdated=new Date}ngOnInit(){this.apiService.howBoned().subscribe({next:t=>{this.dbStats=t}})}};i.\u0275fac=function(n){return new(n||i)(g($))},i.\u0275cmp=R({type:i,selectors:[["app-home-page"]],standalone:!0,features:[F],decls:6,vars:2,consts:[[1,"toolbar-container"],[1,"toolbar-links"],["mat-list-item","","routerLinkActive","","class","nav-links",3,"routerLink",4,"ngFor","ngForOf"],[1,"toolbar-spacer"],["class","stats-container",4,"ngIf"],["mat-list-item","","routerLinkActive","",1,"nav-links",3,"routerLink"],["rla","routerLinkActive"],[1,"stats-container"],["matTooltip","Last Updated"],["matTooltip","Inbox"],["matTooltip","Archive"]],template:function(n,r){n&1&&(c(0,"mat-toolbar",0)(1,"div",1),I(2,ii,3,2,"a",2),l(),C(3,"span",3),I(4,ni,14,6,"div",4),l(),C(5,"router-outlet")),n&2&&(_(2),u("ngForOf",r.navLinks),_(2),u("ngIf",r.dbStats))},dependencies:[N,j,D,rt,at,M,Rt,kt,b,wt,ct,lt,st],styles:[".nav-links[_ngcontent-%COMP%]{font-size:31px;text-decoration:none}.nav-links[_ngcontent-%COMP%], .toolbar-icons[_ngcontent-%COMP%], .span-text[_ngcontent-%COMP%]{color:#f5f5f5}.toolbar-links[_ngcontent-%COMP%]{display:flex;gap:25%}.toolbar-container[_ngcontent-%COMP%]{background-color:#1565c0;padding-right:20px;padding-left:20px;border-bottom:whitesmoke 1px solid}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.stats-container[_ngcontent-%COMP%]{display:flex;gap:5px}.user-avatar[_ngcontent-%COMP%]{border-radius:50%}"]});let e=i;return e})();function oi(e,i){e&1&&(c(0,"mat-icon"),p(1,"videocam"),l())}function ri(e,i){e&1&&(c(0,"mat-icon"),p(1,"volume_up"),l())}function ai(e,i){e&1&&(c(0,"mat-icon"),p(1," mail"),l())}function li(e,i){e&1&&(c(0,"mat-icon"),p(1," archive"),l())}function si(e,i){e&1&&(c(0,"mat-icon"),p(1," delete"),l())}function ci(e,i){if(e&1&&p(0),e&2){let a=h(2);S(" ",a.hydrusFile.ext," ")}}var _i=(e,i,a)=>({background:e,"height.px":i,"width.px":a,"background-size":"contain"});function ui(e,i){if(e&1&&C(0,"div",4),e&2){let a=h(2);u("ngStyle",Je(1,_i,"url("+a.hydrusFile.thumbnail_url+") no-repeat center center",a.heightNum,a.widthNum?a.widthNum:a.heightNum))}}var mi=(e,i)=>({"height.px":e,"width.px":i});function pi(e,i){if(e&1&&C(0,"img",5),e&2){let a=h(2);u("src",a.hydrusFile.file_url,K)("ngStyle",Me(2,mi,a.heightNum,a.widthNum?a.widthNum:a.heightNum))}}var hi=(e,i)=>({"height.px":e,"width.px":i,"background-size":"contain"});function Ei(e,i){if(e&1&&(c(0,"div",1)(1,"mat-card",2)(2,"div"),I(3,oi,2,0,"mat-icon",3)(4,ri,2,0,"mat-icon",3)(5,ai,2,0,"mat-icon",3)(6,li,2,0,"mat-icon",3)(7,si,2,0,"mat-icon",3),l(),I(8,ci,1,1)(9,ui,1,5,"div",4)(10,pi,1,5),l()()),e&2){let a=h();_(),u("ngStyle",Me(8,hi,a.heightNum+70,a.widthNum+50)),_(2),u("ngIf",a.hydrusFile.has_audio),_(),u("ngIf",a.hydrusFile.has_audio),_(),u("ngIf",a.hydrusFile.is_inbox),_(),u("ngIf",!a.hydrusFile.is_inbox),_(),u("ngIf",a.hydrusFile.is_trashed),_(),w(8,a.fileType==="other"?8:-1),_(),w(9,a.thumbnail||a.fileType==="video"||a.fileType==="gif"?9:10)}}var Ce=(()=>{let i=class i{constructor(){this.fileType="",this.heightNum=0,this.widthNum=0}ngOnInit(){this.hydrusFile.mime.includes("video")?this.fileType="video":this.hydrusFile.mime.includes("gif")?this.fileType="gif":this.hydrusFile.mime.includes("image")?this.fileType="image":this.fileType="other"}isPlayable(t){return!!(t.mime.includes("video")||t.mime.includes("gif"))}};i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=R({type:i,selectors:[["app-image-display"]],inputs:{hydrusFile:"hydrusFile",heightNum:"heightNum",widthNum:"widthNum",thumbnail:"thumbnail"},standalone:!0,features:[F],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],["id","image-container",3,"ngStyle"],[4,"ngIf"],["fxLayoutAlign","center center",3,"ngStyle"],[1,"image-thumbnail",3,"src","ngStyle"]],template:function(n,r){n&1&&I(0,Ei,11,11,"div",0),n&2&&u("ngIf",r.hydrusFile)},dependencies:[N,D,le,M,ft,b],styles:[".image-thumbnail[_ngcontent-%COMP%]{object-fit:contain;width:95%;height:95%;animation:fadeIn ease .5s}.file-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-align:center;font-variant:small-caps;font-weight:700;font-size:20px;margin:0;width:85%}#image-container[_ngcontent-%COMP%]{padding:0;box-shadow:unset!important;border-radius:unset!important}.video[_ngcontent-%COMP%]{object-fit:fill}.video-play-button[_ngcontent-%COMP%]{opacity:.75}"],changeDetection:0});let e=i;return e})();var Te=(()=>{let i=class i{constructor(t){this.apiService=t}getFileWithMetadataFromSearch(t,n,r){return this.apiService.getFilesSearch(t,n,r).pipe(Pe(s=>this.getThumbnailAndMetadata(s.file_ids)))}getThumbnailAndMetadata(t){return t.length===0?Ve([]):this.apiService.getFileMetadata(t).pipe(Oe(n=>n.metadata.map(r=>Ge(ke({},r),{thumbnail_url:this.apiService.getThumbnailURLFromHash(r.hash),file_url:this.apiService.getFileURLFromHash(r.hash)}))))}downloadFile(t){return this.apiService.getFileAsBlob(t.hash).pipe(Oe(n=>new File([n],t.hash+t.ext)))}};i.\u0275fac=function(n){return new(n||i)(He($))},i.\u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function gi(e,i){if(e&1){let a=L();c(0,"mat-chip-row",7),A("removed",function(){let r=T(a).$implicit,s=h();return v(s.removeTag(r))}),p(1),c(2,"button",8)(3,"mat-icon"),p(4,"cancel"),l()()()}if(e&2){let a=i.$implicit;_(),S(" ",a," ")}}function Ai(e,i){if(e&1&&(c(0,"div"),C(1,"app-image-display",9),l()),e&2){let a=i.$implicit;_(),u("hydrusFile",a)("widthNum",365)("heightNum",330)("thumbnail",!0)}}var jt=(()=>{let i=class i{constructor(t,n){this.fileService=t,this.searchFormControl=new ue,this.tags=["system:limit = 5","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,n.setTitle("Search | Venus' Arch")}removeTag(t){let n=this.tags.indexOf(t);n>=0&&this.tags.splice(n,1)}addTag(t){let n=(t.value||"").trim();n&&this.tags.push(n),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}searchFiles(){let t=!0,n=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.fileService.getFileWithMetadataFromSearch(this.tags,n.toString(),t.toString()).subscribe({next:r=>{this.hydrusFiles=r,console.log(this.hydrusFiles),this.loading=!1}}))}};i.\u0275fac=function(n){return new(n||i)(g(Te),g(se))},i.\u0275cmp=R({type:i,selectors:[["app-search"]],standalone:!0,features:[F],decls:15,vars:4,consts:[[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],[1,"image-container"],[4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","","aria-label","'remove ' + tag"],[3,"hydrusFile","widthNum","heightNum","thumbnail"]],template:function(n,r){if(n&1&&(c(0,"div")(1,"mat-form-field",0)(2,"mat-label"),p(3,"Search"),l(),c(4,"mat-chip-grid",1,2),P(6,gi,5,1,"mat-chip-row",null,ie),l(),c(8,"input",3),A("matChipInputTokenEnd",function(f){return r.addTag(f)}),l()()(),c(9,"div")(10,"button",4),A("click",function(){return r.changeSearchStatus()}),c(11,"mat-icon"),p(12),l()()(),c(13,"div",5),I(14,Ai,2,4,"div",6),l()),n&2){let s=x(5);_(4),u("formControl",r.searchFormControl),_(2),B(r.tags),_(2),u("matChipInputFor",s),_(4),y(r.startSearch?"play_arrow":"pause"),_(2),u("ngForOf",r.hydrusFiles)}},dependencies:[N,j,M,X,Q,Ee,b,ge,Ae,de,Ie,U,z,he,pe,Ce],styles:[".tag-form-field[_ngcontent-%COMP%]{width:100%}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:35px}.image-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;gap:25px}"]});let e=i;return e})();var d=function(e){return e[e.TAG_REPOSITORY=0]="TAG_REPOSITORY",e[e.FILE_REPOSITORY=1]="FILE_REPOSITORY",e[e.LOCAL_FILE_DOMAIN=2]="LOCAL_FILE_DOMAIN",e[e.MESSAGE_DEPOT=3]="MESSAGE_DEPOT",e[e.LOCAL_TAG=5]="LOCAL_TAG",e[e.LOCAL_RATING_NUMERICAL=6]="LOCAL_RATING_NUMERICAL",e[e.LOCAL_RATING_LIKE=7]="LOCAL_RATING_LIKE",e[e.RATING_NUMERICAL_REPOSITORY=8]="RATING_NUMERICAL_REPOSITORY",e[e.RATING_LIKE_REPOSITORY=9]="RATING_LIKE_REPOSITORY",e[e.COMBINED_TAG=10]="COMBINED_TAG",e[e.COMBINED_FILE=11]="COMBINED_FILE",e[e.LOCAL_BOORU=12]="LOCAL_BOORU",e[e.IPFS=13]="IPFS",e[e.LOCAL_FILE_TRASH_DOMAIN=14]="LOCAL_FILE_TRASH_DOMAIN",e[e.COMBINED_LOCAL_FILE=15]="COMBINED_LOCAL_FILE",e[e.TEST_SERVICE=16]="TEST_SERVICE",e[e.LOCAL_NOTES=17]="LOCAL_NOTES",e[e.CLIENT_API_SERVICE=18]="CLIENT_API_SERVICE",e[e.COMBINED_DELETED_FILE=19]="COMBINED_DELETED_FILE",e[e.LOCAL_FILE_UPDATE_DOMAIN=20]="LOCAL_FILE_UPDATE_DOMAIN",e[e.COMBINED_LOCAL_MEDIA=21]="COMBINED_LOCAL_MEDIA",e[e.LOCAL_RATING_INCDEC=22]="LOCAL_RATING_INCDEC",e[e.SERVER_ADMIN=99]="SERVER_ADMIN",e[e.NULL_SERVICE=100]="NULL_SERVICE",e}(d||{}),On={[d.TAG_REPOSITORY]:"hydrus tag repository",[d.FILE_REPOSITORY]:"hydrus file repository",[d.LOCAL_FILE_DOMAIN]:"local file domain",[d.LOCAL_FILE_TRASH_DOMAIN]:"local trash file domain",[d.LOCAL_FILE_UPDATE_DOMAIN]:"local update file domain",[d.COMBINED_LOCAL_FILE]:"virtual combined local file service",[d.COMBINED_LOCAL_MEDIA]:"virtual combined local media service",[d.MESSAGE_DEPOT]:"hydrus message depot",[d.LOCAL_TAG]:"local tag service",[d.LOCAL_RATING_NUMERICAL]:"local numerical rating service",[d.LOCAL_RATING_LIKE]:"local like/dislike rating service",[d.LOCAL_RATING_INCDEC]:"local inc/dec rating service",[d.RATING_NUMERICAL_REPOSITORY]:"hydrus numerical rating repository",[d.RATING_LIKE_REPOSITORY]:"hydrus like/dislike rating repository",[d.COMBINED_TAG]:"virtual combined tag service",[d.COMBINED_FILE]:"virtual combined file service",[d.LOCAL_BOORU]:"client local booru",[d.CLIENT_API_SERVICE]:"client api",[d.IPFS]:"ipfs daemon",[d.TEST_SERVICE]:"test service",[d.LOCAL_NOTES]:"local file notes service",[d.SERVER_ADMIN]:"hydrus server administration service",[d.COMBINED_DELETED_FILE]:"virtual deleted file service",[d.NULL_SERVICE]:"null service"};var o=function(e){return e[e.EVERYTHING=1]="EVERYTHING",e[e.INBOX=2]="INBOX",e[e.ARCHIVE=3]="ARCHIVE",e[e.HAS_DURATION=4]="HAS_DURATION",e[e.NO_DURATION=5]="NO_DURATION",e[e.BEST_QUALITY_OF_GROUP=6]="BEST_QUALITY_OF_GROUP",e[e.NOT_BEST_QUALITY_OF_GROUP=7]="NOT_BEST_QUALITY_OF_GROUP",e[e.HAS_AUDIO=8]="HAS_AUDIO",e[e.NO_AUDIO=9]="NO_AUDIO",e[e.HAS_TRANSPARENCY=10]="HAS_TRANSPARENCY",e[e.NO_TRANSPARENCY=11]="NO_TRANSPARENCY",e[e.HAS_EXIF=12]="HAS_EXIF",e[e.NO_EXIF=13]="NO_EXIF",e[e.HAS_HUMAN_READABLE_EMBEDDED_METADATA=14]="HAS_HUMAN_READABLE_EMBEDDED_METADATA",e[e.NO_HUMAN_READABLE_EMBEDDED_METADATA=15]="NO_HUMAN_READABLE_EMBEDDED_METADATA",e[e.HAS_ICC_PROFILE=16]="HAS_ICC_PROFILE",e[e.NO_ICC_PROFILE=17]="NO_ICC_PROFILE",e[e.HAS_FORCED_FILETYPE=18]="HAS_FORCED_FILETYPE",e[e.NO_FORCED_FILETYPE=19]="NO_FORCED_FILETYPE",e[e.HAS_TAGS=20]="HAS_TAGS",e[e.UNTAGGED=21]="UNTAGGED",e[e.NUM_OF_TAGS=22]="NUM_OF_TAGS",e[e.NUM_OF_TAGS_WITH_NAMESPACE=23]="NUM_OF_TAGS_WITH_NAMESPACE",e[e.NUM_OF_WORDS=24]="NUM_OF_WORDS",e[e.HEIGHT=25]="HEIGHT",e[e.WIDTH=26]="WIDTH",e[e.FILESIZE=27]="FILESIZE",e[e.SIMILAR_TO=28]="SIMILAR_TO",e[e.LIMIT=29]="LIMIT",e[e.FILETYPE=30]="FILETYPE",e[e.HASH=31]="HASH",e[e.MOD_DATE=32]="MOD_DATE",e[e.ARCHIVED_DATE=33]="ARCHIVED_DATE",e[e.LAST_VIEWED_TIME=34]="LAST_VIEWED_TIME",e[e.TIME_IMPORTED=35]="TIME_IMPORTED",e[e.DURATION=36]="DURATION",e[e.FILE_SERVICE=37]="FILE_SERVICE",e[e.NUM_FILE_RELS=38]="NUM_FILE_RELS",e[e.RATIO=39]="RATIO",e[e.NUM_PIXELS=40]="NUM_PIXELS",e[e.MEDIA_VIEWS=41]="MEDIA_VIEWS",e[e.PREVIEW_VIEWS=42]="PREVIEW_VIEWS",e[e.ALL_VIEWS=43]="ALL_VIEWS",e[e.MEDIA_VIEWTIME=44]="MEDIA_VIEWTIME",e[e.PREVIEW_VIEWTIME=45]="PREVIEW_VIEWTIME",e[e.ALL_VIEWTIME=46]="ALL_VIEWTIME",e[e.URL_REGEX=47]="URL_REGEX",e[e.NO_URL_REGEX=48]="NO_URL_REGEX",e[e.URL=49]="URL",e[e.NO_URL=50]="NO_URL",e[e.DOMAIN=51]="DOMAIN",e[e.NO_DOMAIN=52]="NO_DOMAIN",e[e.URL_CLASS=53]="URL_CLASS",e[e.NO_URL_CLASS=54]="NO_URL_CLASS",e[e.TAG_AS_NUMBER=55]="TAG_AS_NUMBER",e[e.HAS_NOTES=56]="HAS_NOTES",e[e.NO_NOTES=57]="NO_NOTES",e[e.NUM_NOTES=58]="NUM_NOTES",e[e.HAS_NOTE_NAME=59]="HAS_NOTE_NAME",e[e.NO_NOTE_NAME=60]="NO_NOTE_NAME",e[e.RATING_SPECIFIC_NUMERICAL=61]="RATING_SPECIFIC_NUMERICAL",e[e.RATING_SPECIFIC_LIKE_DISLIKE=62]="RATING_SPECIFIC_LIKE_DISLIKE",e[e.RATING_SPECIFIC_INCDEC=63]="RATING_SPECIFIC_INCDEC",e[e.HAS_RATING=64]="HAS_RATING",e[e.NO_RATING=65]="NO_RATING",e[e.RATING_GENERAL=66]="RATING_GENERAL",e}(o||{}),m=function(e){return e[e.RELATIONAL=1]="RELATIONAL",e[e.RELATIONAL_EXACT=2]="RELATIONAL_EXACT",e[e.RELATIONAL_TIME=3]="RELATIONAL_TIME",e[e.RELATIONAL_FOR_RATING_SERVICE=4]="RELATIONAL_FOR_RATING_SERVICE",e[e.EQUAL=5]="EQUAL",e[e.FILESERVICE_STATUS=6]="FILESERVICE_STATUS",e[e.TAG_RELATIONAL=7]="TAG_RELATIONAL",e[e.ONLY_EQUAL=8]="ONLY_EQUAL",e[e.RATIO_OPERATORS=9]="RATIO_OPERATORS",e}(m||{}),E=function(e){return e[e.NATURAL=1]="NATURAL",e[e.HASHLIST_WITH_DISTANCE=2]="HASHLIST_WITH_DISTANCE",e[e.HASHLIST_WITH_ALGORITHM=3]="HASHLIST_WITH_ALGORITHM",e[e.FILETYPE_LIST=4]="FILETYPE_LIST",e[e.DATE_OR_TIME_INTERVAL=5]="DATE_OR_TIME_INTERVAL",e[e.TIME_SEC_MSEC=6]="TIME_SEC_MSEC",e[e.ANY_STRING=7]="ANY_STRING",e[e.TIME_INTERVAL=8]="TIME_INTERVAL",e[e.INTEGER=9]="INTEGER",e[e.RATIO=10]="RATIO",e[e.RATIO_SPECIAL=11]="RATIO_SPECIAL",e[e.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE=12]="RATING_SERVICE_NAME_AND_NUMERICAL_VALUE",e[e.RATING_SERVICE_NAME_AND_LIKE_DISLIKE=13]="RATING_SERVICE_NAME_AND_LIKE_DISLIKE",e[e.RATING_SERVICE_NAME_AND_INCDEC=14]="RATING_SERVICE_NAME_AND_INCDEC",e[e.RATING_SERVICE_GENERIC=15]="RATING_SERVICE_GENERIC",e[e.SERVICE_NAME=16]="SERVICE_NAME",e[e.NAMESPACE_AND_NUM_TAGS=17]="NAMESPACE_AND_NUM_TAGS",e}(E||{}),O=function(e){return e[e.FILESIZE=1]="FILESIZE",e[e.FILE_RELATIONSHIP_TYPE=2]="FILE_RELATIONSHIP_TYPE",e[e.PIXELS_OR_NONE=3]="PIXELS_OR_NONE",e[e.PIXELS=4]="PIXELS",e}(O||{}),Sn={[o.EVERYTHING]:{name:"everything",operator:null,value:null,units:null},[o.INBOX]:{name:"inbox",operator:null,value:null,units:null},[o.ARCHIVE]:{name:"archive",operator:null,value:null,units:null},[o.HAS_DURATION]:{name:"has duration",operator:null,value:null,units:null},[o.NO_DURATION]:{name:"no duration",operator:null,value:null,units:null},[o.BEST_QUALITY_OF_GROUP]:{name:"is the best quality file of its duplicate group",operator:null,value:null,units:null},[o.NOT_BEST_QUALITY_OF_GROUP]:{name:"is not the best quality file of its duplicate group",operator:null,value:null,units:null},[o.HAS_AUDIO]:{name:"has audio",operator:null,value:null,units:null},[o.NO_AUDIO]:{name:"no audio",operator:null,value:null,units:null},[o.HAS_TRANSPARENCY]:{name:"has transparency",operator:null,value:null,units:null},[o.NO_TRANSPARENCY]:{name:"no transparency",operator:null,value:null,units:null},[o.HAS_EXIF]:{name:"has exif",operator:null,value:null,units:null},[o.NO_EXIF]:{name:"no exif",operator:null,value:null,units:null},[o.HAS_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"has embedded metadata",operator:null,value:null,units:null},[o.NO_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"no embedded metadata",operator:null,value:null,units:null},[o.HAS_ICC_PROFILE]:{name:"has icc profile",operator:null,value:null,units:null},[o.NO_ICC_PROFILE]:{name:"no icc profile",operator:null,value:null,units:null},[o.HAS_FORCED_FILETYPE]:{name:"has forced filetype",operator:null,value:null,units:null},[o.NO_FORCED_FILETYPE]:{name:"no forced filetype",operator:null,value:null,units:null},[o.HAS_TAGS]:{name:"has tags",operator:null,value:null,units:null},[o.UNTAGGED]:{name:"untagged",operator:null,value:null,units:null},[o.NUM_OF_TAGS]:{name:"number of tags",operator:m.RELATIONAL,value:E.NATURAL,units:null},[o.NUM_OF_TAGS_WITH_NAMESPACE]:{name:"number of tags with namespace",operator:null,value:E.NAMESPACE_AND_NUM_TAGS,units:null},[o.NUM_OF_WORDS]:{name:"number of words",operator:m.RELATIONAL,value:E.NATURAL,units:null},[o.HEIGHT]:{name:"height",operator:m.RELATIONAL,value:E.NATURAL,units:O.PIXELS_OR_NONE},[o.WIDTH]:{name:"width",operator:m.RELATIONAL,value:E.NATURAL,units:O.PIXELS_OR_NONE},[o.FILESIZE]:{name:"filesize",operator:m.RELATIONAL,value:E.NATURAL,units:O.FILESIZE},[o.SIMILAR_TO]:{name:"similar to",operator:null,value:E.HASHLIST_WITH_DISTANCE,units:null},[o.LIMIT]:{name:"limit",operator:m.ONLY_EQUAL,value:E.NATURAL,units:null},[o.FILETYPE]:{name:"filetype",operator:m.ONLY_EQUAL,value:E.FILETYPE_LIST,units:null},[o.HASH]:{name:"hash",operator:m.EQUAL,value:E.HASHLIST_WITH_ALGORITHM,units:null},[o.ARCHIVED_DATE]:{name:"archived time",operator:m.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.MOD_DATE]:{name:"modified date",operator:m.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.LAST_VIEWED_TIME]:{name:"last viewed time",operator:m.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.TIME_IMPORTED]:{name:"import time",operator:m.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[o.DURATION]:{name:"duration",operator:m.RELATIONAL,value:E.TIME_SEC_MSEC,units:null},[o.FILE_SERVICE]:{name:"file service",operator:m.FILESERVICE_STATUS,value:E.SERVICE_NAME,units:null},[o.NUM_FILE_RELS]:{name:"number of file relationships",operator:m.RELATIONAL,value:E.NATURAL,units:O.FILE_RELATIONSHIP_TYPE},[o.RATIO]:{name:"ratio",operator:m.RATIO_OPERATORS,value:E.RATIO,units:null},[o.NUM_PIXELS]:{name:"num pixels",operator:m.RELATIONAL,value:E.NATURAL,units:O.PIXELS},[o.MEDIA_VIEWS]:{name:"media views",operator:m.RELATIONAL,value:E.NATURAL,units:null},[o.PREVIEW_VIEWS]:{name:"preview views",operator:m.RELATIONAL,value:E.NATURAL,units:null},[o.ALL_VIEWS]:{name:"all views",operator:m.RELATIONAL,value:E.NATURAL,units:null},[o.MEDIA_VIEWTIME]:{name:"media viewtime",operator:m.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.PREVIEW_VIEWTIME]:{name:"preview viewtime",operator:m.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.ALL_VIEWTIME]:{name:"all viewtime",operator:m.RELATIONAL,value:E.TIME_INTERVAL,units:null},[o.URL_REGEX]:{name:"has a url matching regex",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL_REGEX]:{name:"does not have a url matching regex",operator:null,value:E.ANY_STRING,units:null},[o.URL]:{name:"has url",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL]:{name:"does not have url",operator:null,value:E.ANY_STRING,units:null},[o.DOMAIN]:{name:"has a url with domain",operator:null,value:E.ANY_STRING,units:null},[o.NO_DOMAIN]:{name:"does not have a url with domain",operator:null,value:E.ANY_STRING,units:null},[o.URL_CLASS]:{name:"has a url with url class",operator:null,value:E.ANY_STRING,units:null},[o.NO_URL_CLASS]:{name:"does not have a url with url class",operator:null,value:E.ANY_STRING,units:null},[o.TAG_AS_NUMBER]:{name:"tag as number",operator:m.TAG_RELATIONAL,value:E.INTEGER,units:null},[o.HAS_NOTES]:{name:"has notes",operator:null,value:null,units:null},[o.NO_NOTES]:{name:"no notes",operator:null,value:null,units:null},[o.NUM_NOTES]:{name:"number of notes",operator:m.RELATIONAL_EXACT,value:E.NATURAL,units:null},[o.HAS_NOTE_NAME]:{name:"note with name",operator:null,value:E.ANY_STRING,units:null},[o.NO_NOTE_NAME]:{name:"does not have note with name",operator:null,value:E.ANY_STRING,units:null},[o.HAS_RATING]:{name:"has rating for",operator:null,value:E.SERVICE_NAME,units:null},[o.NO_RATING]:{name:"no rating for",operator:null,value:E.SERVICE_NAME,units:null},[o.RATING_SPECIFIC_NUMERICAL]:{name:"rating for",operator:m.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE,units:null},[o.RATING_SPECIFIC_LIKE_DISLIKE]:{name:"rating for",operator:m.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_LIKE_DISLIKE,units:null},[o.RATING_SPECIFIC_INCDEC]:{name:"rating for",operator:m.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_INCDEC,units:null},[o.RATING_GENERAL]:{name:"rating",operator:m.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_GENERIC,units:null}},Fn={[m.RELATIONAL]:["<","\u2248","=","\u2260",">"],[m.RELATIONAL_EXACT]:["<","=",">"],[m.RELATIONAL_TIME]:["before","\u2248","=","\u2260","since"],[m.RELATIONAL_FOR_RATING_SERVICE]:["<","\u2248","=",">"],[m.EQUAL]:["is","is not"],[m.FILESERVICE_STATUS]:["is currently in","is not currently in","is pending to","is not pending to"],[m.TAG_RELATIONAL]:["<","\u2248","=","\u2260",">"],[m.ONLY_EQUAL]:["is"],[m.RATIO_OPERATORS]:["=","wider than","taller than","\u2248","\u2260"]},Mn={[m.RELATIONAL]:"=",[m.RELATIONAL_EXACT]:"=",[m.RELATIONAL_TIME]:"=",[m.RELATIONAL_FOR_RATING_SERVICE]:"",[m.EQUAL]:"is",[m.FILESERVICE_STATUS]:"is currently in",[m.TAG_RELATIONAL]:"=",[m.ONLY_EQUAL]:"is",[m.RATIO_OPERATORS]:"="},xn={[O.FILESIZE]:["B","KB","MB","GB"],[O.FILE_RELATIONSHIP_TYPE]:["duplicates","alternates","not related","potential duplicates"],[O.PIXELS_OR_NONE]:["pixels"],[O.PIXELS]:["pixels","kilopixels","megapixels"]},Dn={[O.FILESIZE]:"KB",[O.FILE_RELATIONSHIP_TYPE]:"duplicates",[O.PIXELS_OR_NONE]:"pixels",[O.PIXELS]:"megapixels"};var bn={[o.FILE_SERVICE]:"File service",[o.URL_REGEX]:"URL Regex",[o.NO_URL_REGEX]:"URL Regex",[o.URL]:"URL",[o.NO_URL]:"URL",[o.DOMAIN]:"Domain",[o.NO_DOMAIN]:"Domain",[o.URL_CLASS]:"URL Class",[o.NO_URL_CLASS]:"Url Class",[o.HAS_NOTE_NAME]:"Note Name",[o.NO_NOTE_NAME]:"Note Name"},wn=[{predicate:o.EVERYTHING},{predicate:o.INBOX},{predicate:o.ARCHIVE},{name:"dimensions",predicates:[o.HEIGHT,o.WIDTH,o.RATIO,o.NUM_PIXELS]},{name:"duration",predicates:[o.HAS_DURATION,o.NO_DURATION,o.DURATION]},{name:"file properties",predicates:[o.HAS_AUDIO,o.NO_AUDIO,o.HAS_TRANSPARENCY,o.NO_TRANSPARENCY,o.HAS_EXIF,o.NO_EXIF,o.HAS_HUMAN_READABLE_EMBEDDED_METADATA,o.NO_HUMAN_READABLE_EMBEDDED_METADATA,o.HAS_ICC_PROFILE,o.NO_ICC_PROFILE,o.HAS_FORCED_FILETYPE,o.NO_FORCED_FILETYPE]},{name:"file relationships",predicates:[o.NOT_BEST_QUALITY_OF_GROUP,o.BEST_QUALITY_OF_GROUP,o.NUM_FILE_RELS]},{predicate:o.FILE_SERVICE},{name:"file viewing statistics",predicates:[o.ALL_VIEWS,o.MEDIA_VIEWS,o.PREVIEW_VIEWS,o.ALL_VIEWTIME,o.MEDIA_VIEWTIME,o.PREVIEW_VIEWTIME]},{predicate:o.FILESIZE},{predicate:o.FILETYPE},{predicate:o.HASH},{name:"known url",predicates:[o.URL,o.NO_URL,o.DOMAIN,o.NO_DOMAIN,o.URL_REGEX,o.NO_URL_REGEX,o.URL_CLASS,o.NO_URL_CLASS]},{predicate:o.LIMIT},{name:"notes",predicates:[o.HAS_NOTES,o.NO_NOTES,o.NUM_NOTES,o.HAS_NOTE_NAME,o.NO_NOTE_NAME]},{name:"number of tags",predicates:[o.HAS_TAGS,o.UNTAGGED,o.NUM_OF_TAGS]},{predicate:o.NUM_OF_WORDS},{predicate:o.SIMILAR_TO},{predicate:o.TAG_AS_NUMBER},{name:"time",predicates:[o.TIME_IMPORTED,o.MOD_DATE,o.LAST_VIEWED_TIME,o.ARCHIVED_DATE]},{name:"rating",predicates:[o.HAS_RATING,o.NO_RATING,o.RATING_GENERAL]}],Un={[o.RATING_SPECIFIC_NUMERICAL]:["more than","less than","is","is about"],[o.RATING_SPECIFIC_LIKE_DISLIKE]:["is"],[o.RATING_SPECIFIC_INCDEC]:["more than","less than","is","is about"]};function De(e){return e.type===d.LOCAL_RATING_NUMERICAL||e.type===d.RATING_NUMERICAL_REPOSITORY}function be(e){return e.type===d.LOCAL_RATING_LIKE||e.type===d.RATING_LIKE_REPOSITORY}function we(e){return e.type===d.LOCAL_RATING_INCDEC}function Xt(e){return we(e)||be(e)||De(e)}function fi(e,i){}function Ci(e,i){if(e&1&&I(0,fi,0,0,"ng-template",10),e&2){let a=h(2),t=x(5);u("ngTemplateOutlet",(a.customFractionRating==null?null:a.customFractionRating.template)||t)}}function Ti(e,i){}function vi(e,i){if(e&1&&I(0,Ti,0,0,"ng-template",10),e&2){let a=h(2),t=x(9);u("ngTemplateOutlet",(a.customInActiveRating==null?null:a.customInActiveRating.template)||t)}}function Ri(e,i){}function Ni(e,i){if(e&1&&I(0,Ri,0,0,"ng-template",10),e&2){let a=h(2),t=x(7);u("ngTemplateOutlet",(a.customActiveRating==null?null:a.customActiveRating.template)||t)}}function Oi(e,i){if(e&1){let a=L();c(0,"div",6),A("click",function(n){let s=T(a).$implicit;return v(s.click(n))})("mouseenter",function(){let r=T(a).$implicit;return v(r.enter())}),Ke(1,7),I(2,Ci,1,1,null,8)(3,vi,1,1,null,8)(4,Ni,1,1,null,9),Ze(),l()}if(e&2){let a=i.$implicit,t=h();_(),u("ngSwitch",a.state),_(),u("ngSwitchCase",t.unitState.fraction),_(),u("ngSwitchCase",t.unitState.inactive)}}function Li(e,i){if(e&1&&(c(0,"div",11),p(1),ne(2,"rateTitle"),l()),e&2){let a=h();_(),y(oe(2,1,a.nextRate+1,a.titles))}}function Si(e,i){e&1&&C(0,"div",12)}function Fi(e,i){e&1&&C(0,"div",13)}function Mi(e,i){e&1&&C(0,"div",14)}var xi=(()=>{let i=class i{constructor(t){this.template=t}};i.\u0275fac=function(n){return new(n||i)(g(re))},i.\u0275dir=ee({type:i,selectors:[["","ratingActive",""]]});let e=i;return e})(),Di=(()=>{let i=class i{constructor(t){this.template=t}};i.\u0275fac=function(n){return new(n||i)(g(re))},i.\u0275dir=ee({type:i,selectors:[["","ratingInactive",""]]});let e=i;return e})(),bi=(()=>{let i=class i{constructor(t){this.template=t}};i.\u0275fac=function(n){return new(n||i)(g(re))},i.\u0275dir=ee({type:i,selectors:[["","ratingFraction",""]]});let e=i;return e})(),wi=(()=>{let i=class i{transform(t=0,n){return n[t]||t}};i.\u0275fac=function(n){return new(n||i)},i.\u0275pipe=We({name:"rateTitle",type:i,pure:!0});let e=i;return e})(),Ui={provide:Ct,useExisting:Le(()=>ve),multi:!0},ki={provide:vt,useExisting:Le(()=>ve),multi:!0},G=function(e){return e.active="active",e.inactive="inactive",e.selected="selected",e.fraction="fraction",e}(G||{}),ve=(()=>{let i=class i{constructor(t){this.changeDetectorRef=t,this.unitState=G,this.contexts=[],this.max=5,this.readOnly=!1,this.theme="default",this.showText=!1,this.titles=[],this.required=!1,this.hover=new V,this.leave=new V,this.rateChange=new V(!0),this.barClick=new V}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,n)=>({state:G.inactive,click:()=>this.handleClick(n+1),enter:()=>this.handleEnter(n+1)})),this.updateState(this.rate)}update(t,n=!0){!this.readOnly&&!this.disabled&&this.rate!==t&&(this.rate=t,this.rateChange.emit(this.rate)),n&&(this.onChange(this.rate),this.onTouched()),this.updateState(this.rate)}reset(){this.leave.emit(this.nextRate),this.updateState(this.rate)}updateState(t){this.nextRate=t-1,this.contexts=Array.from({length:this.max},(n,r)=>({state:r+1<=t?G.selected:(r+1===Math.round(t)&&t%1)>=.5?G.fraction:G.inactive,click:()=>this.handleClick(r),enter:()=>this.handleEnter(r)}))}handleClick(t){this.update(t+1)}handleEnter(t){!this.disabled&&!this.readOnly&&(this.contexts.map((n,r)=>{n.state=r<=t?G.active:G.inactive}),this.nextRate=t,this.hover.emit(t))}writeValue(t){this.update(t,!1),this.changeDetectorRef.markForCheck()}validate(t){return this.required&&!t.value?{required:!0}:null}onChange(t){}onTouched(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}};i.\u0275fac=function(n){return new(n||i)(g(te))},i.\u0275cmp=R({type:i,selectors:[["bar-rating"]],contentQueries:function(n,r,s){if(n&1&&(ae(s,xi,5),ae(s,Di,5),ae(s,bi,5)),n&2){let f;H(f=Y())&&(r.customActiveRating=f.first),H(f=Y())&&(r.customInActiveRating=f.first),H(f=Y())&&(r.customFractionRating=f.first)}},inputs:{rate:"rate",max:"max",readOnly:"readOnly",theme:"theme",showText:"showText",titles:"titles",required:"required"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange",barClick:"barClick"},features:[qe([Ui,ki]),je],decls:10,vars:9,consts:[[1,"br-units",3,"mouseleave"],["class","br-unit",3,"click","mouseenter",4,"ngFor","ngForOf"],["class","br-text",4,"ngIf"],["fractionTemplate",""],["activeTemplate",""],["inactiveTemplate",""],[1,"br-unit",3,"click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],[1,"br-text"],[1,"br-unit-inner","br-fraction"],[1,"br-unit-inner","br-active"],[1,"br-unit-inner","br-inactive"]],template:function(n,r){n&1&&(c(0,"div")(1,"div",0),A("mouseleave",function(){return r.reset()}),I(2,Oi,5,3,"div",1),l(),I(3,Li,3,4,"div",2),l(),I(4,Si,1,0,"ng-template",null,3,W)(6,Fi,1,0,"ng-template",null,4,W)(8,Mi,1,0,"ng-template",null,5,W)),n&2&&(Qe("br br-",r.customInActiveRating?"":r.theme,""),ze("br-readonly",r.readOnly)("br-disabled",r.disabled),_(2),u("ngForOf",r.contexts),_(),u("ngIf",r.showText))},dependencies:[j,D,ot,tt,it,nt,wi],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br[_ngcontent-%COMP%]{position:relative}.br-units[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit[_ngcontent-%COMP%]{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner[_ngcontent-%COMP%]{position:relative}.br-readonly[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%], .br-disabled[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%]{cursor:default}"],changeDetection:0});let e=i;return e})(),zt=(()=>{let i=class i{};i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=Ye({type:i}),i.\u0275inj=Be({imports:[N,U]});let e=i;return e})();var Qt=(()=>{let i=class i{constructor(t,n){this.dialogRef=t,this.data=n}onNoClick(){this.dialogRef.close()}};i.\u0275fac=function(n){return new(n||i)(g(Ot),g(Lt))},i.\u0275cmp=R({type:i,selectors:[["app-dialog-form"]],standalone:!0,features:[F],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(n,r){n&1&&(c(0,"h1",0),p(1,"Search Term Edit"),l(),c(2,"div",1)(3,"p"),p(4,"Search Term"),l(),c(5,"mat-form-field")(6,"input",2),A("ngModelChange",function(f){return r.data.searchTerm=f}),l()()(),c(7,"div",3)(8,"button",4),A("click",function(){return r.onNoClick()}),p(9,"Cancel"),l(),c(10,"button",5),p(11,"Confirm"),l()()),n&2&&(_(6),u("ngModel",r.data.searchTerm),_(4),u("mat-dialog-close",r.data.searchTerm))},dependencies:[N,U,Tt,z,me,M,X,Q,Nt,Ft,Mt,Dt,xt],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=i;return e})();var Re=(()=>{let i=class i{constructor(){this.processingSource=new V,this.overlaySource=new q,this.fullscreenOverlaySource=new q,this.sendFilesSource=new q,this.proccessingFound$=this.processingSource.asObservable(),this.overlaySourceFound$=this.overlaySource.asObservable(),this.fullscreenOverlaySourceFound$=this.fullscreenOverlaySource.asObservable(),this.sendFilesSourceFound$=this.sendFilesSource.asObservable()}announceFullscreenOverlay(t){this.fullscreenOverlaySource.next(t)}closeOverlay(t){this.overlaySource.next(t)}};i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function yi(e,i){e&1&&C(0,"mat-spinner")}function Pi(e,i){if(e&1&&(c(0,"div",5),C(1,"img",6),l()),e&2){let a=h();_(),u("src",a.hydrusFile.file_url,K)}}function Bi(e,i){if(e&1){let a=L();c(0,"video",7,8),A("loadeddata",function(){T(a);let n=h();return v(n.onLoad())}),C(2,"source",9),p(3," Your browser does not support the video tag. "),l()}if(e&2){let a=h();u("muted",!0)("hidden",a.loading),_(2),u("src",a.hydrusFile.file_url,K)("type",a.hydrusFile.mime)}}var Kt=(()=>{let i=class i{constructor(t){this.injectorService=t,this.loading=!0,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()})}ngOnInit(){this.loading=!0,this.subscriptions.push(this.injectorService.fullscreenOverlaySourceFound$.subscribe(t=>{this.hydrusFile=t,this.loading=!1}))}closeFullscreen(){this.injectorService.closeOverlay("msg")}imageType(t){return t?.includes("video")?!1:(console.log("true"),!0)}onLoad(){this.loading=!1}};i.\u0275fac=function(n){return new(n||i)(g(Re))},i.\u0275cmp=R({type:i,selectors:[["app-overlay"]],standalone:!0,features:[F],decls:9,vars:3,consts:[["mat-icon-button","",1,"close-fullscreen-button",3,"click"],["fxLayoutAlign","center center",1,"custom-swiper-container"],[4,"ngIf"],["class","image-container",4,"ngIf","ngIfElse"],["video",""],[1,"image-container"],["draggable","false",1,"current-image",3,"src"],["controls","",1,"current-video",3,"muted","hidden","loadeddata"],["videoPlayer",""],[3,"src","type"]],template:function(n,r){if(n&1&&(c(0,"div")(1,"button",0),A("click",function(){return r.closeFullscreen()}),c(2,"mat-icon"),p(3,"close"),l()()(),c(4,"div",1),I(5,yi,1,0,"mat-spinner",2)(6,Pi,2,1,"div",3)(7,Bi,4,4,"ng-template",null,4,W),l()),n&2){let s=x(8);_(5),u("ngIf",r.loading),_(),u("ngIf",r.imageType(r.hydrusFile.mime))("ngIfElse",s)}},dependencies:[N,D,M,_e,bt,b],styles:[".custom-swiper-container[_ngcontent-%COMP%]{height:87vh;width:90vw;padding:5px}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.current-image[_ngcontent-%COMP%]{height:85vh;max-width:80vw;object-position:center;object-fit:contain}.current-video[_ngcontent-%COMP%]{width:87vw;height:85vh;object-position:center;object-fit:contain}.close-fullscreen-button[_ngcontent-%COMP%]{color:#ff4500;position:absolute;right:30px}.close-fullscreen-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:35px;height:35px;width:35px;line-height:27px;margin-left:-6px}"],changeDetection:0});let e=i;return e})();var Ne=class{constructor(i,a){this.viewContainerRef=i,this.overlay=a}createFullscreenOverlay(){let i=new It;i.positionStrategy=this.overlay.position().global().centerHorizontally().centerVertically(),i.backdropClass="backdrop-class",i.scrollStrategy=this.overlay.scrollStrategies.block(),i.hasBackdrop=!0,this.overlayRef=this.overlay.create(i);let a=new ut(Kt,this.viewContainerRef);this.overlayRef.attach(a)}closeOverlay(){this.overlayRef.dispose()}};function Hi(e,i){if(e&1){let a=L();c(0,"mat-chip-row",10),A("removed",function(){let r=T(a).$implicit,s=h();return v(s.removeTag(r))})("click",function(n){T(a);let r=h();return v(r.openEditDialog(n))}),p(1),c(2,"button",11)(3,"mat-icon"),p(4,"cancel"),l()()()}if(e&2){let a=i.$implicit;_(),S(" ",a," ")}}function Yi(e,i){if(e&1){let a=L();c(0,"button",22),A("click",function(){T(a);let n=h().$implicit,r=h(3);return v(r.removeFromArchive(n))}),c(1,"mat-icon"),p(2,"unarchive"),l()()}}function Wi(e,i){if(e&1){let a=L();c(0,"bar-rating",26),A("rateChange",function(n){T(a);let r=h().$implicit,s=h().$implicit,f=h(3);return v(f.setRating(n,r,s))}),l()}if(e&2){let a=h().$implicit,t=h().$implicit,n=h(3),r;u("rate",n.returnNumRating(t,a))("max",((r=n.ratingServices.get(a))==null?null:r.max_stars)||0)}}function ji(e,i){e&1&&(c(0,"mat-icon"),p(1,"thumb_up_off_alt"),l())}function Xi(e,i){e&1&&(c(0,"mat-icon"),p(1,"thumb_up"),l())}function zi(e,i){e&1&&(c(0,"mat-icon"),p(1,"thumb_down"),l())}function Qi(e,i){if(e&1){let a=L();c(0,"button",27),A("click",function(){T(a);let n=h().$implicit,r=h().$implicit,s=h(3);return v(s.setRating(!s.returnLikeDislikeRating(r,n),n,r))}),I(1,ji,2,0,"mat-icon",28)(2,Xi,2,0,"mat-icon",28)(3,zi,2,0,"mat-icon",28),l()}if(e&2){let a=h().$implicit,t=h().$implicit,n=h(3);u("color",n.returnLikeDislikeRating(t,a)?"primary":""),_(),u("ngIf",n.returnLikeDislikeRating(t,a)===null),_(),u("ngIf",n.returnLikeDislikeRating(t,a)===!0),_(),u("ngIf",n.returnLikeDislikeRating(t,a)===!1)}}function $i(e,i){if(e&1&&(c(0,"div",23)(1,"h3",24),p(2),l(),I(3,Wi,1,2,"bar-rating",25)(4,Qi,4,4),l()),e&2){let a=i.$implicit,t=h(4),n;_(2),y((n=t.ratingServices.get(a))==null?null:n.name),_(),w(3,t.isNumericalRatingService(t.returnService(t.ratingServices.get(a)))?3:t.isLikeRatingService(t.returnService(t.ratingServices.get(a)))?4:-1)}}var Ki=e=>({border:e});function Zi(e,i){if(e&1){let a=L();c(0,"div",15)(1,"div",16)(2,"app-image-display",17),A("click",function(){let r=T(a).$implicit,s=h(3);return v(s.openFullscreenView(r))}),l(),c(3,"div",18)(4,"button",19),A("click",function(){let r=T(a).$implicit,s=h(3);return v(s.downloadFile(r))}),c(5,"mat-icon"),p(6,"download"),l()(),C(7,"div",20),I(8,Yi,3,0,"button",21),l()(),c(9,"div"),P(10,$i,5,2,"div",29,Se),l()()}if(e&2){let a=i.$implicit,t=h(3);_(),u("ngStyle",Fe(6,Ki,t.isFileSelected(a))),_(),u("hydrusFile",a)("widthNum",t.itemWidth)("heightNum",t.itemHeight)("thumbnail",!1),_(6),w(8,t.isFilePendingArchive(a)?8:-1),_(2),B(t.ratingServices.keys())}}function qi(e,i){e&1&&(c(0,"h2"),p(1,"No Files Found"),l())}function Ji(e,i){if(e&1&&(c(0,"div",14),P(1,Zi,12,8,"div",30,Se,!1,qi,2,0),l()),e&2){let a=i.$implicit;_(),B(a)}}var en=e=>({"height.px":e});function tn(e,i){if(e&1&&(c(0,"cdk-virtual-scroll-viewport",12),I(1,Ji,4,1,"div",13),l()),e&2){let a=h();u("itemSize",a.itemHeight)("minBufferPx",a.itemHeight*3)("maxBufferPx",a.itemHeight*5)("ngStyle",Fe(6,en,a.h)),_(),u("cdkVirtualForOf",a.itemSet)("cdkVirtualForTemplateCacheSize",0)}}function nn(e,i){e&1&&(c(0,"p",35),p(1," Processing Filter... "),l())}function on(e,i){if(e&1&&I(0,nn,2,0,"p",34),e&2){let a=h(2);u("ngIf",a.processing)}}function rn(e,i){if(e&1&&(c(0,"div",31),C(1,"mat-progress-bar",32),I(2,on,1,1,"p",33),l()),e&2){let a=h();_(2),w(2,a.processing?2:-1)}}function an(e,i){if(e&1){let a=L();c(0,"div",36)(1,"div",37)(2,"p"),p(3),l(),c(4,"p"),p(5),l()(),c(6,"div",38)(7,"button",39),A("click",function(){T(a);let n=h();return v(n.submitFiles())}),p(8," Submit "),l(),c(9,"mat-checkbox",40),A("ngModelChange",function(n){T(a);let r=h();return v(r.continue=n)}),p(10,"Continue Filtering"),l()()()}if(e&2){let a=h();_(3),S("Archiving: ",a.userFileChanges.archive.length,""),_(2),S("Trashing: ",a.hydrusFiles.length-a.userFileChanges.archive.length,""),_(4),u("ngModel",a.continue)}}var Ue=(()=>{let i=class i{constructor(t,n,r,s,f,Zt,qt,Jt,ei,ti){this.fileService=t,this.apiService=n,this.viewportRuler=r,this.ngZone=s,this.changeDetectorRef=f,this.dialog=Zt,this.injectorService=ti,this.searchFormControl=new ue,this.itemSet=[],this.itemHeight=430,this.itemWidth=495,this.h=0,this.ratingValue=0,this.processing=!1,this.isNumericalRatingService=De,this.isLikeRatingService=be,this.isIncDecRatingService=we,this.tags=["system:limit = 8","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,this.subscriptions=[],this.ratingFileChanges=[],this.chunkSize=1,this.userFileChanges=new Vt,this.continue=!0,this.ratingServices=new Map,this.overlayUtil=new Ne(Jt,ei),qt.setTitle("Archive/Delete Filter | Venus' Arch")}ngOnInit(){this.calcChunkSize(),this.viewportChangeSub=this.viewportRuler.change(200).subscribe(()=>this.ngZone.run(()=>this.generateDataChunk(this.hydrusFiles))),this.apiService.getServices().subscribe({next:t=>{this.allServices=t;for(let n in this.allServices.services){let r=this.allServices.services[n];Xt(r)&&this.ratingServices.set(n,r)}}})}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.viewportChangeSub.unsubscribe()}returnService(t){return t}isFileSelected(t){return this.userFileChanges.archive.includes(t)?"8px solid #00e676":this.userFileChanges.skipped.includes(t)?"8px solid  #007ac1":"8px solid #424242"}isFilePendingArchive(t){return this.userFileChanges.archive.includes(t)}removeFromArchive(t){this.userFileChanges.archive.includes(t)&&(this.userFileChanges.archive.splice(this.userFileChanges.archive.indexOf(t),1),this.ratingValue=0,this.ratingFileChanges=this.ratingFileChanges.filter(n=>n.hash!=t.hash))}generateDataChunk(t){this.calcChunkSize();let n,r=[];for(n=0;n<t.length;n+=this.chunkSize)r.push(t.slice(n,n+this.chunkSize));this.itemSet=r}calcChunkSize(){let t=window.innerWidth;this.chunkSize=Math.floor(t/(this.itemWidth+100)),this.h=Math.ceil(this.hydrusFiles.length/this.chunkSize)*(this.itemHeight+155+145)}removeTag(t){let n=this.tags.indexOf(t);n>=0&&this.tags.splice(n,1)}addTag(t){let n=(t.value||"").trim();n&&this.tags.push(n),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}openEditDialog(t){let n=t.target.innerText;this.dialog.open(Qt,{data:{searchTerm:n}}).afterClosed().subscribe(s=>{this.removeTag(n),this.tags.push(s)})}returnNumRating(t,n){let r=this.ratingFileChanges.findIndex(s=>s.hash===t.hash&&s.rating_service_key===n);return r!=-1?this.ratingFileChanges[r].rating:0}returnLikeDislikeRating(t,n){let r=this.ratingFileChanges.findIndex(s=>s.hash===t.hash&&s.rating_service_key===n);return r!=-1?this.ratingFileChanges[r].rating:null}setRating(t,n,r){let s=this.ratingFileChanges.findIndex(f=>f.hash===r.hash&&f.rating_service_key===n);s!=-1?this.ratingFileChanges[s].rating=t:this.ratingFileChanges.push(new yt(r.hash,n,t)),this.userFileChanges.archive.includes(r)||this.userFileChanges.archive.push(r)}searchFiles(){let t=!0,n=2;this.startSearch&&(this.loading=!0,this.processing=!1,this.hydrusFiles=[],this.userFileChanges.archive=[],this.userFileChanges.delete=[],this.userFileChanges.skipped=[],this.ratingFileChanges=[],this.changeDetectorRef.detectChanges(),this.fileService.getFileWithMetadataFromSearch(this.tags,n.toString(),t.toString()).subscribe({next:r=>{this.hydrusFiles=r,this.generateDataChunk(this.hydrusFiles),this.loading=!1}}))}openFullscreenView(t){this.overlayUtil.createFullscreenOverlay(),setTimeout(()=>this.injectorService.announceFullscreenOverlay(t),300),this.injectorService.overlaySourceFound$.subscribe({next:n=>{this.overlayUtil.closeOverlay()}})}downloadFile(t){this.fileService.downloadFile(t).subscribe({next:n=>{let r=document.createElement("a");document.body.appendChild(r);let s=window.URL.createObjectURL(n);r.href=s;let f=t.hash;r.download=`${f}.${t.ext}`,r.click(),window.URL.revokeObjectURL(s),r.remove(),window.open(s)}})}submitFiles(){let t=this.hydrusFiles;this.userFileChanges.delete=[],this.userFileChanges.archive.length>0&&this.userFileChanges.skipped.length>0?(this.userFileChanges.delete=t.filter(n=>!this.userFileChanges.archive.map(r=>r.file_id).includes(n.file_id)),this.userFileChanges.delete=this.userFileChanges.delete.filter(n=>!this.userFileChanges.skipped.map(r=>r.file_id).includes(n.file_id))):this.userFileChanges.archive.length>0?this.userFileChanges.delete=t.filter(n=>!this.userFileChanges.archive.map(r=>r.file_id).includes(n.file_id)):this.userFileChanges.skipped.length>0?this.userFileChanges.delete=t.filter(n=>!this.userFileChanges.skipped.map(r=>r.file_id).includes(n.file_id)):this.userFileChanges.delete=t,this.updateFileStatuses(this.userFileChanges)}updateFileStatuses(t){this.processing=!0,this.loading=!0;let n=t.archive.map(s=>s.file_id),r=t.delete.map(s=>s.file_id);this.scrollToTop(),this.ratingFileChanges.length>0&&this.ratingFileChanges.forEach(s=>{this.apiService.editFileRating(s).subscribe({error:f=>{console.log(f)}})}),n.length>0&&r.length>0?this.subscriptions.push(ye([this.apiService.archiveMultipleFilesById(n),this.apiService.deleteMultipleFilesById(r)]).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}})):r.length>0?this.apiService.deleteMultipleFilesById(r).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}}):n.length>0&&this.apiService.archiveMultipleFilesById(n).subscribe({next:s=>{this.searchFiles()},error:s=>{console.log(s)}})}scrollToTop(){this.virtualScroll.scrollToIndex(0)}};i.\u0275fac=function(n){return new(n||i)(g(Te),g($),g(pt),g(Xe),g(te),g(St),g(se),g($e),g(gt),g(Re))},i.\u0275cmp=R({type:i,selectors:[["app-archive-delete-filter"]],viewQuery:function(n,r){if(n&1&&et(ce,5),n&2){let s;H(s=Y())&&(r.virtualScroll=s.first)}},standalone:!0,features:[F],decls:18,vars:5,consts:[["cdkVirtualScrollingElement","",1,"main-container"],[1,"search-container"],[1,"tag-form-container"],[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],["class","virtual-container","appendOnly","",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","footer"],[3,"removed","click"],["matChipRemove","","aria-label","'remove ' + tag"],["appendOnly","",1,"virtual-container",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","files-container",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[1,"files-container"],[1,""],[3,"ngStyle"],[3,"hydrusFile","widthNum","heightNum","thumbnail","click"],[1,"image-action-container"],["mat-icon-button","",1,"download-button",3,"click"],[1,"spacer"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","warn",3,"click"],[1,"ratings-container"],[1,"rating-name"],["class","bar-rating-container",3,"rate","max"],[1,"bar-rating-container",3,"rate","max","rateChange"],["mat-mini-fab","",1,"like-dislike-button",3,"color","click"],[4,"ngIf"],["class","ratings-container"],["class",""],[1,"loading-container"],["mode","indeterminate"],["matLine","","class","processing-text"],["matLine","","class","processing-text",4,"ngIf"],["matLine","",1,"processing-text"],[1,"footer"],[1,"current-stats-container"],[1,"form-submission-container"],["mat-flat-button","","color","primary",1,"submit-button",3,"click"],[1,"continue-checkbox",3,"ngModel","ngModelChange"]],template:function(n,r){if(n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),p(5,"Search"),l(),c(6,"mat-chip-grid",4,5),P(8,Hi,5,1,"mat-chip-row",null,ie),l(),c(10,"input",6),A("matChipInputTokenEnd",function(f){return r.addTag(f)}),l()()(),c(11,"div")(12,"button",7),A("click",function(){return r.changeSearchStatus()}),c(13,"mat-icon"),p(14),l()()()(),I(15,tn,2,8,"cdk-virtual-scroll-viewport",8)(16,rn,3,1)(17,an,11,3,"div",9),l()),n&2){let s=x(7);_(6),u("formControl",r.searchFormControl),_(2),B(r.tags),_(2),u("matChipInputFor",s),_(4),y(r.startSearch?"play_arrow":"pause"),_(),w(15,r.loading?16:15),_(2),w(17,r.hydrusFiles.length>0&&!(r.processing||r.loading)?17:-1)}},dependencies:[N,D,le,M,X,_e,At,Q,Ee,Ut,b,_t,Gt,ge,Ae,de,Ie,mt,ht,ce,Et,Ce,U,z,me,he,pe,zt,ve,dt],styles:[".main-container[_ngcontent-%COMP%]{height:92vh}.tag-form-field[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{display:flex}.tag-form-container[_ngcontent-%COMP%]{flex:1;margin-right:5px}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px;margin-right:15px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:45px}.files-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;margin-bottom:25px}.image-container[_ngcontent-%COMP%]{display:block}.footer[_ngcontent-%COMP%]{margin-top:10px;min-height:55px}.current-stats-container[_ngcontent-%COMP%]{margin:10px}.image-action-container[_ngcontent-%COMP%]{background-color:#424242;display:flex;min-height:30px;margin:2px}.ratings-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:3px}.rating-name[_ngcontent-%COMP%]{font-size:18px;margin-top:3px;font-variant:small-caps;font-weight:500}.bar-rating-container[_ngcontent-%COMP%]{margin-top:5px}.virtual-container[_ngcontent-%COMP%]{margin-top:15px;width:100%;height:100%;flex-grow:1}.download-button[_ngcontent-%COMP%]{color:#2979ff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.processing-text[_ngcontent-%COMP%]{text-align:center;margin-top:25px;font-size:25px}"]});let e=i;return e})();var Uo=[{path:"",component:Bt,children:[{path:"",component:Ue},{path:"search",component:jt},{path:"archive-delete-filter",component:Ue}]}];export{Uo as HOME_ROUTES};
