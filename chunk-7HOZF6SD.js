import{$ as P,$a as It,A as We,Aa as ot,B as A,Ba as at,C as x,Ca as rt,D as Te,Da as re,E as q,Ea as lt,F as V,Fa as st,G as B,Ga as _t,H as _,Ha as W,I as s,Ia as ct,J as f,Ja as ut,K as ye,Ka as mt,L as Xe,La as pt,M as S,Ma as Et,N as C,Na as ht,O as h,P as D,Pa as y,Q as p,R as k,Ra as le,S as L,Sa as se,T as Qe,U as M,Ua as _e,V as K,W as Re,X as je,Y as J,Z as ee,Za as w,_ as te,_a as ce,a as Me,aa as ze,ab as ue,b as Fe,ba as ie,c as xe,ca as H,d as Ce,da as ne,db as X,e as De,ea as Y,eb as At,f as be,fa as b,fb as dt,g as fe,ga as Ke,gb as gt,h as we,ha as $e,hb as Ct,i as Ue,ia as Ze,ib as ft,j as Ge,ja as oe,jb as Tt,k as O,ka as qe,kb as Rt,l as ke,la as Je,lb as Nt,m as $,ma as v,mb as U,n as Ve,nb as Lt,o as Be,ob as Ot,p as T,pa as ae,pb as vt,q as R,qb as St,r as Pe,ra as et,rb as me,s as c,sb as pe,t as g,ta as tt,tb as Ee,u as Z,ua as it,ub as he,v as z,vb as F,w as He,wb as Mt,xa as nt,xb as Ft,y as m,yb as Q,z as Ye}from"./chunk-IP4QLVDE.js";function Wt(e,o){if(e&1&&(_(0,"a",5,6),p(2),s()),e&2){let r=o.$implicit;m("routerLink",r.path),c(2),L(" ",r.label," ")}}function yt(e,o){if(e&1&&(_(0,"div",7)(1,"div",8)(2,"mat-icon"),p(3,"lock_clock"),s(),p(4),J(5,"date"),s(),_(6,"div",9)(7,"mat-icon"),p(8,"mail"),s(),p(9),s(),_(10,"div",10)(11,"mat-icon"),p(12,"archive"),s(),p(13),s()()),e&2){let r=h();c(4),L(" ",ee(5,3,r.lastUpdated,"short")," "),c(5),L(" ",r.dbStats.boned_stats.num_inbox," "),c(4),L(" ",r.dbStats.boned_stats.num_archive," ")}}var Dt=(()=>{let o=class o{constructor(t){this.apiService=t,this.navLinks=[{path:"search",label:"Search"},{path:"archive-delete-filter",label:"Archive/Delete"}],this.lastUpdated=new Date}ngOnInit(){this.apiService.howBoned().subscribe({next:t=>{this.dbStats=t}})}};o.\u0275fac=function(i){return new(i||o)(g(Q))},o.\u0275cmp=O({type:o,selectors:[["app-home-page"]],standalone:!0,features:[M],decls:6,vars:2,consts:[[1,"toolbar-container"],[1,"toolbar-links"],["mat-list-item","","routerLinkActive","","class","nav-links",3,"routerLink",4,"ngFor","ngForOf"],[1,"toolbar-spacer"],["class","stats-container",4,"ngIf"],["mat-list-item","","routerLinkActive","",1,"nav-links",3,"routerLink"],["rla","routerLinkActive"],[1,"stats-container"],["matTooltip","Last Updated"],["matTooltip","Inbox"],["matTooltip","Archive"]],template:function(i,a){i&1&&(_(0,"mat-toolbar",0)(1,"div",1),A(2,Wt,3,2,"a",2),s(),f(3,"span",3),A(4,yt,14,6,"div",4),s(),f(5,"router-outlet")),i&2&&(c(2),m("ngForOf",a.navLinks),c(2),m("ngIf",a.dbStats))},dependencies:[v,Y,b,Je,et,F,It,vt,U,Lt,nt,tt,it],styles:[".nav-links[_ngcontent-%COMP%]{font-size:31px;text-decoration:none}.nav-links[_ngcontent-%COMP%], .toolbar-icons[_ngcontent-%COMP%], .span-text[_ngcontent-%COMP%]{color:#f5f5f5}.toolbar-links[_ngcontent-%COMP%]{display:flex;gap:25%}.toolbar-container[_ngcontent-%COMP%]{background-color:#1565c0;padding-right:20px;padding-left:20px;border-bottom:whitesmoke 1px solid}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.stats-container[_ngcontent-%COMP%]{display:flex;gap:5px}.user-avatar[_ngcontent-%COMP%]{border-radius:50%}"]});let e=o;return e})();function Xt(e,o){e&1&&(_(0,"mat-icon"),p(1,"videocam"),s())}function Qt(e,o){e&1&&(_(0,"mat-icon"),p(1,"volume_up"),s())}function jt(e,o){e&1&&(_(0,"mat-icon"),p(1," mail"),s())}function zt(e,o){e&1&&(_(0,"mat-icon"),p(1," archive"),s())}function Kt(e,o){e&1&&(_(0,"mat-icon"),p(1," delete"),s())}var $t=e=>({"width.px":e});function Zt(e,o){if(e&1&&f(0,"img",7),e&2){let r=h(3);m("ngStyle",K(1,$t,r.widthNum?r.widthNum:r.heightNum))}}function qt(e,o){if(e&1&&A(0,Zt,1,3,"img",6),e&2){let r=h(2);m("ngIf",r.fileType==="video"||r.fileType==="gif")}}function Jt(e,o){if(e&1&&p(0),e&2){let r=h(2);L(" ",r.hydrusFile.ext," ")}}var ei=(e,o)=>({"height.px":e,"width.px":o});function ti(e,o){if(e&1&&f(0,"img",8),e&2){let r=h(2);m("src",r.hydrusFile.file_url,Pe)("ngStyle",Re(2,ei,r.heightNum,r.widthNum?r.widthNum:r.heightNum))}}var ii=(e,o)=>({"height.px":e,"width.px":o,"background-size":"contain"}),ni=(e,o,r)=>({background:e,"height.px":o,"width.px":r,"background-size":"contain"});function oi(e,o){if(e&1&&(_(0,"div",1)(1,"mat-card",2)(2,"div"),A(3,Xt,2,0,"mat-icon",3)(4,Qt,2,0,"mat-icon",3)(5,jt,2,0,"mat-icon",3)(6,zt,2,0,"mat-icon",3)(7,Kt,2,0,"mat-icon",3),s(),_(8,"div",4),A(9,qt,1,1,"img",5)(10,Jt,1,1)(11,ti,1,5),s()()()),e&2){let r=h();c(),m("ngStyle",Re(8,ii,r.heightNum+70,r.widthNum+50)),c(2),m("ngIf",r.hydrusFile.has_audio),c(),m("ngIf",r.hydrusFile.has_audio),c(),m("ngIf",r.hydrusFile.is_inbox),c(),m("ngIf",!r.hydrusFile.is_inbox),c(),m("ngIf",r.hydrusFile.is_trashed),c(),m("ngStyle",je(11,ni,"url("+r.hydrusFile.thumbnail_url+") no-repeat center center",r.heightNum,r.widthNum?r.widthNum:r.heightNum)),c(),x(9,r.thumbnail||r.fileType==="video"||r.fileType==="gif"?9:r.fileType==="other"?10:11)}}var Ae=(()=>{let o=class o{constructor(){this.fileType="",this.heightNum=0,this.widthNum=0}ngOnInit(){this.hydrusFile.mime.includes("video")?this.fileType="video":this.hydrusFile.mime.includes("gif")?this.fileType="gif":this.hydrusFile.mime.includes("image")?this.fileType="image":this.fileType="other"}isPlayable(t){return!!(t.mime.includes("video")||t.mime.includes("gif"))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=O({type:o,selectors:[["app-image-display"]],inputs:{hydrusFile:"hydrusFile",heightNum:"heightNum",widthNum:"widthNum",thumbnail:"thumbnail"},standalone:!0,features:[M],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],["id","image-container",3,"ngStyle"],[4,"ngIf"],[3,"ngStyle"],["src","assets/images/video-play-button.png","class","video-play-button",3,"ngStyle"],["src","assets/images/video-play-button.png","class","video-play-button",3,"ngStyle",4,"ngIf"],["src","assets/images/video-play-button.png",1,"video-play-button",3,"ngStyle"],[1,"image-thumbnail",3,"src","ngStyle"]],template:function(i,a){i&1&&A(0,oi,12,15,"div",0),i&2&&m("ngIf",a.hydrusFile)},dependencies:[v,b,oe,F,mt,U],styles:[".image-thumbnail[_ngcontent-%COMP%]{object-fit:contain;width:95%;height:95%;animation:fadeIn ease .5s}.file-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-align:center;font-variant:small-caps;font-weight:700;font-size:20px;margin:0;width:85%}#image-container[_ngcontent-%COMP%]{padding:0;box-shadow:unset!important;border-radius:unset!important}.video[_ngcontent-%COMP%]{object-fit:fill}.video-play-button[_ngcontent-%COMP%]{opacity:.75}"],changeDetection:0});let e=o;return e})();var de=(()=>{let o=class o{constructor(t){this.apiService=t}getFileWithMetadataFromSearch(t,i,a){return this.apiService.getFilesSearch(t,i,a).pipe(be(l=>this.getThumbnailAndMetadata(l.file_ids)))}getThumbnailAndMetadata(t){return t.length===0?xe([]):this.apiService.getFileMetadata(t).pipe(Ce(i=>i.metadata.map(a=>Fe(Me({},a),{thumbnail_url:this.apiService.getThumbnailURLFromHash(a.hash),file_url:this.apiService.getFileURLFromHash(a.hash)}))))}downloadFile(t){return this.apiService.getFileAsBlob(t.hash).pipe(Ce(i=>new File([i],t.hash+t.ext)))}};o.\u0275fac=function(i){return new(i||o)(Ge(Q))},o.\u0275prov=we({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function li(e,o){if(e&1){let r=S();_(0,"mat-chip-row",7),C("removed",function(){let a=T(r).$implicit,l=h();return R(l.removeTag(a))}),p(1),_(2,"button",8)(3,"mat-icon"),p(4,"cancel"),s()()()}if(e&2){let r=o.$implicit;c(),L(" ",r," ")}}function si(e,o){if(e&1&&(_(0,"div"),f(1,"app-image-display",9),s()),e&2){let r=o.$implicit;c(),m("hydrusFile",r)("widthNum",365)("heightNum",330)("thumbnail",!0)}}var kt=(()=>{let o=class o{constructor(t,i){this.fileService=t,this.searchFormControl=new le,this.tags=["system:limit = 5","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,i.setTitle("Search | Venus' Arch")}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:a=>{this.hydrusFiles=a,console.log(this.hydrusFiles),this.loading=!1}}))}};o.\u0275fac=function(i){return new(i||o)(g(de),g(ae))},o.\u0275cmp=O({type:o,selectors:[["app-search"]],standalone:!0,features:[M],decls:15,vars:4,consts:[[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],[1,"image-container"],[4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","","aria-label","'remove ' + tag"],[3,"hydrusFile","widthNum","heightNum","thumbnail"]],template:function(i,a){if(i&1&&(_(0,"div")(1,"mat-form-field",0)(2,"mat-label"),p(3,"Search"),s(),_(4,"mat-chip-grid",1,2),V(6,li,5,1,"mat-chip-row",null,q),s(),_(8,"input",3),C("matChipInputTokenEnd",function(d){return a.addTag(d)}),s()()(),_(9,"div")(10,"button",4),C("click",function(){return a.changeSearchStatus()}),_(11,"mat-icon"),p(12),s()()(),_(13,"div",5),A(14,si,2,4,"div",6),s()),i&2){let l=D(5);c(4),m("formControl",a.searchFormControl),c(2),B(a.tags),c(2),m("matChipInputFor",l),c(4),k(a.startSearch?"play_arrow":"pause"),c(2),m("ngForOf",a.hydrusFiles)}},dependencies:[v,Y,F,W,X,ue,U,Ee,he,me,pe,w,y,ce,_e,Ae],styles:[".tag-form-field[_ngcontent-%COMP%]{width:100%}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:35px}.image-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;gap:25px}"]});let e=o;return e})();var I=function(e){return e[e.TAG_REPOSITORY=0]="TAG_REPOSITORY",e[e.FILE_REPOSITORY=1]="FILE_REPOSITORY",e[e.LOCAL_FILE_DOMAIN=2]="LOCAL_FILE_DOMAIN",e[e.MESSAGE_DEPOT=3]="MESSAGE_DEPOT",e[e.LOCAL_TAG=5]="LOCAL_TAG",e[e.LOCAL_RATING_NUMERICAL=6]="LOCAL_RATING_NUMERICAL",e[e.LOCAL_RATING_LIKE=7]="LOCAL_RATING_LIKE",e[e.RATING_NUMERICAL_REPOSITORY=8]="RATING_NUMERICAL_REPOSITORY",e[e.RATING_LIKE_REPOSITORY=9]="RATING_LIKE_REPOSITORY",e[e.COMBINED_TAG=10]="COMBINED_TAG",e[e.COMBINED_FILE=11]="COMBINED_FILE",e[e.LOCAL_BOORU=12]="LOCAL_BOORU",e[e.IPFS=13]="IPFS",e[e.LOCAL_FILE_TRASH_DOMAIN=14]="LOCAL_FILE_TRASH_DOMAIN",e[e.COMBINED_LOCAL_FILE=15]="COMBINED_LOCAL_FILE",e[e.TEST_SERVICE=16]="TEST_SERVICE",e[e.LOCAL_NOTES=17]="LOCAL_NOTES",e[e.CLIENT_API_SERVICE=18]="CLIENT_API_SERVICE",e[e.COMBINED_DELETED_FILE=19]="COMBINED_DELETED_FILE",e[e.LOCAL_FILE_UPDATE_DOMAIN=20]="LOCAL_FILE_UPDATE_DOMAIN",e[e.COMBINED_LOCAL_MEDIA=21]="COMBINED_LOCAL_MEDIA",e[e.LOCAL_RATING_INCDEC=22]="LOCAL_RATING_INCDEC",e[e.SERVER_ADMIN=99]="SERVER_ADMIN",e[e.NULL_SERVICE=100]="NULL_SERVICE",e}(I||{}),mn={[I.TAG_REPOSITORY]:"hydrus tag repository",[I.FILE_REPOSITORY]:"hydrus file repository",[I.LOCAL_FILE_DOMAIN]:"local file domain",[I.LOCAL_FILE_TRASH_DOMAIN]:"local trash file domain",[I.LOCAL_FILE_UPDATE_DOMAIN]:"local update file domain",[I.COMBINED_LOCAL_FILE]:"virtual combined local file service",[I.COMBINED_LOCAL_MEDIA]:"virtual combined local media service",[I.MESSAGE_DEPOT]:"hydrus message depot",[I.LOCAL_TAG]:"local tag service",[I.LOCAL_RATING_NUMERICAL]:"local numerical rating service",[I.LOCAL_RATING_LIKE]:"local like/dislike rating service",[I.LOCAL_RATING_INCDEC]:"local inc/dec rating service",[I.RATING_NUMERICAL_REPOSITORY]:"hydrus numerical rating repository",[I.RATING_LIKE_REPOSITORY]:"hydrus like/dislike rating repository",[I.COMBINED_TAG]:"virtual combined tag service",[I.COMBINED_FILE]:"virtual combined file service",[I.LOCAL_BOORU]:"client local booru",[I.CLIENT_API_SERVICE]:"client api",[I.IPFS]:"ipfs daemon",[I.TEST_SERVICE]:"test service",[I.LOCAL_NOTES]:"local file notes service",[I.SERVER_ADMIN]:"hydrus server administration service",[I.COMBINED_DELETED_FILE]:"virtual deleted file service",[I.NULL_SERVICE]:"null service"};var n=function(e){return e[e.EVERYTHING=1]="EVERYTHING",e[e.INBOX=2]="INBOX",e[e.ARCHIVE=3]="ARCHIVE",e[e.HAS_DURATION=4]="HAS_DURATION",e[e.NO_DURATION=5]="NO_DURATION",e[e.BEST_QUALITY_OF_GROUP=6]="BEST_QUALITY_OF_GROUP",e[e.NOT_BEST_QUALITY_OF_GROUP=7]="NOT_BEST_QUALITY_OF_GROUP",e[e.HAS_AUDIO=8]="HAS_AUDIO",e[e.NO_AUDIO=9]="NO_AUDIO",e[e.HAS_TRANSPARENCY=10]="HAS_TRANSPARENCY",e[e.NO_TRANSPARENCY=11]="NO_TRANSPARENCY",e[e.HAS_EXIF=12]="HAS_EXIF",e[e.NO_EXIF=13]="NO_EXIF",e[e.HAS_HUMAN_READABLE_EMBEDDED_METADATA=14]="HAS_HUMAN_READABLE_EMBEDDED_METADATA",e[e.NO_HUMAN_READABLE_EMBEDDED_METADATA=15]="NO_HUMAN_READABLE_EMBEDDED_METADATA",e[e.HAS_ICC_PROFILE=16]="HAS_ICC_PROFILE",e[e.NO_ICC_PROFILE=17]="NO_ICC_PROFILE",e[e.HAS_FORCED_FILETYPE=18]="HAS_FORCED_FILETYPE",e[e.NO_FORCED_FILETYPE=19]="NO_FORCED_FILETYPE",e[e.HAS_TAGS=20]="HAS_TAGS",e[e.UNTAGGED=21]="UNTAGGED",e[e.NUM_OF_TAGS=22]="NUM_OF_TAGS",e[e.NUM_OF_TAGS_WITH_NAMESPACE=23]="NUM_OF_TAGS_WITH_NAMESPACE",e[e.NUM_OF_WORDS=24]="NUM_OF_WORDS",e[e.HEIGHT=25]="HEIGHT",e[e.WIDTH=26]="WIDTH",e[e.FILESIZE=27]="FILESIZE",e[e.SIMILAR_TO=28]="SIMILAR_TO",e[e.LIMIT=29]="LIMIT",e[e.FILETYPE=30]="FILETYPE",e[e.HASH=31]="HASH",e[e.MOD_DATE=32]="MOD_DATE",e[e.ARCHIVED_DATE=33]="ARCHIVED_DATE",e[e.LAST_VIEWED_TIME=34]="LAST_VIEWED_TIME",e[e.TIME_IMPORTED=35]="TIME_IMPORTED",e[e.DURATION=36]="DURATION",e[e.FILE_SERVICE=37]="FILE_SERVICE",e[e.NUM_FILE_RELS=38]="NUM_FILE_RELS",e[e.RATIO=39]="RATIO",e[e.NUM_PIXELS=40]="NUM_PIXELS",e[e.MEDIA_VIEWS=41]="MEDIA_VIEWS",e[e.PREVIEW_VIEWS=42]="PREVIEW_VIEWS",e[e.ALL_VIEWS=43]="ALL_VIEWS",e[e.MEDIA_VIEWTIME=44]="MEDIA_VIEWTIME",e[e.PREVIEW_VIEWTIME=45]="PREVIEW_VIEWTIME",e[e.ALL_VIEWTIME=46]="ALL_VIEWTIME",e[e.URL_REGEX=47]="URL_REGEX",e[e.NO_URL_REGEX=48]="NO_URL_REGEX",e[e.URL=49]="URL",e[e.NO_URL=50]="NO_URL",e[e.DOMAIN=51]="DOMAIN",e[e.NO_DOMAIN=52]="NO_DOMAIN",e[e.URL_CLASS=53]="URL_CLASS",e[e.NO_URL_CLASS=54]="NO_URL_CLASS",e[e.TAG_AS_NUMBER=55]="TAG_AS_NUMBER",e[e.HAS_NOTES=56]="HAS_NOTES",e[e.NO_NOTES=57]="NO_NOTES",e[e.NUM_NOTES=58]="NUM_NOTES",e[e.HAS_NOTE_NAME=59]="HAS_NOTE_NAME",e[e.NO_NOTE_NAME=60]="NO_NOTE_NAME",e[e.RATING_SPECIFIC_NUMERICAL=61]="RATING_SPECIFIC_NUMERICAL",e[e.RATING_SPECIFIC_LIKE_DISLIKE=62]="RATING_SPECIFIC_LIKE_DISLIKE",e[e.RATING_SPECIFIC_INCDEC=63]="RATING_SPECIFIC_INCDEC",e[e.HAS_RATING=64]="HAS_RATING",e[e.NO_RATING=65]="NO_RATING",e[e.RATING_GENERAL=66]="RATING_GENERAL",e}(n||{}),u=function(e){return e[e.RELATIONAL=1]="RELATIONAL",e[e.RELATIONAL_EXACT=2]="RELATIONAL_EXACT",e[e.RELATIONAL_TIME=3]="RELATIONAL_TIME",e[e.RELATIONAL_FOR_RATING_SERVICE=4]="RELATIONAL_FOR_RATING_SERVICE",e[e.EQUAL=5]="EQUAL",e[e.FILESERVICE_STATUS=6]="FILESERVICE_STATUS",e[e.TAG_RELATIONAL=7]="TAG_RELATIONAL",e[e.ONLY_EQUAL=8]="ONLY_EQUAL",e[e.RATIO_OPERATORS=9]="RATIO_OPERATORS",e}(u||{}),E=function(e){return e[e.NATURAL=1]="NATURAL",e[e.HASHLIST_WITH_DISTANCE=2]="HASHLIST_WITH_DISTANCE",e[e.HASHLIST_WITH_ALGORITHM=3]="HASHLIST_WITH_ALGORITHM",e[e.FILETYPE_LIST=4]="FILETYPE_LIST",e[e.DATE_OR_TIME_INTERVAL=5]="DATE_OR_TIME_INTERVAL",e[e.TIME_SEC_MSEC=6]="TIME_SEC_MSEC",e[e.ANY_STRING=7]="ANY_STRING",e[e.TIME_INTERVAL=8]="TIME_INTERVAL",e[e.INTEGER=9]="INTEGER",e[e.RATIO=10]="RATIO",e[e.RATIO_SPECIAL=11]="RATIO_SPECIAL",e[e.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE=12]="RATING_SERVICE_NAME_AND_NUMERICAL_VALUE",e[e.RATING_SERVICE_NAME_AND_LIKE_DISLIKE=13]="RATING_SERVICE_NAME_AND_LIKE_DISLIKE",e[e.RATING_SERVICE_NAME_AND_INCDEC=14]="RATING_SERVICE_NAME_AND_INCDEC",e[e.RATING_SERVICE_GENERIC=15]="RATING_SERVICE_GENERIC",e[e.SERVICE_NAME=16]="SERVICE_NAME",e[e.NAMESPACE_AND_NUM_TAGS=17]="NAMESPACE_AND_NUM_TAGS",e}(E||{}),N=function(e){return e[e.FILESIZE=1]="FILESIZE",e[e.FILE_RELATIONSHIP_TYPE=2]="FILE_RELATIONSHIP_TYPE",e[e.PIXELS_OR_NONE=3]="PIXELS_OR_NONE",e[e.PIXELS=4]="PIXELS",e}(N||{}),En={[n.EVERYTHING]:{name:"everything",operator:null,value:null,units:null},[n.INBOX]:{name:"inbox",operator:null,value:null,units:null},[n.ARCHIVE]:{name:"archive",operator:null,value:null,units:null},[n.HAS_DURATION]:{name:"has duration",operator:null,value:null,units:null},[n.NO_DURATION]:{name:"no duration",operator:null,value:null,units:null},[n.BEST_QUALITY_OF_GROUP]:{name:"is the best quality file of its duplicate group",operator:null,value:null,units:null},[n.NOT_BEST_QUALITY_OF_GROUP]:{name:"is not the best quality file of its duplicate group",operator:null,value:null,units:null},[n.HAS_AUDIO]:{name:"has audio",operator:null,value:null,units:null},[n.NO_AUDIO]:{name:"no audio",operator:null,value:null,units:null},[n.HAS_TRANSPARENCY]:{name:"has transparency",operator:null,value:null,units:null},[n.NO_TRANSPARENCY]:{name:"no transparency",operator:null,value:null,units:null},[n.HAS_EXIF]:{name:"has exif",operator:null,value:null,units:null},[n.NO_EXIF]:{name:"no exif",operator:null,value:null,units:null},[n.HAS_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"has embedded metadata",operator:null,value:null,units:null},[n.NO_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"no embedded metadata",operator:null,value:null,units:null},[n.HAS_ICC_PROFILE]:{name:"has icc profile",operator:null,value:null,units:null},[n.NO_ICC_PROFILE]:{name:"no icc profile",operator:null,value:null,units:null},[n.HAS_FORCED_FILETYPE]:{name:"has forced filetype",operator:null,value:null,units:null},[n.NO_FORCED_FILETYPE]:{name:"no forced filetype",operator:null,value:null,units:null},[n.HAS_TAGS]:{name:"has tags",operator:null,value:null,units:null},[n.UNTAGGED]:{name:"untagged",operator:null,value:null,units:null},[n.NUM_OF_TAGS]:{name:"number of tags",operator:u.RELATIONAL,value:E.NATURAL,units:null},[n.NUM_OF_TAGS_WITH_NAMESPACE]:{name:"number of tags with namespace",operator:null,value:E.NAMESPACE_AND_NUM_TAGS,units:null},[n.NUM_OF_WORDS]:{name:"number of words",operator:u.RELATIONAL,value:E.NATURAL,units:null},[n.HEIGHT]:{name:"height",operator:u.RELATIONAL,value:E.NATURAL,units:N.PIXELS_OR_NONE},[n.WIDTH]:{name:"width",operator:u.RELATIONAL,value:E.NATURAL,units:N.PIXELS_OR_NONE},[n.FILESIZE]:{name:"filesize",operator:u.RELATIONAL,value:E.NATURAL,units:N.FILESIZE},[n.SIMILAR_TO]:{name:"similar to",operator:null,value:E.HASHLIST_WITH_DISTANCE,units:null},[n.LIMIT]:{name:"limit",operator:u.ONLY_EQUAL,value:E.NATURAL,units:null},[n.FILETYPE]:{name:"filetype",operator:u.ONLY_EQUAL,value:E.FILETYPE_LIST,units:null},[n.HASH]:{name:"hash",operator:u.EQUAL,value:E.HASHLIST_WITH_ALGORITHM,units:null},[n.ARCHIVED_DATE]:{name:"archived time",operator:u.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[n.MOD_DATE]:{name:"modified date",operator:u.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[n.LAST_VIEWED_TIME]:{name:"last viewed time",operator:u.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[n.TIME_IMPORTED]:{name:"import time",operator:u.RELATIONAL_TIME,value:E.DATE_OR_TIME_INTERVAL,units:null},[n.DURATION]:{name:"duration",operator:u.RELATIONAL,value:E.TIME_SEC_MSEC,units:null},[n.FILE_SERVICE]:{name:"file service",operator:u.FILESERVICE_STATUS,value:E.SERVICE_NAME,units:null},[n.NUM_FILE_RELS]:{name:"number of file relationships",operator:u.RELATIONAL,value:E.NATURAL,units:N.FILE_RELATIONSHIP_TYPE},[n.RATIO]:{name:"ratio",operator:u.RATIO_OPERATORS,value:E.RATIO,units:null},[n.NUM_PIXELS]:{name:"num pixels",operator:u.RELATIONAL,value:E.NATURAL,units:N.PIXELS},[n.MEDIA_VIEWS]:{name:"media views",operator:u.RELATIONAL,value:E.NATURAL,units:null},[n.PREVIEW_VIEWS]:{name:"preview views",operator:u.RELATIONAL,value:E.NATURAL,units:null},[n.ALL_VIEWS]:{name:"all views",operator:u.RELATIONAL,value:E.NATURAL,units:null},[n.MEDIA_VIEWTIME]:{name:"media viewtime",operator:u.RELATIONAL,value:E.TIME_INTERVAL,units:null},[n.PREVIEW_VIEWTIME]:{name:"preview viewtime",operator:u.RELATIONAL,value:E.TIME_INTERVAL,units:null},[n.ALL_VIEWTIME]:{name:"all viewtime",operator:u.RELATIONAL,value:E.TIME_INTERVAL,units:null},[n.URL_REGEX]:{name:"has a url matching regex",operator:null,value:E.ANY_STRING,units:null},[n.NO_URL_REGEX]:{name:"does not have a url matching regex",operator:null,value:E.ANY_STRING,units:null},[n.URL]:{name:"has url",operator:null,value:E.ANY_STRING,units:null},[n.NO_URL]:{name:"does not have url",operator:null,value:E.ANY_STRING,units:null},[n.DOMAIN]:{name:"has a url with domain",operator:null,value:E.ANY_STRING,units:null},[n.NO_DOMAIN]:{name:"does not have a url with domain",operator:null,value:E.ANY_STRING,units:null},[n.URL_CLASS]:{name:"has a url with url class",operator:null,value:E.ANY_STRING,units:null},[n.NO_URL_CLASS]:{name:"does not have a url with url class",operator:null,value:E.ANY_STRING,units:null},[n.TAG_AS_NUMBER]:{name:"tag as number",operator:u.TAG_RELATIONAL,value:E.INTEGER,units:null},[n.HAS_NOTES]:{name:"has notes",operator:null,value:null,units:null},[n.NO_NOTES]:{name:"no notes",operator:null,value:null,units:null},[n.NUM_NOTES]:{name:"number of notes",operator:u.RELATIONAL_EXACT,value:E.NATURAL,units:null},[n.HAS_NOTE_NAME]:{name:"note with name",operator:null,value:E.ANY_STRING,units:null},[n.NO_NOTE_NAME]:{name:"does not have note with name",operator:null,value:E.ANY_STRING,units:null},[n.HAS_RATING]:{name:"has rating for",operator:null,value:E.SERVICE_NAME,units:null},[n.NO_RATING]:{name:"no rating for",operator:null,value:E.SERVICE_NAME,units:null},[n.RATING_SPECIFIC_NUMERICAL]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE,units:null},[n.RATING_SPECIFIC_LIKE_DISLIKE]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_LIKE_DISLIKE,units:null},[n.RATING_SPECIFIC_INCDEC]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_NAME_AND_INCDEC,units:null},[n.RATING_GENERAL]:{name:"rating",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:E.RATING_SERVICE_GENERIC,units:null}},hn={[u.RELATIONAL]:["<","\u2248","=","\u2260",">"],[u.RELATIONAL_EXACT]:["<","=",">"],[u.RELATIONAL_TIME]:["before","\u2248","=","\u2260","since"],[u.RELATIONAL_FOR_RATING_SERVICE]:["<","\u2248","=",">"],[u.EQUAL]:["is","is not"],[u.FILESERVICE_STATUS]:["is currently in","is not currently in","is pending to","is not pending to"],[u.TAG_RELATIONAL]:["<","\u2248","=","\u2260",">"],[u.ONLY_EQUAL]:["is"],[u.RATIO_OPERATORS]:["=","wider than","taller than","\u2248","\u2260"]},In={[u.RELATIONAL]:"=",[u.RELATIONAL_EXACT]:"=",[u.RELATIONAL_TIME]:"=",[u.RELATIONAL_FOR_RATING_SERVICE]:"",[u.EQUAL]:"is",[u.FILESERVICE_STATUS]:"is currently in",[u.TAG_RELATIONAL]:"=",[u.ONLY_EQUAL]:"is",[u.RATIO_OPERATORS]:"="},An={[N.FILESIZE]:["B","KB","MB","GB"],[N.FILE_RELATIONSHIP_TYPE]:["duplicates","alternates","not related","potential duplicates"],[N.PIXELS_OR_NONE]:["pixels"],[N.PIXELS]:["pixels","kilopixels","megapixels"]},dn={[N.FILESIZE]:"KB",[N.FILE_RELATIONSHIP_TYPE]:"duplicates",[N.PIXELS_OR_NONE]:"pixels",[N.PIXELS]:"megapixels"};var gn={[n.FILE_SERVICE]:"File service",[n.URL_REGEX]:"URL Regex",[n.NO_URL_REGEX]:"URL Regex",[n.URL]:"URL",[n.NO_URL]:"URL",[n.DOMAIN]:"Domain",[n.NO_DOMAIN]:"Domain",[n.URL_CLASS]:"URL Class",[n.NO_URL_CLASS]:"Url Class",[n.HAS_NOTE_NAME]:"Note Name",[n.NO_NOTE_NAME]:"Note Name"},Cn=[{predicate:n.EVERYTHING},{predicate:n.INBOX},{predicate:n.ARCHIVE},{name:"dimensions",predicates:[n.HEIGHT,n.WIDTH,n.RATIO,n.NUM_PIXELS]},{name:"duration",predicates:[n.HAS_DURATION,n.NO_DURATION,n.DURATION]},{name:"file properties",predicates:[n.HAS_AUDIO,n.NO_AUDIO,n.HAS_TRANSPARENCY,n.NO_TRANSPARENCY,n.HAS_EXIF,n.NO_EXIF,n.HAS_HUMAN_READABLE_EMBEDDED_METADATA,n.NO_HUMAN_READABLE_EMBEDDED_METADATA,n.HAS_ICC_PROFILE,n.NO_ICC_PROFILE,n.HAS_FORCED_FILETYPE,n.NO_FORCED_FILETYPE]},{name:"file relationships",predicates:[n.NOT_BEST_QUALITY_OF_GROUP,n.BEST_QUALITY_OF_GROUP,n.NUM_FILE_RELS]},{predicate:n.FILE_SERVICE},{name:"file viewing statistics",predicates:[n.ALL_VIEWS,n.MEDIA_VIEWS,n.PREVIEW_VIEWS,n.ALL_VIEWTIME,n.MEDIA_VIEWTIME,n.PREVIEW_VIEWTIME]},{predicate:n.FILESIZE},{predicate:n.FILETYPE},{predicate:n.HASH},{name:"known url",predicates:[n.URL,n.NO_URL,n.DOMAIN,n.NO_DOMAIN,n.URL_REGEX,n.NO_URL_REGEX,n.URL_CLASS,n.NO_URL_CLASS]},{predicate:n.LIMIT},{name:"notes",predicates:[n.HAS_NOTES,n.NO_NOTES,n.NUM_NOTES,n.HAS_NOTE_NAME,n.NO_NOTE_NAME]},{name:"number of tags",predicates:[n.HAS_TAGS,n.UNTAGGED,n.NUM_OF_TAGS]},{predicate:n.NUM_OF_WORDS},{predicate:n.SIMILAR_TO},{predicate:n.TAG_AS_NUMBER},{name:"time",predicates:[n.TIME_IMPORTED,n.MOD_DATE,n.LAST_VIEWED_TIME,n.ARCHIVED_DATE]},{name:"rating",predicates:[n.HAS_RATING,n.NO_RATING,n.RATING_GENERAL]}],fn={[n.RATING_SPECIFIC_NUMERICAL]:["more than","less than","is","is about"],[n.RATING_SPECIFIC_LIKE_DISLIKE]:["is"],[n.RATING_SPECIFIC_INCDEC]:["more than","less than","is","is about"]};function Le(e){return e.type===I.LOCAL_RATING_NUMERICAL||e.type===I.RATING_NUMERICAL_REPOSITORY}function Oe(e){return e.type===I.LOCAL_RATING_LIKE||e.type===I.RATING_LIKE_REPOSITORY}function ve(e){return e.type===I.LOCAL_RATING_INCDEC}function Vt(e){return ve(e)||Oe(e)||Le(e)}function _i(e,o){}function ci(e,o){if(e&1&&A(0,_i,0,0,"ng-template",10),e&2){let r=h(2),t=D(5);m("ngTemplateOutlet",(r.customFractionRating==null?null:r.customFractionRating.template)||t)}}function ui(e,o){}function mi(e,o){if(e&1&&A(0,ui,0,0,"ng-template",10),e&2){let r=h(2),t=D(9);m("ngTemplateOutlet",(r.customInActiveRating==null?null:r.customInActiveRating.template)||t)}}function pi(e,o){}function Ei(e,o){if(e&1&&A(0,pi,0,0,"ng-template",10),e&2){let r=h(2),t=D(7);m("ngTemplateOutlet",(r.customActiveRating==null?null:r.customActiveRating.template)||t)}}function hi(e,o){if(e&1){let r=S();_(0,"div",6),C("click",function(i){let l=T(r).$implicit;return R(l.click(i))})("mouseenter",function(){let a=T(r).$implicit;return R(a.enter())}),ye(1,7),A(2,ci,1,1,null,8)(3,mi,1,1,null,8)(4,Ei,1,1,null,9),Xe(),s()}if(e&2){let r=o.$implicit,t=h();c(),m("ngSwitch",r.state),c(),m("ngSwitchCase",t.unitState.fraction),c(),m("ngSwitchCase",t.unitState.inactive)}}function Ii(e,o){if(e&1&&(_(0,"div",11),p(1),J(2,"rateTitle"),s()),e&2){let r=h();c(),k(ee(2,1,r.nextRate+1,r.titles))}}function Ai(e,o){e&1&&f(0,"div",12)}function di(e,o){e&1&&f(0,"div",13)}function gi(e,o){e&1&&f(0,"div",14)}var Ci=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(g(te))},o.\u0275dir=$({type:o,selectors:[["","ratingActive",""]]});let e=o;return e})(),fi=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(g(te))},o.\u0275dir=$({type:o,selectors:[["","ratingInactive",""]]});let e=o;return e})(),Ti=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(g(te))},o.\u0275dir=$({type:o,selectors:[["","ratingFraction",""]]});let e=o;return e})(),Ri=(()=>{let o=class o{transform(t=0,i){return i[t]||t}};o.\u0275fac=function(i){return new(i||o)},o.\u0275pipe=Ve({name:"rateTitle",type:o,pure:!0});let e=o;return e})(),Ni={provide:pt,useExisting:fe(()=>ge),multi:!0},Li={provide:ht,useExisting:fe(()=>ge),multi:!0},G=function(e){return e.active="active",e.inactive="inactive",e.selected="selected",e.fraction="fraction",e}(G||{}),ge=(()=>{let o=class o{constructor(t){this.changeDetectorRef=t,this.unitState=G,this.contexts=[],this.max=5,this.readOnly=!1,this.theme="default",this.showText=!1,this.titles=[],this.required=!1,this.hover=new z,this.leave=new z,this.rateChange=new z(!0),this.barClick=new z}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,i)=>({state:G.inactive,click:()=>this.handleClick(i+1),enter:()=>this.handleEnter(i+1)})),this.updateState(this.rate)}update(t,i=!0){!this.readOnly&&!this.disabled&&this.rate!==t&&(this.rate=t,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this.updateState(this.rate)}reset(){this.leave.emit(this.nextRate),this.updateState(this.rate)}updateState(t){this.nextRate=t-1,this.contexts=Array.from({length:this.max},(i,a)=>({state:a+1<=t?G.selected:(a+1===Math.round(t)&&t%1)>=.5?G.fraction:G.inactive,click:()=>this.handleClick(a),enter:()=>this.handleEnter(a)}))}handleClick(t){this.update(t+1)}handleEnter(t){!this.disabled&&!this.readOnly&&(this.contexts.map((i,a)=>{i.state=a<=t?G.active:G.inactive}),this.nextRate=t,this.hover.emit(t))}writeValue(t){this.update(t,!1),this.changeDetectorRef.markForCheck()}validate(t){return this.required&&!t.value?{required:!0}:null}onChange(t){}onTouched(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}};o.\u0275fac=function(i){return new(i||o)(g(Z))},o.\u0275cmp=O({type:o,selectors:[["bar-rating"]],contentQueries:function(i,a,l){if(i&1&&(ie(l,Ci,5),ie(l,fi,5),ie(l,Ti,5)),i&2){let d;P(d=H())&&(a.customActiveRating=d.first),P(d=H())&&(a.customInActiveRating=d.first),P(d=H())&&(a.customFractionRating=d.first)}},inputs:{rate:"rate",max:"max",readOnly:"readOnly",theme:"theme",showText:"showText",titles:"titles",required:"required"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange",barClick:"barClick"},features:[Qe([Ni,Li]),Be],decls:10,vars:9,consts:[[1,"br-units",3,"mouseleave"],["class","br-unit",3,"click","mouseenter",4,"ngFor","ngForOf"],["class","br-text",4,"ngIf"],["fractionTemplate",""],["activeTemplate",""],["inactiveTemplate",""],[1,"br-unit",3,"click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],[1,"br-text"],[1,"br-unit-inner","br-fraction"],[1,"br-unit-inner","br-active"],[1,"br-unit-inner","br-inactive"]],template:function(i,a){i&1&&(_(0,"div")(1,"div",0),C("mouseleave",function(){return a.reset()}),A(2,hi,5,3,"div",1),s(),A(3,Ii,3,4,"div",2),s(),A(4,Ai,1,0,"ng-template",null,3,ne)(6,di,1,0,"ng-template",null,4,ne)(8,gi,1,0,"ng-template",null,5,ne)),i&2&&(We("br br-",a.customInActiveRating?"":a.theme,""),Ye("br-readonly",a.readOnly)("br-disabled",a.disabled),c(2),m("ngForOf",a.contexts),c(),m("ngIf",a.showText))},dependencies:[Y,b,qe,Ke,$e,Ze,Ri],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br[_ngcontent-%COMP%]{position:relative}.br-units[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit[_ngcontent-%COMP%]{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner[_ngcontent-%COMP%]{position:relative}.br-readonly[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%], .br-disabled[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%]{cursor:default}"],changeDetection:0});let e=o;return e})(),Bt=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=ke({type:o}),o.\u0275inj=Ue({imports:[v,w]});let e=o;return e})();var Pt=(()=>{let o=class o{constructor(t,i){this.dialogRef=t,this.data=i}onNoClick(){this.dialogRef.close()}};o.\u0275fac=function(i){return new(i||o)(g(dt),g(gt))},o.\u0275cmp=O({type:o,selectors:[["app-dialog-form"]],standalone:!0,features:[M],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(i,a){i&1&&(_(0,"h1",0),p(1,"Search Term Edit"),s(),_(2,"div",1)(3,"p"),p(4,"Search Term"),s(),_(5,"mat-form-field")(6,"input",2),C("ngModelChange",function(d){return a.data.searchTerm=d}),s()()(),_(7,"div",3)(8,"button",4),C("click",function(){return a.onNoClick()}),p(9,"Cancel"),s(),_(10,"button",5),p(11,"Confirm"),s()()),i&2&&(c(6),m("ngModel",a.data.searchTerm),c(4),m("mat-dialog-close",a.data.searchTerm))},dependencies:[v,w,Et,y,se,F,W,X,At,ft,Tt,Nt,Rt],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=o;return e})();function Si(e,o){if(e&1){let r=S();_(0,"mat-chip-row",10),C("removed",function(){let a=T(r).$implicit,l=h();return R(l.removeTag(a))})("click",function(i){T(r);let a=h();return R(a.openEditDialog(i))}),p(1),_(2,"button",11)(3,"mat-icon"),p(4,"cancel"),s()()()}if(e&2){let r=o.$implicit;c(),L(" ",r," ")}}function Mi(e,o){if(e&1){let r=S();_(0,"button",22),C("click",function(){T(r);let i=h().$implicit,a=h(3);return R(a.removeFromArchive(i))}),_(1,"mat-icon"),p(2,"unarchive"),s()()}}function Fi(e,o){if(e&1){let r=S();_(0,"bar-rating",26),C("rateChange",function(i){T(r);let a=h().$implicit,l=h().$implicit,d=h(3);return R(d.setRating(i,a,l))}),s()}if(e&2){let r=h().$implicit,t=h().$implicit,i=h(3),a;m("rate",i.returnNumRating(t,r))("max",((a=i.ratingServices.get(r))==null?null:a.max_stars)||0)}}function xi(e,o){e&1&&(_(0,"mat-icon"),p(1,"thumb_up_off_alt"),s())}function Di(e,o){e&1&&(_(0,"mat-icon"),p(1,"thumb_up"),s())}function bi(e,o){e&1&&(_(0,"mat-icon"),p(1,"thumb_down"),s())}function wi(e,o){if(e&1){let r=S();_(0,"button",27),C("click",function(){T(r);let i=h().$implicit,a=h().$implicit,l=h(3);return R(l.setRating(!l.returnLikeDislikeRating(a,i),i,a))}),A(1,xi,2,0,"mat-icon",28)(2,Di,2,0,"mat-icon",28)(3,bi,2,0,"mat-icon",28),s()}if(e&2){let r=h().$implicit,t=h().$implicit,i=h(3);m("color",i.returnLikeDislikeRating(t,r)?"primary":""),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===null),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===!0),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===!1)}}function Ui(e,o){if(e&1&&(_(0,"div",23)(1,"h3",24),p(2),s(),A(3,Fi,1,2,"bar-rating",25)(4,wi,4,4),s()),e&2){let r=o.$implicit,t=h(4),i;c(2),k((i=t.ratingServices.get(r))==null?null:i.name),c(),x(3,t.isNumericalRatingService(t.returnService(t.ratingServices.get(r)))?3:t.isLikeRatingService(t.returnService(t.ratingServices.get(r)))?4:-1)}}var Gi=e=>({border:e});function ki(e,o){if(e&1){let r=S();_(0,"div",15)(1,"div",16),f(2,"app-image-display",17),_(3,"div",18)(4,"button",19),C("click",function(){let a=T(r).$implicit,l=h(3);return R(l.downloadFile(a))}),_(5,"mat-icon"),p(6,"download"),s()(),f(7,"div",20),A(8,Mi,3,0,"button",21),s()(),_(9,"div"),V(10,Ui,5,2,"div",29,Te),s()()}if(e&2){let r=o.$implicit,t=h(3);c(),m("ngStyle",K(6,Gi,t.isFileSelected(r))),c(),m("hydrusFile",r)("widthNum",t.itemWidth)("heightNum",t.itemHeight)("thumbnail",!1),c(6),x(8,t.isFilePendingArchive(r)?8:-1),c(2),B(t.ratingServices.keys())}}function Vi(e,o){e&1&&(_(0,"h2"),p(1,"No Files Found"),s())}function Bi(e,o){if(e&1&&(_(0,"div",14),V(1,ki,12,8,"div",30,Te,!1,Vi,2,0),s()),e&2){let r=o.$implicit;c(),B(r)}}var Pi=e=>({"height.px":e});function Hi(e,o){if(e&1&&(_(0,"cdk-virtual-scroll-viewport",12),A(1,Bi,4,1,"div",13),s()),e&2){let r=h();m("itemSize",r.itemHeight)("minBufferPx",r.itemHeight*3)("maxBufferPx",r.itemHeight*5)("ngStyle",K(6,Pi,r.h)),c(),m("cdkVirtualForOf",r.itemSet)("cdkVirtualForTemplateCacheSize",0)}}function Yi(e,o){e&1&&(_(0,"p",35),p(1," Processing Filter... "),s())}function Wi(e,o){if(e&1&&A(0,Yi,2,0,"p",34),e&2){let r=h(2);m("ngIf",r.processing)}}function yi(e,o){if(e&1&&(_(0,"div",31),f(1,"mat-progress-bar",32),A(2,Wi,1,1,"p",33),s()),e&2){let r=h();c(2),x(2,r.processing?2:-1)}}function Xi(e,o){if(e&1){let r=S();_(0,"div",36)(1,"div",37)(2,"p"),p(3),s(),_(4,"p"),p(5),s()(),_(6,"div",38)(7,"button",39),C("click",function(){T(r);let i=h();return R(i.submitFiles())}),p(8," Submit "),s(),_(9,"mat-checkbox",40),C("ngModelChange",function(i){T(r);let a=h();return R(a.continue=i)}),p(10,"Continue Filtering"),s()()()}if(e&2){let r=h();c(3),L("Archiving: ",r.userFileChanges.archive.length,""),c(2),L("Trashing: ",r.hydrusFiles.length-r.userFileChanges.archive.length,""),c(4),m("ngModel",r.continue)}}var Se=(()=>{let o=class o{constructor(t,i,a,l,d,Ht,Yt){this.fileService=t,this.apiService=i,this.viewportRuler=a,this.ngZone=l,this.changeDetectorRef=d,this.dialog=Ht,this.searchFormControl=new le,this.itemSet=[],this.itemHeight=430,this.itemWidth=495,this.h=0,this.ratingValue=0,this.processing=!1,this.isNumericalRatingService=Le,this.isLikeRatingService=Oe,this.isIncDecRatingService=ve,this.tags=["system:limit = 8","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,this.subscriptions=[],this.ratingFileChanges=[],this.chunkSize=1,this.userFileChanges=new Mt,this.continue=!0,this.ratingServices=new Map,Yt.setTitle("Archive/Delete Filter | Venus' Arch")}ngOnInit(){this.calcChunkSize(),this.viewportChangeSub=this.viewportRuler.change(200).subscribe(()=>this.ngZone.run(()=>this.generateDataChunk(this.hydrusFiles))),this.apiService.getServices().subscribe({next:t=>{this.allServices=t;for(let i in this.allServices.services){let a=this.allServices.services[i];Vt(a)&&this.ratingServices.set(i,a)}}})}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.viewportChangeSub.unsubscribe()}returnService(t){return t}isFileSelected(t){return this.userFileChanges.archive.includes(t)?"8px solid #00e676":this.userFileChanges.skipped.includes(t)?"8px solid  #007ac1":"8px solid #424242"}isFilePendingArchive(t){return this.userFileChanges.archive.includes(t)}removeFromArchive(t){this.userFileChanges.archive.includes(t)&&(this.userFileChanges.archive.splice(this.userFileChanges.archive.indexOf(t),1),this.ratingValue=0,this.ratingFileChanges=this.ratingFileChanges.filter(i=>i.hash!=t.hash))}generateDataChunk(t){this.calcChunkSize();let i,a=[];for(i=0;i<t.length;i+=this.chunkSize)a.push(t.slice(i,i+this.chunkSize));this.itemSet=a}calcChunkSize(){let t=window.innerWidth;this.chunkSize=Math.floor(t/(this.itemWidth+100)),this.h=Math.ceil(this.hydrusFiles.length/this.chunkSize)*(this.itemHeight+155+145)}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}openEditDialog(t){let i=t.target.innerText;this.dialog.open(Pt,{data:{searchTerm:i}}).afterClosed().subscribe(l=>{this.removeTag(i),this.tags.push(l)})}returnNumRating(t,i){let a=this.ratingFileChanges.findIndex(l=>l.hash===t.hash&&l.rating_service_key===i);return a!=-1?this.ratingFileChanges[a].rating:0}returnLikeDislikeRating(t,i){let a=this.ratingFileChanges.findIndex(l=>l.hash===t.hash&&l.rating_service_key===i);return a!=-1?this.ratingFileChanges[a].rating:null}setRating(t,i,a){let l=this.ratingFileChanges.findIndex(d=>d.hash===a.hash&&d.rating_service_key===i);l!=-1?this.ratingFileChanges[l].rating=t:this.ratingFileChanges.push(new Ft(a.hash,i,t)),this.userFileChanges.archive.includes(a)||this.userFileChanges.archive.push(a)}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.userFileChanges.archive=[],this.userFileChanges.delete=[],this.userFileChanges.skipped=[],this.ratingFileChanges=[],this.changeDetectorRef.detectChanges(),this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:a=>{this.hydrusFiles=a,this.generateDataChunk(this.hydrusFiles),this.loading=!1}}))}downloadFile(t){this.fileService.downloadFile(t).subscribe({next:i=>{let a=document.createElement("a");document.body.appendChild(a);let l=window.URL.createObjectURL(i);a.href=l;let d=t.hash;a.download=`${d}.${t.ext}`,a.click(),window.URL.revokeObjectURL(l),a.remove(),window.open(l)}})}submitFiles(){let t=this.hydrusFiles;this.userFileChanges.delete=[],this.userFileChanges.archive.length>0&&this.userFileChanges.skipped.length>0?(this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(a=>a.file_id).includes(i.file_id)),this.userFileChanges.delete=this.userFileChanges.delete.filter(i=>!this.userFileChanges.skipped.map(a=>a.file_id).includes(i.file_id))):this.userFileChanges.archive.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(a=>a.file_id).includes(i.file_id)):this.userFileChanges.skipped.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.skipped.map(a=>a.file_id).includes(i.file_id)):this.userFileChanges.delete=t,this.updateFileStatuses(this.userFileChanges)}updateFileStatuses(t){this.processing=!0,this.loading=!0;let i=t.archive.map(l=>l.file_id),a=t.delete.map(l=>l.file_id);this.scrollToTop(),this.ratingFileChanges.length>0&&this.ratingFileChanges.forEach(l=>{this.apiService.editFileRating(l).subscribe({error:d=>{console.log(d)}})}),i.length>0&&a.length>0?this.subscriptions.push(De([this.apiService.archiveMultipleFilesById(i),this.apiService.deleteMultipleFilesById(a)]).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}})):a.length>0?this.apiService.deleteMultipleFilesById(a).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}}):i.length>0&&this.apiService.archiveMultipleFilesById(i).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}})}scrollToTop(){this.virtualScroll.scrollToIndex(0)}};o.\u0275fac=function(i){return new(i||o)(g(de),g(Q),g(rt),g(He),g(Z),g(Ct),g(ae))},o.\u0275cmp=O({type:o,selectors:[["app-archive-delete-filter"]],viewQuery:function(i,a){if(i&1&&ze(re,5),i&2){let l;P(l=H())&&(a.virtualScroll=l.first)}},standalone:!0,features:[M],decls:18,vars:5,consts:[["cdkVirtualScrollingElement","",1,"main-container"],[1,"search-container"],[1,"tag-form-container"],[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],["class","virtual-container","appendOnly","",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","footer"],[3,"removed","click"],["matChipRemove","","aria-label","'remove ' + tag"],["appendOnly","",1,"virtual-container",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","files-container",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[1,"files-container"],[1,""],[3,"ngStyle"],[3,"hydrusFile","widthNum","heightNum","thumbnail"],[1,"image-action-container"],["mat-icon-button","",1,"download-button",3,"click"],[1,"spacer"],["mat-icon-button","","color","warn"],["mat-icon-button","","color","warn",3,"click"],[1,"ratings-container"],[1,"rating-name"],["class","bar-rating-container",3,"rate","max"],[1,"bar-rating-container",3,"rate","max","rateChange"],["mat-mini-fab","",1,"like-dislike-button",3,"color","click"],[4,"ngIf"],["class","ratings-container"],["class",""],[1,"loading-container"],["mode","indeterminate"],["matLine","","class","processing-text"],["matLine","","class","processing-text",4,"ngIf"],["matLine","",1,"processing-text"],[1,"footer"],[1,"current-stats-container"],[1,"form-submission-container"],["mat-flat-button","","color","primary",1,"submit-button",3,"click"],[1,"continue-checkbox",3,"ngModel","ngModelChange"]],template:function(i,a){if(i&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),p(5,"Search"),s(),_(6,"mat-chip-grid",4,5),V(8,Si,5,1,"mat-chip-row",null,q),s(),_(10,"input",6),C("matChipInputTokenEnd",function(d){return a.addTag(d)}),s()()(),_(11,"div")(12,"button",7),C("click",function(){return a.changeSearchStatus()}),_(13,"mat-icon"),p(14),s()()()(),A(15,Hi,2,8,"cdk-virtual-scroll-viewport",8)(16,yi,3,1)(17,Xi,11,3,"div",9),s()),i&2){let l=D(7);c(6),m("formControl",a.searchFormControl),c(2),B(a.tags),c(2),m("matChipInputFor",l),c(4),k(a.startSearch?"play_arrow":"pause"),c(),x(15,a.loading?16:15),c(2),x(17,a.hydrusFiles.length>0&&!(a.processing||a.loading)?17:-1)}},dependencies:[v,b,oe,F,W,ut,ct,X,ue,Ot,U,ot,St,Ee,he,me,pe,at,lt,re,st,Ae,w,y,se,ce,_e,Bt,ge,_t],styles:[".main-container[_ngcontent-%COMP%]{height:92vh}.tag-form-field[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{display:flex}.tag-form-container[_ngcontent-%COMP%]{flex:1;margin-right:5px}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px;margin-right:15px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:45px}.files-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;margin-bottom:25px}.image-container[_ngcontent-%COMP%]{display:block}.footer[_ngcontent-%COMP%]{margin-top:10px;min-height:55px}.current-stats-container[_ngcontent-%COMP%]{margin:10px}.image-action-container[_ngcontent-%COMP%]{background-color:#424242;display:flex;min-height:30px;margin:2px}.ratings-container[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:3px}.rating-name[_ngcontent-%COMP%]{font-size:18px;margin-top:3px;font-variant:small-caps;font-weight:500}.bar-rating-container[_ngcontent-%COMP%]{margin-top:5px}.virtual-container[_ngcontent-%COMP%]{margin-top:15px;width:100%;height:100%;flex-grow:1}.download-button[_ngcontent-%COMP%]{color:#2979ff}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.processing-text[_ngcontent-%COMP%]{text-align:center;margin-top:25px;font-size:25px}"]});let e=o;return e})();var lo=[{path:"",component:Dt,children:[{path:"",component:Se},{path:"search",component:kt},{path:"archive-delete-filter",component:Se}]}];export{lo as HOME_ROUTES};
