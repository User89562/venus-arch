import{$ as V,A as Be,Aa as it,B as A,Ba as ie,C as K,Ca as nt,D as Ce,Da as ot,E as q,Ea as at,F as U,Fa as W,G as w,Ga as rt,H as s,I as _,Ia as ne,J as T,Ja as lt,K as He,Ka as st,L as Pe,La as _t,M as S,N as d,Na as y,O as E,P as F,Pa as oe,Q as h,Qa as ae,R as b,S as k,Sa as re,T as Ye,U as v,V as j,W as fe,X as We,Xa as D,Y as ye,Ya as le,Z as Xe,Za as ct,_ as J,_a as se,a as Le,aa as Qe,b as Oe,ba as ee,bb as X,c as ve,ca as B,cb as ut,d as ge,da as H,db as mt,e as Me,ea as P,eb as pt,f as Se,fa as Y,fb as Et,g as de,ga as ze,gb as ht,h as Fe,ha as Ke,hb as It,i as De,ia as je,ib as At,j as xe,ja as te,jb as gt,k as f,ka as $e,kb as Q,l as be,la as R,lb as dt,m as $,mb as Ct,n as Ge,o as Ue,ob as _e,p as L,pb as ce,q as O,qa as Ze,qb as ue,r as we,rb as me,s as c,sa as qe,sb as M,t as C,ta as Je,tb as ft,u as Z,ub as Tt,v as z,vb as pe,w as ke,wa as et,y as m,z as Ve,za as tt}from"./chunk-MR2TOWTE.js";function wt(e,o){if(e&1&&(s(0,"a",3,4),h(2),_()),e&2){let r=o.$implicit;m("routerLink",r.path),c(2),k(" ",r.label," ")}}var Rt=(()=>{let o=class o{constructor(){this.navLinks=[{path:"search",label:"Search"},{path:"archive-delete-filter",label:"Archive/Delete"}]}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-home-page"]],standalone:!0,features:[v],decls:4,vars:1,consts:[[1,"toolbar-container"],[1,"toolbar-links"],["mat-list-item","","routerLinkActive","","class","nav-links",3,"routerLink",4,"ngFor","ngForOf"],["mat-list-item","","routerLinkActive","",1,"nav-links",3,"routerLink"],["rla","routerLinkActive"]],template:function(i,a){i&1&&(s(0,"mat-toolbar",0)(1,"div",1),A(2,wt,3,2,"a",2),_()(),T(3,"router-outlet")),i&2&&(c(2),m("ngForOf",a.navLinks))},dependencies:[R,P,Ze,M,ct,Ct,et,qe,Je],styles:[".nav-links[_ngcontent-%COMP%]{font-size:31px;text-decoration:none}.nav-links[_ngcontent-%COMP%], .toolbar-icons[_ngcontent-%COMP%], .span-text[_ngcontent-%COMP%]{color:#f5f5f5}.toolbar-links[_ngcontent-%COMP%]{display:flex;gap:25%}.toolbar-container[_ngcontent-%COMP%]{background-color:#1565c0;padding-right:20px;padding-left:20px;border-bottom:whitesmoke 1px solid}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.user-avatar[_ngcontent-%COMP%]{border-radius:50%}"]});let e=o;return e})();var Nt=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-landing-page"]],standalone:!0,features:[v],decls:5,vars:0,consts:[[1,"grid-container"],[1,"card-route"]],template:function(i,a){i&1&&(s(0,"div",0)(1,"mat-card",1),h(2," Search "),_(),s(3,"mat-card",1),h(4," Delete/Archive Filter "),_()())},dependencies:[R,M,ne],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;gap:10px;align-items:center;justify-items:center;grid-auto-rows:auto;grid-auto-flow:column}.card-route[_ngcontent-%COMP%]{width:500px}"],changeDetection:0});let e=o;return e})();function Vt(e,o){e&1&&(s(0,"mat-icon"),h(1,"videocam"),_())}function Bt(e,o){e&1&&(s(0,"mat-icon"),h(1,"volume_up"),_())}function Ht(e,o){e&1&&(s(0,"mat-icon"),h(1," mail"),_())}function Pt(e,o){e&1&&(s(0,"mat-icon"),h(1," archive"),_())}function Yt(e,o){e&1&&(s(0,"mat-icon"),h(1," delete"),_())}var Wt=e=>({"width.px":e});function yt(e,o){if(e&1&&T(0,"img",8),e&2){let r=E(3);m("ngStyle",j(1,Wt,r.widthNum?r.widthNum:r.heightNum))}}var Xt=(e,o,r)=>({background:e,"height.px":o,"width.px":r,"background-size":"contain"});function Qt(e,o){if(e&1&&(s(0,"div",6),A(1,yt,1,3,"img",7),_()),e&2){let r=E(2);m("ngStyle",We(2,Xt,"url("+r.hydrusFile.thumbnail_url+") no-repeat center center",r.heightNum,r.widthNum?r.widthNum:r.heightNum)),c(),m("ngIf",r.fileType==="video"||r.fileType==="gif")}}var zt=(e,o)=>({"height.px":e,"width.px":o});function Kt(e,o){if(e&1&&T(0,"img",9),e&2){let r=E(2);m("src",r.hydrusFile.file_url,we)("ngStyle",fe(2,zt,r.heightNum,r.widthNum?r.widthNum:r.heightNum))}}var jt=(e,o)=>({"height.px":e,"width.px":o,"background-size":"contain"});function $t(e,o){if(e&1&&(s(0,"div",1)(1,"mat-card",2)(2,"div"),A(3,Vt,2,0,"mat-icon",3)(4,Bt,2,0,"mat-icon",3)(5,Ht,2,0,"mat-icon",3)(6,Pt,2,0,"mat-icon",3)(7,Yt,2,0,"mat-icon",3),_(),A(8,Qt,2,6,"div",4)(9,Kt,1,5,"ng-template",null,5,H),_()()),e&2){let r=F(10),t=E();c(),m("ngStyle",fe(8,jt,t.heightNum+70,t.widthNum+50)),c(2),m("ngIf",t.hydrusFile.has_audio),c(),m("ngIf",t.hydrusFile.has_audio),c(),m("ngIf",t.hydrusFile.is_inbox),c(),m("ngIf",!t.hydrusFile.is_inbox),c(),m("ngIf",t.hydrusFile.is_trashed),c(),m("ngIf",t.thumbnail||t.fileType==="video"||t.fileType==="gif")("ngIfElse",r)}}var he=(()=>{let o=class o{constructor(){this.fileType="",this.heightNum=0,this.widthNum=0}ngOnInit(){this.hydrusFile.mime.includes("video")?this.fileType="video":this.hydrusFile.mime.includes("gif")?this.fileType="gif":this.hydrusFile.mime.includes("image")&&(this.fileType="image")}isPlayable(t){return!!(t.mime.includes("video")||t.mime.includes("gif"))}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=f({type:o,selectors:[["app-image-display"]],inputs:{hydrusFile:"hydrusFile",heightNum:"heightNum",widthNum:"widthNum",thumbnail:"thumbnail"},standalone:!0,features:[v],decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],["id","image-container",3,"ngStyle"],[4,"ngIf"],[3,"ngStyle",4,"ngIf","ngIfElse"],["hdImage",""],[3,"ngStyle"],["src","assets/images/video-play-button.png","class","video-play-button",3,"ngStyle",4,"ngIf"],["src","assets/images/video-play-button.png",1,"video-play-button",3,"ngStyle"],[1,"image-thumbnail",3,"src","ngStyle"]],template:function(i,a){i&1&&A(0,$t,11,11,"div",0),i&2&&m("ngIf",a.hydrusFile)},dependencies:[R,Y,te,M,ne,Q],styles:[".image-thumbnail[_ngcontent-%COMP%]{object-fit:contain;width:95%;height:95%;animation:fadeIn ease .5s}.file-title[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-align:center;font-variant:small-caps;font-weight:700;font-size:20px;margin:0;width:85%}#image-container[_ngcontent-%COMP%]{padding:0;box-shadow:unset!important;border-radius:unset!important}.video[_ngcontent-%COMP%]{object-fit:fill}.video-play-button[_ngcontent-%COMP%]{opacity:.75}"],changeDetection:0});let e=o;return e})();var Ie=(()=>{let o=class o{constructor(t){this.apiService=t}getFileWithMetadataFromSearch(t,i,a){return this.apiService.getFilesSearch(t,i,a).pipe(Se(l=>this.getThumbnailAndMetadata(l.file_ids)))}getThumbnailAndMetadata(t){return t.length===0?ve([]):this.apiService.getFileMetadata(t).pipe(ge(i=>i.metadata.map(a=>Oe(Le({},a),{thumbnail_url:this.apiService.getThumbnailURLFromHash(a.hash),file_url:this.apiService.getFileURLFromHash(a.hash)}))))}downloadFile(t){return this.apiService.getFileAsBlob(t.hash).pipe(ge(i=>new File([i],t.hash+t.ext)))}};o.\u0275fac=function(i){return new(i||o)(xe(pe))},o.\u0275prov=Fe({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();function Jt(e,o){if(e&1){let r=S();s(0,"mat-chip-row",7),d("removed",function(){let a=L(r).$implicit,l=E();return O(l.removeTag(a))}),h(1),s(2,"button",8)(3,"mat-icon"),h(4,"cancel"),_()()()}if(e&2){let r=o.$implicit;c(),k(" ",r," ")}}function ei(e,o){if(e&1&&(s(0,"div"),T(1,"app-image-display",9),_()),e&2){let r=o.$implicit;c(),m("hydrusFile",r)("widthNum",365)("heightNum",330)("thumbnail",!0)}}var Ft=(()=>{let o=class o{constructor(t){this.fileService=t,this.searchFormControl=new oe,this.tags=["system:limit = 5","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:a=>{this.hydrusFiles=a,console.log(this.hydrusFiles),this.loading=!1}}))}};o.\u0275fac=function(i){return new(i||o)(C(Ie))},o.\u0275cmp=f({type:o,selectors:[["app-search"]],standalone:!0,features:[v],decls:15,vars:4,consts:[[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],[1,"image-container"],[4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","","aria-label","'remove ' + tag"],[3,"hydrusFile","widthNum","heightNum","thumbnail"]],template:function(i,a){if(i&1&&(s(0,"div")(1,"mat-form-field",0)(2,"mat-label"),h(3,"Search"),_(),s(4,"mat-chip-grid",1,2),U(6,Jt,5,1,"mat-chip-row",null,q),_(),s(8,"input",3),d("matChipInputTokenEnd",function(g){return a.addTag(g)}),_()()(),s(9,"div")(10,"button",4),d("click",function(){return a.changeSearchStatus()}),s(11,"mat-icon"),h(12),_()()(),s(13,"div",5),A(14,ei,2,4,"div",6),_()),i&2){let l=F(5);c(4),m("formControl",a.searchFormControl),c(2),w(a.tags),c(2),m("matChipInputFor",l),c(4),b(a.startSearch?"play_arrow":"pause"),c(2),m("ngForOf",a.hydrusFiles)}},dependencies:[R,P,M,W,X,se,Q,ue,me,_e,ce,D,y,le,re,he],styles:[".tag-form-field[_ngcontent-%COMP%]{width:100%}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:35px}.image-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;gap:25px}"]});let e=o;return e})();var I=function(e){return e[e.TAG_REPOSITORY=0]="TAG_REPOSITORY",e[e.FILE_REPOSITORY=1]="FILE_REPOSITORY",e[e.LOCAL_FILE_DOMAIN=2]="LOCAL_FILE_DOMAIN",e[e.MESSAGE_DEPOT=3]="MESSAGE_DEPOT",e[e.LOCAL_TAG=5]="LOCAL_TAG",e[e.LOCAL_RATING_NUMERICAL=6]="LOCAL_RATING_NUMERICAL",e[e.LOCAL_RATING_LIKE=7]="LOCAL_RATING_LIKE",e[e.RATING_NUMERICAL_REPOSITORY=8]="RATING_NUMERICAL_REPOSITORY",e[e.RATING_LIKE_REPOSITORY=9]="RATING_LIKE_REPOSITORY",e[e.COMBINED_TAG=10]="COMBINED_TAG",e[e.COMBINED_FILE=11]="COMBINED_FILE",e[e.LOCAL_BOORU=12]="LOCAL_BOORU",e[e.IPFS=13]="IPFS",e[e.LOCAL_FILE_TRASH_DOMAIN=14]="LOCAL_FILE_TRASH_DOMAIN",e[e.COMBINED_LOCAL_FILE=15]="COMBINED_LOCAL_FILE",e[e.TEST_SERVICE=16]="TEST_SERVICE",e[e.LOCAL_NOTES=17]="LOCAL_NOTES",e[e.CLIENT_API_SERVICE=18]="CLIENT_API_SERVICE",e[e.COMBINED_DELETED_FILE=19]="COMBINED_DELETED_FILE",e[e.LOCAL_FILE_UPDATE_DOMAIN=20]="LOCAL_FILE_UPDATE_DOMAIN",e[e.COMBINED_LOCAL_MEDIA=21]="COMBINED_LOCAL_MEDIA",e[e.LOCAL_RATING_INCDEC=22]="LOCAL_RATING_INCDEC",e[e.SERVER_ADMIN=99]="SERVER_ADMIN",e[e.NULL_SERVICE=100]="NULL_SERVICE",e}(I||{}),on={[I.TAG_REPOSITORY]:"hydrus tag repository",[I.FILE_REPOSITORY]:"hydrus file repository",[I.LOCAL_FILE_DOMAIN]:"local file domain",[I.LOCAL_FILE_TRASH_DOMAIN]:"local trash file domain",[I.LOCAL_FILE_UPDATE_DOMAIN]:"local update file domain",[I.COMBINED_LOCAL_FILE]:"virtual combined local file service",[I.COMBINED_LOCAL_MEDIA]:"virtual combined local media service",[I.MESSAGE_DEPOT]:"hydrus message depot",[I.LOCAL_TAG]:"local tag service",[I.LOCAL_RATING_NUMERICAL]:"local numerical rating service",[I.LOCAL_RATING_LIKE]:"local like/dislike rating service",[I.LOCAL_RATING_INCDEC]:"local inc/dec rating service",[I.RATING_NUMERICAL_REPOSITORY]:"hydrus numerical rating repository",[I.RATING_LIKE_REPOSITORY]:"hydrus like/dislike rating repository",[I.COMBINED_TAG]:"virtual combined tag service",[I.COMBINED_FILE]:"virtual combined file service",[I.LOCAL_BOORU]:"client local booru",[I.CLIENT_API_SERVICE]:"client api",[I.IPFS]:"ipfs daemon",[I.TEST_SERVICE]:"test service",[I.LOCAL_NOTES]:"local file notes service",[I.SERVER_ADMIN]:"hydrus server administration service",[I.COMBINED_DELETED_FILE]:"virtual deleted file service",[I.NULL_SERVICE]:"null service"};var n=function(e){return e[e.EVERYTHING=1]="EVERYTHING",e[e.INBOX=2]="INBOX",e[e.ARCHIVE=3]="ARCHIVE",e[e.HAS_DURATION=4]="HAS_DURATION",e[e.NO_DURATION=5]="NO_DURATION",e[e.BEST_QUALITY_OF_GROUP=6]="BEST_QUALITY_OF_GROUP",e[e.NOT_BEST_QUALITY_OF_GROUP=7]="NOT_BEST_QUALITY_OF_GROUP",e[e.HAS_AUDIO=8]="HAS_AUDIO",e[e.NO_AUDIO=9]="NO_AUDIO",e[e.HAS_TRANSPARENCY=10]="HAS_TRANSPARENCY",e[e.NO_TRANSPARENCY=11]="NO_TRANSPARENCY",e[e.HAS_EXIF=12]="HAS_EXIF",e[e.NO_EXIF=13]="NO_EXIF",e[e.HAS_HUMAN_READABLE_EMBEDDED_METADATA=14]="HAS_HUMAN_READABLE_EMBEDDED_METADATA",e[e.NO_HUMAN_READABLE_EMBEDDED_METADATA=15]="NO_HUMAN_READABLE_EMBEDDED_METADATA",e[e.HAS_ICC_PROFILE=16]="HAS_ICC_PROFILE",e[e.NO_ICC_PROFILE=17]="NO_ICC_PROFILE",e[e.HAS_FORCED_FILETYPE=18]="HAS_FORCED_FILETYPE",e[e.NO_FORCED_FILETYPE=19]="NO_FORCED_FILETYPE",e[e.HAS_TAGS=20]="HAS_TAGS",e[e.UNTAGGED=21]="UNTAGGED",e[e.NUM_OF_TAGS=22]="NUM_OF_TAGS",e[e.NUM_OF_TAGS_WITH_NAMESPACE=23]="NUM_OF_TAGS_WITH_NAMESPACE",e[e.NUM_OF_WORDS=24]="NUM_OF_WORDS",e[e.HEIGHT=25]="HEIGHT",e[e.WIDTH=26]="WIDTH",e[e.FILESIZE=27]="FILESIZE",e[e.SIMILAR_TO=28]="SIMILAR_TO",e[e.LIMIT=29]="LIMIT",e[e.FILETYPE=30]="FILETYPE",e[e.HASH=31]="HASH",e[e.MOD_DATE=32]="MOD_DATE",e[e.ARCHIVED_DATE=33]="ARCHIVED_DATE",e[e.LAST_VIEWED_TIME=34]="LAST_VIEWED_TIME",e[e.TIME_IMPORTED=35]="TIME_IMPORTED",e[e.DURATION=36]="DURATION",e[e.FILE_SERVICE=37]="FILE_SERVICE",e[e.NUM_FILE_RELS=38]="NUM_FILE_RELS",e[e.RATIO=39]="RATIO",e[e.NUM_PIXELS=40]="NUM_PIXELS",e[e.MEDIA_VIEWS=41]="MEDIA_VIEWS",e[e.PREVIEW_VIEWS=42]="PREVIEW_VIEWS",e[e.ALL_VIEWS=43]="ALL_VIEWS",e[e.MEDIA_VIEWTIME=44]="MEDIA_VIEWTIME",e[e.PREVIEW_VIEWTIME=45]="PREVIEW_VIEWTIME",e[e.ALL_VIEWTIME=46]="ALL_VIEWTIME",e[e.URL_REGEX=47]="URL_REGEX",e[e.NO_URL_REGEX=48]="NO_URL_REGEX",e[e.URL=49]="URL",e[e.NO_URL=50]="NO_URL",e[e.DOMAIN=51]="DOMAIN",e[e.NO_DOMAIN=52]="NO_DOMAIN",e[e.URL_CLASS=53]="URL_CLASS",e[e.NO_URL_CLASS=54]="NO_URL_CLASS",e[e.TAG_AS_NUMBER=55]="TAG_AS_NUMBER",e[e.HAS_NOTES=56]="HAS_NOTES",e[e.NO_NOTES=57]="NO_NOTES",e[e.NUM_NOTES=58]="NUM_NOTES",e[e.HAS_NOTE_NAME=59]="HAS_NOTE_NAME",e[e.NO_NOTE_NAME=60]="NO_NOTE_NAME",e[e.RATING_SPECIFIC_NUMERICAL=61]="RATING_SPECIFIC_NUMERICAL",e[e.RATING_SPECIFIC_LIKE_DISLIKE=62]="RATING_SPECIFIC_LIKE_DISLIKE",e[e.RATING_SPECIFIC_INCDEC=63]="RATING_SPECIFIC_INCDEC",e[e.HAS_RATING=64]="HAS_RATING",e[e.NO_RATING=65]="NO_RATING",e[e.RATING_GENERAL=66]="RATING_GENERAL",e}(n||{}),u=function(e){return e[e.RELATIONAL=1]="RELATIONAL",e[e.RELATIONAL_EXACT=2]="RELATIONAL_EXACT",e[e.RELATIONAL_TIME=3]="RELATIONAL_TIME",e[e.RELATIONAL_FOR_RATING_SERVICE=4]="RELATIONAL_FOR_RATING_SERVICE",e[e.EQUAL=5]="EQUAL",e[e.FILESERVICE_STATUS=6]="FILESERVICE_STATUS",e[e.TAG_RELATIONAL=7]="TAG_RELATIONAL",e[e.ONLY_EQUAL=8]="ONLY_EQUAL",e[e.RATIO_OPERATORS=9]="RATIO_OPERATORS",e}(u||{}),p=function(e){return e[e.NATURAL=1]="NATURAL",e[e.HASHLIST_WITH_DISTANCE=2]="HASHLIST_WITH_DISTANCE",e[e.HASHLIST_WITH_ALGORITHM=3]="HASHLIST_WITH_ALGORITHM",e[e.FILETYPE_LIST=4]="FILETYPE_LIST",e[e.DATE_OR_TIME_INTERVAL=5]="DATE_OR_TIME_INTERVAL",e[e.TIME_SEC_MSEC=6]="TIME_SEC_MSEC",e[e.ANY_STRING=7]="ANY_STRING",e[e.TIME_INTERVAL=8]="TIME_INTERVAL",e[e.INTEGER=9]="INTEGER",e[e.RATIO=10]="RATIO",e[e.RATIO_SPECIAL=11]="RATIO_SPECIAL",e[e.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE=12]="RATING_SERVICE_NAME_AND_NUMERICAL_VALUE",e[e.RATING_SERVICE_NAME_AND_LIKE_DISLIKE=13]="RATING_SERVICE_NAME_AND_LIKE_DISLIKE",e[e.RATING_SERVICE_NAME_AND_INCDEC=14]="RATING_SERVICE_NAME_AND_INCDEC",e[e.RATING_SERVICE_GENERIC=15]="RATING_SERVICE_GENERIC",e[e.SERVICE_NAME=16]="SERVICE_NAME",e[e.NAMESPACE_AND_NUM_TAGS=17]="NAMESPACE_AND_NUM_TAGS",e}(p||{}),N=function(e){return e[e.FILESIZE=1]="FILESIZE",e[e.FILE_RELATIONSHIP_TYPE=2]="FILE_RELATIONSHIP_TYPE",e[e.PIXELS_OR_NONE=3]="PIXELS_OR_NONE",e[e.PIXELS=4]="PIXELS",e}(N||{}),rn={[n.EVERYTHING]:{name:"everything",operator:null,value:null,units:null},[n.INBOX]:{name:"inbox",operator:null,value:null,units:null},[n.ARCHIVE]:{name:"archive",operator:null,value:null,units:null},[n.HAS_DURATION]:{name:"has duration",operator:null,value:null,units:null},[n.NO_DURATION]:{name:"no duration",operator:null,value:null,units:null},[n.BEST_QUALITY_OF_GROUP]:{name:"is the best quality file of its duplicate group",operator:null,value:null,units:null},[n.NOT_BEST_QUALITY_OF_GROUP]:{name:"is not the best quality file of its duplicate group",operator:null,value:null,units:null},[n.HAS_AUDIO]:{name:"has audio",operator:null,value:null,units:null},[n.NO_AUDIO]:{name:"no audio",operator:null,value:null,units:null},[n.HAS_TRANSPARENCY]:{name:"has transparency",operator:null,value:null,units:null},[n.NO_TRANSPARENCY]:{name:"no transparency",operator:null,value:null,units:null},[n.HAS_EXIF]:{name:"has exif",operator:null,value:null,units:null},[n.NO_EXIF]:{name:"no exif",operator:null,value:null,units:null},[n.HAS_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"has embedded metadata",operator:null,value:null,units:null},[n.NO_HUMAN_READABLE_EMBEDDED_METADATA]:{name:"no embedded metadata",operator:null,value:null,units:null},[n.HAS_ICC_PROFILE]:{name:"has icc profile",operator:null,value:null,units:null},[n.NO_ICC_PROFILE]:{name:"no icc profile",operator:null,value:null,units:null},[n.HAS_FORCED_FILETYPE]:{name:"has forced filetype",operator:null,value:null,units:null},[n.NO_FORCED_FILETYPE]:{name:"no forced filetype",operator:null,value:null,units:null},[n.HAS_TAGS]:{name:"has tags",operator:null,value:null,units:null},[n.UNTAGGED]:{name:"untagged",operator:null,value:null,units:null},[n.NUM_OF_TAGS]:{name:"number of tags",operator:u.RELATIONAL,value:p.NATURAL,units:null},[n.NUM_OF_TAGS_WITH_NAMESPACE]:{name:"number of tags with namespace",operator:null,value:p.NAMESPACE_AND_NUM_TAGS,units:null},[n.NUM_OF_WORDS]:{name:"number of words",operator:u.RELATIONAL,value:p.NATURAL,units:null},[n.HEIGHT]:{name:"height",operator:u.RELATIONAL,value:p.NATURAL,units:N.PIXELS_OR_NONE},[n.WIDTH]:{name:"width",operator:u.RELATIONAL,value:p.NATURAL,units:N.PIXELS_OR_NONE},[n.FILESIZE]:{name:"filesize",operator:u.RELATIONAL,value:p.NATURAL,units:N.FILESIZE},[n.SIMILAR_TO]:{name:"similar to",operator:null,value:p.HASHLIST_WITH_DISTANCE,units:null},[n.LIMIT]:{name:"limit",operator:u.ONLY_EQUAL,value:p.NATURAL,units:null},[n.FILETYPE]:{name:"filetype",operator:u.ONLY_EQUAL,value:p.FILETYPE_LIST,units:null},[n.HASH]:{name:"hash",operator:u.EQUAL,value:p.HASHLIST_WITH_ALGORITHM,units:null},[n.ARCHIVED_DATE]:{name:"archived time",operator:u.RELATIONAL_TIME,value:p.DATE_OR_TIME_INTERVAL,units:null},[n.MOD_DATE]:{name:"modified date",operator:u.RELATIONAL_TIME,value:p.DATE_OR_TIME_INTERVAL,units:null},[n.LAST_VIEWED_TIME]:{name:"last viewed time",operator:u.RELATIONAL_TIME,value:p.DATE_OR_TIME_INTERVAL,units:null},[n.TIME_IMPORTED]:{name:"import time",operator:u.RELATIONAL_TIME,value:p.DATE_OR_TIME_INTERVAL,units:null},[n.DURATION]:{name:"duration",operator:u.RELATIONAL,value:p.TIME_SEC_MSEC,units:null},[n.FILE_SERVICE]:{name:"file service",operator:u.FILESERVICE_STATUS,value:p.SERVICE_NAME,units:null},[n.NUM_FILE_RELS]:{name:"number of file relationships",operator:u.RELATIONAL,value:p.NATURAL,units:N.FILE_RELATIONSHIP_TYPE},[n.RATIO]:{name:"ratio",operator:u.RATIO_OPERATORS,value:p.RATIO,units:null},[n.NUM_PIXELS]:{name:"num pixels",operator:u.RELATIONAL,value:p.NATURAL,units:N.PIXELS},[n.MEDIA_VIEWS]:{name:"media views",operator:u.RELATIONAL,value:p.NATURAL,units:null},[n.PREVIEW_VIEWS]:{name:"preview views",operator:u.RELATIONAL,value:p.NATURAL,units:null},[n.ALL_VIEWS]:{name:"all views",operator:u.RELATIONAL,value:p.NATURAL,units:null},[n.MEDIA_VIEWTIME]:{name:"media viewtime",operator:u.RELATIONAL,value:p.TIME_INTERVAL,units:null},[n.PREVIEW_VIEWTIME]:{name:"preview viewtime",operator:u.RELATIONAL,value:p.TIME_INTERVAL,units:null},[n.ALL_VIEWTIME]:{name:"all viewtime",operator:u.RELATIONAL,value:p.TIME_INTERVAL,units:null},[n.URL_REGEX]:{name:"has a url matching regex",operator:null,value:p.ANY_STRING,units:null},[n.NO_URL_REGEX]:{name:"does not have a url matching regex",operator:null,value:p.ANY_STRING,units:null},[n.URL]:{name:"has url",operator:null,value:p.ANY_STRING,units:null},[n.NO_URL]:{name:"does not have url",operator:null,value:p.ANY_STRING,units:null},[n.DOMAIN]:{name:"has a url with domain",operator:null,value:p.ANY_STRING,units:null},[n.NO_DOMAIN]:{name:"does not have a url with domain",operator:null,value:p.ANY_STRING,units:null},[n.URL_CLASS]:{name:"has a url with url class",operator:null,value:p.ANY_STRING,units:null},[n.NO_URL_CLASS]:{name:"does not have a url with url class",operator:null,value:p.ANY_STRING,units:null},[n.TAG_AS_NUMBER]:{name:"tag as number",operator:u.TAG_RELATIONAL,value:p.INTEGER,units:null},[n.HAS_NOTES]:{name:"has notes",operator:null,value:null,units:null},[n.NO_NOTES]:{name:"no notes",operator:null,value:null,units:null},[n.NUM_NOTES]:{name:"number of notes",operator:u.RELATIONAL_EXACT,value:p.NATURAL,units:null},[n.HAS_NOTE_NAME]:{name:"note with name",operator:null,value:p.ANY_STRING,units:null},[n.NO_NOTE_NAME]:{name:"does not have note with name",operator:null,value:p.ANY_STRING,units:null},[n.HAS_RATING]:{name:"has rating for",operator:null,value:p.SERVICE_NAME,units:null},[n.NO_RATING]:{name:"no rating for",operator:null,value:p.SERVICE_NAME,units:null},[n.RATING_SPECIFIC_NUMERICAL]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:p.RATING_SERVICE_NAME_AND_NUMERICAL_VALUE,units:null},[n.RATING_SPECIFIC_LIKE_DISLIKE]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:p.RATING_SERVICE_NAME_AND_LIKE_DISLIKE,units:null},[n.RATING_SPECIFIC_INCDEC]:{name:"rating for",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:p.RATING_SERVICE_NAME_AND_INCDEC,units:null},[n.RATING_GENERAL]:{name:"rating",operator:u.RELATIONAL_FOR_RATING_SERVICE,value:p.RATING_SERVICE_GENERIC,units:null}},ln={[u.RELATIONAL]:["<","\u2248","=","\u2260",">"],[u.RELATIONAL_EXACT]:["<","=",">"],[u.RELATIONAL_TIME]:["before","\u2248","=","\u2260","since"],[u.RELATIONAL_FOR_RATING_SERVICE]:["<","\u2248","=",">"],[u.EQUAL]:["is","is not"],[u.FILESERVICE_STATUS]:["is currently in","is not currently in","is pending to","is not pending to"],[u.TAG_RELATIONAL]:["<","\u2248","=","\u2260",">"],[u.ONLY_EQUAL]:["is"],[u.RATIO_OPERATORS]:["=","wider than","taller than","\u2248","\u2260"]},sn={[u.RELATIONAL]:"=",[u.RELATIONAL_EXACT]:"=",[u.RELATIONAL_TIME]:"=",[u.RELATIONAL_FOR_RATING_SERVICE]:"",[u.EQUAL]:"is",[u.FILESERVICE_STATUS]:"is currently in",[u.TAG_RELATIONAL]:"=",[u.ONLY_EQUAL]:"is",[u.RATIO_OPERATORS]:"="},_n={[N.FILESIZE]:["B","KB","MB","GB"],[N.FILE_RELATIONSHIP_TYPE]:["duplicates","alternates","not related","potential duplicates"],[N.PIXELS_OR_NONE]:["pixels"],[N.PIXELS]:["pixels","kilopixels","megapixels"]},cn={[N.FILESIZE]:"KB",[N.FILE_RELATIONSHIP_TYPE]:"duplicates",[N.PIXELS_OR_NONE]:"pixels",[N.PIXELS]:"megapixels"};var un={[n.FILE_SERVICE]:"File service",[n.URL_REGEX]:"URL Regex",[n.NO_URL_REGEX]:"URL Regex",[n.URL]:"URL",[n.NO_URL]:"URL",[n.DOMAIN]:"Domain",[n.NO_DOMAIN]:"Domain",[n.URL_CLASS]:"URL Class",[n.NO_URL_CLASS]:"Url Class",[n.HAS_NOTE_NAME]:"Note Name",[n.NO_NOTE_NAME]:"Note Name"},mn=[{predicate:n.EVERYTHING},{predicate:n.INBOX},{predicate:n.ARCHIVE},{name:"dimensions",predicates:[n.HEIGHT,n.WIDTH,n.RATIO,n.NUM_PIXELS]},{name:"duration",predicates:[n.HAS_DURATION,n.NO_DURATION,n.DURATION]},{name:"file properties",predicates:[n.HAS_AUDIO,n.NO_AUDIO,n.HAS_TRANSPARENCY,n.NO_TRANSPARENCY,n.HAS_EXIF,n.NO_EXIF,n.HAS_HUMAN_READABLE_EMBEDDED_METADATA,n.NO_HUMAN_READABLE_EMBEDDED_METADATA,n.HAS_ICC_PROFILE,n.NO_ICC_PROFILE,n.HAS_FORCED_FILETYPE,n.NO_FORCED_FILETYPE]},{name:"file relationships",predicates:[n.NOT_BEST_QUALITY_OF_GROUP,n.BEST_QUALITY_OF_GROUP,n.NUM_FILE_RELS]},{predicate:n.FILE_SERVICE},{name:"file viewing statistics",predicates:[n.ALL_VIEWS,n.MEDIA_VIEWS,n.PREVIEW_VIEWS,n.ALL_VIEWTIME,n.MEDIA_VIEWTIME,n.PREVIEW_VIEWTIME]},{predicate:n.FILESIZE},{predicate:n.FILETYPE},{predicate:n.HASH},{name:"known url",predicates:[n.URL,n.NO_URL,n.DOMAIN,n.NO_DOMAIN,n.URL_REGEX,n.NO_URL_REGEX,n.URL_CLASS,n.NO_URL_CLASS]},{predicate:n.LIMIT},{name:"notes",predicates:[n.HAS_NOTES,n.NO_NOTES,n.NUM_NOTES,n.HAS_NOTE_NAME,n.NO_NOTE_NAME]},{name:"number of tags",predicates:[n.HAS_TAGS,n.UNTAGGED,n.NUM_OF_TAGS]},{predicate:n.NUM_OF_WORDS},{predicate:n.SIMILAR_TO},{predicate:n.TAG_AS_NUMBER},{name:"time",predicates:[n.TIME_IMPORTED,n.MOD_DATE,n.LAST_VIEWED_TIME,n.ARCHIVED_DATE]},{name:"rating",predicates:[n.HAS_RATING,n.NO_RATING,n.RATING_GENERAL]}],pn={[n.RATING_SPECIFIC_NUMERICAL]:["more than","less than","is","is about"],[n.RATING_SPECIFIC_LIKE_DISLIKE]:["is"],[n.RATING_SPECIFIC_INCDEC]:["more than","less than","is","is about"]};function Te(e){return e.type===I.LOCAL_RATING_NUMERICAL||e.type===I.RATING_NUMERICAL_REPOSITORY}function Re(e){return e.type===I.LOCAL_RATING_LIKE||e.type===I.RATING_LIKE_REPOSITORY}function Ne(e){return e.type===I.LOCAL_RATING_INCDEC}function Dt(e){return Ne(e)||Re(e)||Te(e)}function ti(e,o){}function ii(e,o){if(e&1&&A(0,ti,0,0,"ng-template",10),e&2){let r=E(2),t=F(5);m("ngTemplateOutlet",(r.customFractionRating==null?null:r.customFractionRating.template)||t)}}function ni(e,o){}function oi(e,o){if(e&1&&A(0,ni,0,0,"ng-template",10),e&2){let r=E(2),t=F(9);m("ngTemplateOutlet",(r.customInActiveRating==null?null:r.customInActiveRating.template)||t)}}function ai(e,o){}function ri(e,o){if(e&1&&A(0,ai,0,0,"ng-template",10),e&2){let r=E(2),t=F(7);m("ngTemplateOutlet",(r.customActiveRating==null?null:r.customActiveRating.template)||t)}}function li(e,o){if(e&1){let r=S();s(0,"div",6),d("click",function(i){let l=L(r).$implicit;return O(l.click(i))})("mouseenter",function(){let a=L(r).$implicit;return O(a.enter())}),He(1,7),A(2,ii,1,1,null,8)(3,oi,1,1,null,8)(4,ri,1,1,null,9),Pe(),_()}if(e&2){let r=o.$implicit,t=E();c(),m("ngSwitch",r.state),c(),m("ngSwitchCase",t.unitState.fraction),c(),m("ngSwitchCase",t.unitState.inactive)}}function si(e,o){if(e&1&&(s(0,"div",11),h(1),ye(2,"rateTitle"),_()),e&2){let r=E();c(),b(Xe(2,1,r.nextRate+1,r.titles))}}function _i(e,o){e&1&&T(0,"div",12)}function ci(e,o){e&1&&T(0,"div",13)}function ui(e,o){e&1&&T(0,"div",14)}var mi=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(C(J))},o.\u0275dir=$({type:o,selectors:[["","ratingActive",""]]});let e=o;return e})(),pi=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(C(J))},o.\u0275dir=$({type:o,selectors:[["","ratingInactive",""]]});let e=o;return e})(),Ei=(()=>{let o=class o{constructor(t){this.template=t}};o.\u0275fac=function(i){return new(i||o)(C(J))},o.\u0275dir=$({type:o,selectors:[["","ratingFraction",""]]});let e=o;return e})(),hi=(()=>{let o=class o{transform(t=0,i){return i[t]||t}};o.\u0275fac=function(i){return new(i||o)},o.\u0275pipe=Ge({name:"rateTitle",type:o,pure:!0});let e=o;return e})(),Ii={provide:lt,useExisting:de(()=>Ae),multi:!0},Ai={provide:_t,useExisting:de(()=>Ae),multi:!0},x=function(e){return e.active="active",e.inactive="inactive",e.selected="selected",e.fraction="fraction",e}(x||{}),Ae=(()=>{let o=class o{constructor(t){this.changeDetectorRef=t,this.unitState=x,this.contexts=[],this.max=5,this.readOnly=!1,this.theme="default",this.showText=!1,this.titles=[],this.required=!1,this.hover=new z,this.leave=new z,this.rateChange=new z(!0),this.barClick=new z}ngOnChanges(t){t.rate&&this.update(this.rate)}ngOnInit(){this.contexts=Array.from({length:this.max},(t,i)=>({state:x.inactive,click:()=>this.handleClick(i+1),enter:()=>this.handleEnter(i+1)})),this.updateState(this.rate)}update(t,i=!0){!this.readOnly&&!this.disabled&&this.rate!==t&&(this.rate=t,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this.updateState(this.rate)}reset(){this.leave.emit(this.nextRate),this.updateState(this.rate)}updateState(t){this.nextRate=t-1,this.contexts=Array.from({length:this.max},(i,a)=>({state:a+1<=t?x.selected:(a+1===Math.round(t)&&t%1)>=.5?x.fraction:x.inactive,click:()=>this.handleClick(a),enter:()=>this.handleEnter(a)}))}handleClick(t){this.update(t+1)}handleEnter(t){!this.disabled&&!this.readOnly&&(this.contexts.map((i,a)=>{i.state=a<=t?x.active:x.inactive}),this.nextRate=t,this.hover.emit(t))}writeValue(t){this.update(t,!1),this.changeDetectorRef.markForCheck()}validate(t){return this.required&&!t.value?{required:!0}:null}onChange(t){}onTouched(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}};o.\u0275fac=function(i){return new(i||o)(C(Z))},o.\u0275cmp=f({type:o,selectors:[["bar-rating"]],contentQueries:function(i,a,l){if(i&1&&(ee(l,mi,5),ee(l,pi,5),ee(l,Ei,5)),i&2){let g;V(g=B())&&(a.customActiveRating=g.first),V(g=B())&&(a.customInActiveRating=g.first),V(g=B())&&(a.customFractionRating=g.first)}},inputs:{rate:"rate",max:"max",readOnly:"readOnly",theme:"theme",showText:"showText",titles:"titles",required:"required"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange",barClick:"barClick"},features:[Ye([Ii,Ai]),Ue],decls:10,vars:9,consts:[[1,"br-units",3,"mouseleave"],["class","br-unit",3,"click","mouseenter",4,"ngFor","ngForOf"],["class","br-text",4,"ngIf"],["fractionTemplate",""],["activeTemplate",""],["inactiveTemplate",""],[1,"br-unit",3,"click","mouseenter"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"ngTemplateOutlet"],[1,"br-text"],[1,"br-unit-inner","br-fraction"],[1,"br-unit-inner","br-active"],[1,"br-unit-inner","br-inactive"]],template:function(i,a){i&1&&(s(0,"div")(1,"div",0),d("mouseleave",function(){return a.reset()}),A(2,li,5,3,"div",1),_(),A(3,si,3,4,"div",2),_(),A(4,_i,1,0,"ng-template",null,3,H)(6,ci,1,0,"ng-template",null,4,H)(8,ui,1,0,"ng-template",null,5,H)),i&2&&(Be("br br-",a.customInActiveRating?"":a.theme,""),Ve("br-readonly",a.readOnly)("br-disabled",a.disabled),c(2),m("ngForOf",a.contexts),c(),m("ngIf",a.showText))},dependencies:[P,Y,$e,ze,Ke,je,hi],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}[_nghost-%COMP%]{--br-font-size: 16px;--br-gap: 0;--br-active-color: #EDB867;--br-inactive-color: #D2D2D2}.br[_ngcontent-%COMP%]{position:relative}.br-units[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;gap:var(--br-gap)}.br-unit[_ngcontent-%COMP%]{font-size:var(--br-font-size);cursor:pointer;-webkit-font-smoothing:antialiased;text-rendering:auto}.br-unit-inner[_ngcontent-%COMP%]{position:relative}.br-readonly[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%], .br-disabled[_ngcontent-%COMP%]   .br-unit[_ngcontent-%COMP%]{cursor:default}"],changeDetection:0});let e=o;return e})(),xt=(()=>{let o=class o{};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=be({type:o}),o.\u0275inj=De({imports:[R,D]});let e=o;return e})();var bt=(()=>{let o=class o{constructor(t,i){this.dialogRef=t,this.data=i}onNoClick(){this.dialogRef.close()}};o.\u0275fac=function(i){return new(i||o)(C(mt),C(pt))},o.\u0275cmp=f({type:o,selectors:[["app-dialog-form"]],standalone:!0,features:[v],decls:12,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(i,a){i&1&&(s(0,"h1",0),h(1,"Search Term Edit"),_(),s(2,"div",1)(3,"p"),h(4,"Search Term"),_(),s(5,"mat-form-field")(6,"input",2),d("ngModelChange",function(g){return a.data.searchTerm=g}),_()()(),s(7,"div",3)(8,"button",4),d("click",function(){return a.onNoClick()}),h(9,"No Thanks"),_(),s(10,"button",5),h(11,"Ok"),_()()),i&2&&(c(6),m("ngModel",a.data.searchTerm),c(4),m("mat-dialog-close",a.data.searchTerm))},dependencies:[R,D,st,y,ae,M,W,X,ut,ht,It,gt,At],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0});let e=o;return e})();function Ci(e,o){if(e&1){let r=S();s(0,"mat-chip-row",11),d("removed",function(){let a=L(r).$implicit,l=E();return O(l.removeTag(a))})("click",function(i){L(r);let a=E();return O(a.openEditDialog(i))}),h(1),s(2,"button",12)(3,"mat-icon"),h(4,"cancel"),_()()()}if(e&2){let r=o.$implicit;c(),k(" ",r," ")}}function fi(e,o){if(e&1){let r=S();s(0,"div",18)(1,"button",19),d("click",function(){L(r);let i=E().$implicit,a=E(3);return O(a.removeFromArchive(i))}),h(2," Unarchive "),_()()}}function Ti(e,o){e&1&&T(0,"div",20)}function Ri(e,o){if(e&1){let r=S();s(0,"bar-rating",24),d("rateChange",function(i){L(r);let a=E().$implicit,l=E().$implicit,g=E(3);return O(g.setRating(i,a,l))}),_()}if(e&2){let r=E().$implicit,t=E().$implicit,i=E(3),a;m("rate",i.returnNumRating(t,r))("max",((a=i.ratingServices.get(r))==null?null:a.max_stars)||0)}}function Ni(e,o){e&1&&(s(0,"mat-icon"),h(1,"thumb_up_off_alt"),_())}function Li(e,o){e&1&&(s(0,"mat-icon"),h(1,"thumb_up"),_())}function Oi(e,o){e&1&&(s(0,"mat-icon"),h(1,"thumb_down"),_())}function vi(e,o){if(e&1){let r=S();s(0,"button",25),d("click",function(){L(r);let i=E().$implicit,a=E().$implicit,l=E(3);return O(l.setRating(!l.returnLikeDislikeRating(a,i),i,a))}),A(1,Ni,2,0,"mat-icon",26)(2,Li,2,0,"mat-icon",26)(3,Oi,2,0,"mat-icon",26),_()}if(e&2){let r=E().$implicit,t=E().$implicit,i=E(3);m("color",i.returnLikeDislikeRating(t,r)?"primary":""),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===null),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===!0),c(),m("ngIf",i.returnLikeDislikeRating(t,r)===!1)}}function Mi(e,o){if(e&1&&(s(0,"div",21)(1,"h3",22),h(2),_(),A(3,Ri,1,2,"bar-rating",23)(4,vi,4,4),_()),e&2){let r=o.$implicit,t=E(4),i;c(2),b((i=t.ratingServices.get(r))==null?null:i.name),c(),K(3,t.isNumericalRatingService(t.returnService(t.ratingServices.get(r)))?3:t.isLikeRatingService(t.returnService(t.ratingServices.get(r)))?4:-1)}}var Si=e=>({border:e});function Fi(e,o){if(e&1&&(s(0,"div",14)(1,"div",15),T(2,"app-image-display",16),A(3,fi,3,0,"div",17)(4,Ti,1,0),_(),s(5,"div"),U(6,Mi,5,2,"div",27,Ce),_()()),e&2){let r=o.$implicit,t=E(3);c(),m("ngStyle",j(6,Si,t.isFileSelected(r))),c(),m("hydrusFile",r)("widthNum",t.itemWidth)("heightNum",t.itemHeight)("thumbnail",!1),c(),K(3,t.isFilePendingArchive(r)?3:4),c(3),w(t.ratingServices.keys())}}function Di(e,o){e&1&&(s(0,"h2"),h(1,"No Files Found"),_())}function xi(e,o){if(e&1&&U(0,Fi,8,8,"div",28,Ce,!1,Di,2,0),e&2){let r=E().$implicit;w(r)}}function bi(e,o){e&1&&h(0," loading ... ")}function Gi(e,o){if(e&1&&(s(0,"div",13),A(1,xi,3,1)(2,bi,1,0),_()),e&2){let r=E();c(),K(1,r.loading?2:1)}}function Ui(e,o){if(e&1){let r=S();s(0,"div",29)(1,"button",30),d("click",function(){L(r);let i=E();return O(i.submitFiles())}),h(2," Submit "),_(),s(3,"mat-checkbox",31),d("ngModelChange",function(i){L(r);let a=E();return O(a.continue=i)}),h(4,"Continue Filtering"),_()()}if(e&2){let r=E();c(3),m("ngModel",r.continue)}}var wi=e=>({"height.px":e}),Gt=(()=>{let o=class o{constructor(t,i,a,l,g,Ut){this.fileService=t,this.apiService=i,this.viewportRuler=a,this.ngZone=l,this.changeDetectorRef=g,this.dialog=Ut,this.searchFormControl=new oe,this.itemSet=[],this.itemHeight=430,this.itemWidth=495,this.h=0,this.ratingValue=0,this.processing=!1,this.isNumericalRatingService=Te,this.isLikeRatingService=Re,this.isIncDecRatingService=Ne,this.tags=["system:limit = 8","system:inbox","system:no_duration"],this.startSearch=!1,this.loading=!1,this.hydrusFiles=[],this.continueFilter=!1,this.subscriptions=[],this.ratingFileChanges=[],this.chunkSize=1,this.userFileChanges=new ft,this.continue=!0,this.ratingServices=new Map}ngOnInit(){this.calcChunkSize(),this.viewportChangeSub=this.viewportRuler.change(200).subscribe(()=>this.ngZone.run(()=>this.generateDataChunk(this.hydrusFiles))),this.apiService.getServices().subscribe({next:t=>{this.allServices=t;for(let i in this.allServices.services){let a=this.allServices.services[i];Dt(a)&&this.ratingServices.set(i,a)}}})}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.viewportChangeSub.unsubscribe()}returnService(t){return t}isFileSelected(t){return this.userFileChanges.archive.includes(t)?"8px solid #00e676":this.userFileChanges.skipped.includes(t)?"8px solid  #007ac1":"8px solid #424242"}isFilePendingArchive(t){return this.userFileChanges.archive.includes(t)}removeFromArchive(t){this.userFileChanges.archive.includes(t)&&(this.userFileChanges.archive.splice(this.userFileChanges.archive.indexOf(t),1),this.ratingValue=0,this.ratingFileChanges=this.ratingFileChanges.filter(i=>i.hash!=t.hash))}generateDataChunk(t){this.calcChunkSize();let i,a=[];for(i=0;i<t.length;i+=this.chunkSize)a.push(t.slice(i,i+this.chunkSize));this.itemSet=a}calcChunkSize(){let t=window.innerWidth;this.chunkSize=Math.floor(t/(this.itemWidth+100)),this.h=Math.ceil(this.hydrusFiles.length/this.chunkSize)*(this.itemHeight+155+130)}removeTag(t){let i=this.tags.indexOf(t);i>=0&&this.tags.splice(i,1)}addTag(t){let i=(t.value||"").trim();i&&this.tags.push(i),t.chipInput.clear()}changeSearchStatus(){this.startSearch=!this.startSearch,this.startSearch&&this.searchFiles()}openEditDialog(t){let i=t.target.innerText;this.dialog.open(bt,{data:{searchTerm:i}}).afterClosed().subscribe(l=>{this.removeTag(i),this.tags.push(l)})}returnNumRating(t,i){let a=this.ratingFileChanges.findIndex(l=>l.hash===t.hash&&l.rating_service_key===i);return a!=-1?this.ratingFileChanges[a].rating:0}returnLikeDislikeRating(t,i){let a=this.ratingFileChanges.findIndex(l=>l.hash===t.hash&&l.rating_service_key===i);return a!=-1?this.ratingFileChanges[a].rating:null}setRating(t,i,a){let l=this.ratingFileChanges.findIndex(g=>g.hash===a.hash&&g.rating_service_key===i);l!=-1?this.ratingFileChanges[l].rating=t:this.ratingFileChanges.push(new Tt(a.hash,i,t)),this.userFileChanges.archive.includes(a)||this.userFileChanges.archive.push(a)}searchFiles(){let t=!0,i=2;this.startSearch&&(this.loading=!0,this.hydrusFiles=[],this.changeDetectorRef.detectChanges(),this.fileService.getFileWithMetadataFromSearch(this.tags,i.toString(),t.toString()).subscribe({next:a=>{this.hydrusFiles=a,this.generateDataChunk(this.hydrusFiles),this.loading=!1,this.scrollToTop()}}))}submitFiles(){let t=this.hydrusFiles;this.userFileChanges.delete=[],this.userFileChanges.archive.length>0&&this.userFileChanges.skipped.length>0?(this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(a=>a.file_id).includes(i.file_id)),this.userFileChanges.delete=this.userFileChanges.delete.filter(i=>!this.userFileChanges.skipped.map(a=>a.file_id).includes(i.file_id))):this.userFileChanges.archive.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.archive.map(a=>a.file_id).includes(i.file_id)):this.userFileChanges.skipped.length>0?this.userFileChanges.delete=t.filter(i=>!this.userFileChanges.skipped.map(a=>a.file_id).includes(i.file_id)):this.userFileChanges.delete=t,this.updateFileStatuses(this.userFileChanges)}updateFileStatuses(t){this.processing=!0,this.loading=!0;let i=t.archive.map(l=>l.file_id),a=t.delete.map(l=>l.file_id);this.ratingFileChanges.length>0&&this.ratingFileChanges.forEach(l=>{this.apiService.editFileRating(l).subscribe({error:g=>{console.log(g)}})}),i.length>0&&a.length>0?this.subscriptions.push(Me([this.apiService.archiveMultipleFilesById(i),this.apiService.deleteMultipleFilesById(a)]).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}})):a.length>0?this.apiService.deleteMultipleFilesById(a).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}}):i.length>0&&this.apiService.archiveMultipleFilesById(i).subscribe({next:l=>{this.searchFiles()},error:l=>{console.log(l)}})}scrollToTop(){this.virtualScroll.scrollToIndex(0)}};o.\u0275fac=function(i){return new(i||o)(C(Ie),C(pe),C(it),C(ke),C(Z),C(Et))},o.\u0275cmp=f({type:o,selectors:[["app-archive-delete-filter"]],viewQuery:function(i,a){if(i&1&&Qe(ie,5),i&2){let l;V(l=B())&&(a.virtualScroll=l.first)}},standalone:!0,features:[v],decls:18,vars:12,consts:[["cdkVirtualScrollingElement","",1,"main-container"],[1,"search-container"],[1,"tag-form-container"],[1,"tag-form-field"],["aria-label","Enter Search Terms",3,"formControl"],["chipGrid",""],["placeholder","New Tag...",3,"matChipInputFor","matChipInputTokenEnd"],["mat-flat-button","","color","accent",1,"search-play-button",3,"click"],["appendOnly","",1,"virtual-container",3,"itemSize","minBufferPx","maxBufferPx","ngStyle"],["class","files-container",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],["class","form-submission-container"],[3,"removed","click"],["matChipRemove","","aria-label","'remove ' + tag"],[1,"files-container"],[1,""],[3,"ngStyle"],[3,"hydrusFile","widthNum","heightNum","thumbnail"],["class","archive-button-container"],[1,"archive-button-container"],["mat-flat-button","","color","warn",1,"archive-button",3,"click"],[1,"temp-spacer"],[1,"ratings-container"],[1,"rating-name"],["class","bar-rating-container",3,"rate","max"],[1,"bar-rating-container",3,"rate","max","rateChange"],["mat-mini-fab","",1,"like-dislike-button",3,"color","click"],[4,"ngIf"],["class","ratings-container"],["class",""],[1,"form-submission-container"],["mat-flat-button","","color","primary",1,"submit-button",3,"click"],[1,"continue-checkbox",3,"ngModel","ngModelChange"]],template:function(i,a){if(i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-form-field",3)(4,"mat-label"),h(5,"Search"),_(),s(6,"mat-chip-grid",4,5),U(8,Ci,5,1,"mat-chip-row",null,q),_(),s(10,"input",6),d("matChipInputTokenEnd",function(g){return a.addTag(g)}),_()()(),s(11,"div")(12,"button",7),d("click",function(){return a.changeSearchStatus()}),s(13,"mat-icon"),h(14),_()()()(),s(15,"cdk-virtual-scroll-viewport",8),A(16,Gi,3,1,"div",9),_(),A(17,Ui,5,1,"div",10),_()),i&2){let l=F(7);c(6),m("formControl",a.searchFormControl),c(2),w(a.tags),c(2),m("matChipInputFor",l),c(4),b(a.startSearch?"play_arrow":"pause"),c(),m("itemSize",a.itemHeight)("minBufferPx",a.itemHeight*3)("maxBufferPx",a.itemHeight*5)("ngStyle",j(10,wi,a.h)),c(),m("cdkVirtualForOf",a.itemSet)("cdkVirtualForTemplateCacheSize",0),c(),K(17,a.itemSet.length>0?17:-1)}},dependencies:[R,Y,te,M,W,rt,X,se,dt,Q,ue,me,_e,ce,tt,nt,ie,ot,he,D,y,ae,le,re,xt,Ae,at],styles:[".main-container[_ngcontent-%COMP%]{height:92vh}.tag-form-field[_ngcontent-%COMP%]{width:100%}.search-container[_ngcontent-%COMP%]{display:flex}.tag-form-container[_ngcontent-%COMP%]{flex:1;margin-right:5px}.tag-namespace-series[_ngcontent-%COMP%]{background-color:#a0a}.tag-namespace-system[_ngcontent-%COMP%]{background-color:#996515}.tag-namespace-meta[_ngcontent-%COMP%]{background-color:#000}.tag-namespace-creator[_ngcontent-%COMP%]{background-color:#a00}.tag-namespace-studio[_ngcontent-%COMP%]{background-color:maroon}.tag-namespace-character[_ngcontent-%COMP%]{background-color:#0a0}.tag-namespace-person[_ngcontent-%COMP%]{background-color:green}.tag-namespace-default[_ngcontent-%COMP%]{background-color:#006ffa}.search-play-button[_ngcontent-%COMP%]{height:55px;margin-left:10px;margin-right:15px}.search-play-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{height:35px;width:35px;line-height:35px;font-size:45px}.files-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around;margin-bottom:25px}.image-container[_ngcontent-%COMP%]{display:block}.form-submission-container[_ngcontent-%COMP%]{margin-top:10px}.archive-button-container[_ngcontent-%COMP%]{display:flex;justify-content:end}.archive-button[_ngcontent-%COMP%], .temp-spacer[_ngcontent-%COMP%]{margin:2px;height:30px}.ratings-container[_ngcontent-%COMP%]{display:flex;gap:10px}.rating-name[_ngcontent-%COMP%]{font-size:18px;margin-top:3px;font-variant:small-caps;font-weight:500}.bar-rating-container[_ngcontent-%COMP%]{margin-top:5px}.virtual-container[_ngcontent-%COMP%]{margin-top:15px;width:100%;height:100%;flex-grow:1}"]});let e=o;return e})();var qn=[{path:"",component:Rt,children:[{path:"",component:Nt},{path:"search",component:Ft},{path:"archive-delete-filter",component:Gt}]}];export{qn as HOME_ROUTES};
